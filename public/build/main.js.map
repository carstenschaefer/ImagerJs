{
  "version": 3,
  "sources": ["../../live-reload.js", "../../node_modules/piexifjs/piexif.js", "../../src/main.js", "../../src/ImagerJs.js", "../../node_modules/nanoid/index.browser.js", "../../node_modules/nanoid/url-alphabet/index.js", "../../src/Modal.js", "../../src/Toolbar.js", "../../src/Translations.js", "../../src/util/Util.js", "../../src/plugins/crop/Crop.js", "../../src/plugins/delete/Delete.js", "../../src/plugins/properties/properties.js", "../../src/plugins/resize/Resize.js", "../../src/plugins/rotate/Rotate.js", "../../src/plugins/save/Save.js", "../../src/plugins/toolbar/Toolbar.js", "../../src/plugins/undo/Undo.js", "../../src/util/FileSelector.js", "../../src/QualitySelector.js"],
  "sourcesContent": ["try {\r\n    if (!window.live_reload_enabled) {\r\n        window.live_reload_enabled = true;\r\n        const url = `http://localhost:8989/esbuild`;\r\n        new EventSource(url).addEventListener('change', () => {\r\n            document.body.innerHTML = '<h1>RELOADING<h1>';\r\n            location.reload();\r\n        })\r\n        console.log('live reload enabled: ', url);\r\n    }\r\n} catch (error) {\r\n    console.error('live reload failed', error);\r\n}", "/* piexifjs\r\n\r\nThe MIT License (MIT)\r\n\r\nCopyright (c) 2014, 2015 hMatoba(https://github.com/hMatoba)\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in all\r\ncopies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\r\nSOFTWARE.\r\n*/\r\n\r\n(function () {\r\n    \"use strict\";\r\n    var that = {};\r\n    that.version = \"1.0.4\";\r\n\r\n    that.remove = function (jpeg) {\r\n        var b64 = false;\r\n        if (jpeg.slice(0, 2) == \"\\xff\\xd8\") {\r\n        } else if (jpeg.slice(0, 23) == \"data:image/jpeg;base64,\" || jpeg.slice(0, 22) == \"data:image/jpg;base64,\") {\r\n            jpeg = atob(jpeg.split(\",\")[1]);\r\n            b64 = true;\r\n        } else {\r\n            throw new Error(\"Given data is not jpeg.\");\r\n        }\r\n        \r\n        var segments = splitIntoSegments(jpeg);\r\n        var newSegments = segments.filter(function(seg){\r\n          return  !(seg.slice(0, 2) == \"\\xff\\xe1\" &&\r\n                   seg.slice(4, 10) == \"Exif\\x00\\x00\"); \r\n        });\r\n        \r\n        var new_data = newSegments.join(\"\");\r\n        if (b64) {\r\n            new_data = \"data:image/jpeg;base64,\" + btoa(new_data);\r\n        }\r\n\r\n        return new_data;\r\n    };\r\n\r\n\r\n    that.insert = function (exif, jpeg) {\r\n        var b64 = false;\r\n        if (exif.slice(0, 6) != \"\\x45\\x78\\x69\\x66\\x00\\x00\") {\r\n            throw new Error(\"Given data is not exif.\");\r\n        }\r\n        if (jpeg.slice(0, 2) == \"\\xff\\xd8\") {\r\n        } else if (jpeg.slice(0, 23) == \"data:image/jpeg;base64,\" || jpeg.slice(0, 22) == \"data:image/jpg;base64,\") {\r\n            jpeg = atob(jpeg.split(\",\")[1]);\r\n            b64 = true;\r\n        } else {\r\n            throw new Error(\"Given data is not jpeg.\");\r\n        }\r\n\r\n        var exifStr = \"\\xff\\xe1\" + pack(\">H\", [exif.length + 2]) + exif;\r\n        var segments = splitIntoSegments(jpeg);\r\n        var new_data = mergeSegments(segments, exifStr);\r\n        if (b64) {\r\n            new_data = \"data:image/jpeg;base64,\" + btoa(new_data);\r\n        }\r\n\r\n        return new_data;\r\n    };\r\n\r\n\r\n    that.load = function (data) {\r\n        var input_data;\r\n        if (typeof (data) == \"string\") {\r\n            if (data.slice(0, 2) == \"\\xff\\xd8\") {\r\n                input_data = data;\r\n            } else if (data.slice(0, 23) == \"data:image/jpeg;base64,\" || data.slice(0, 22) == \"data:image/jpg;base64,\") {\r\n                input_data = atob(data.split(\",\")[1]);\r\n            } else if (data.slice(0, 4) == \"Exif\") {\r\n                input_data = data.slice(6);\r\n            } else {\r\n                throw new Error(\"'load' gots invalid file data.\");\r\n            }\r\n        } else {\r\n            throw new Error(\"'load' gots invalid type argument.\");\r\n        }\r\n\r\n        var exifDict = {};\r\n        var exif_dict = {\r\n            \"0th\": {},\r\n            \"Exif\": {},\r\n            \"GPS\": {},\r\n            \"Interop\": {},\r\n            \"1st\": {},\r\n            \"thumbnail\": null\r\n        };\r\n        var exifReader = new ExifReader(input_data);\r\n        if (exifReader.tiftag === null) {\r\n            return exif_dict;\r\n        }\r\n\r\n        if (exifReader.tiftag.slice(0, 2) == \"\\x49\\x49\") {\r\n            exifReader.endian_mark = \"<\";\r\n        } else {\r\n            exifReader.endian_mark = \">\";\r\n        }\r\n\r\n        var pointer = unpack(exifReader.endian_mark + \"L\",\r\n            exifReader.tiftag.slice(4, 8))[0];\r\n        exif_dict[\"0th\"] = exifReader.get_ifd(pointer, \"0th\");\r\n\r\n        var first_ifd_pointer = exif_dict[\"0th\"][\"first_ifd_pointer\"];\r\n        delete exif_dict[\"0th\"][\"first_ifd_pointer\"];\r\n\r\n        if (34665 in exif_dict[\"0th\"]) {\r\n            pointer = exif_dict[\"0th\"][34665];\r\n            exif_dict[\"Exif\"] = exifReader.get_ifd(pointer, \"Exif\");\r\n        }\r\n        if (34853 in exif_dict[\"0th\"]) {\r\n            pointer = exif_dict[\"0th\"][34853];\r\n            exif_dict[\"GPS\"] = exifReader.get_ifd(pointer, \"GPS\");\r\n        }\r\n        if (40965 in exif_dict[\"Exif\"]) {\r\n            pointer = exif_dict[\"Exif\"][40965];\r\n            exif_dict[\"Interop\"] = exifReader.get_ifd(pointer, \"Interop\");\r\n        }\r\n        if (first_ifd_pointer != \"\\x00\\x00\\x00\\x00\") {\r\n            pointer = unpack(exifReader.endian_mark + \"L\",\r\n                first_ifd_pointer)[0];\r\n            exif_dict[\"1st\"] = exifReader.get_ifd(pointer, \"1st\");\r\n            if ((513 in exif_dict[\"1st\"]) && (514 in exif_dict[\"1st\"])) {\r\n                var end = exif_dict[\"1st\"][513] + exif_dict[\"1st\"][514];\r\n                var thumb = exifReader.tiftag.slice(exif_dict[\"1st\"][513], end);\r\n                exif_dict[\"thumbnail\"] = thumb;\r\n            }\r\n        }\r\n\r\n        return exif_dict;\r\n    };\r\n\r\n\r\n    that.dump = function (exif_dict_original) {\r\n        var TIFF_HEADER_LENGTH = 8;\r\n\r\n        var exif_dict = copy(exif_dict_original);\r\n        var header = \"Exif\\x00\\x00\\x4d\\x4d\\x00\\x2a\\x00\\x00\\x00\\x08\";\r\n        var exif_is = false;\r\n        var gps_is = false;\r\n        var interop_is = false;\r\n        var first_is = false;\r\n\r\n        var zeroth_ifd,\r\n            exif_ifd,\r\n            interop_ifd,\r\n            gps_ifd,\r\n            first_ifd;\r\n        \r\n        if (\"0th\" in exif_dict) {\r\n            zeroth_ifd = exif_dict[\"0th\"];\r\n        } else {\r\n            zeroth_ifd = {};\r\n        }\r\n        \r\n        if (((\"Exif\" in exif_dict) && (Object.keys(exif_dict[\"Exif\"]).length)) ||\r\n            ((\"Interop\" in exif_dict) && (Object.keys(exif_dict[\"Interop\"]).length))) {\r\n            zeroth_ifd[34665] = 1;\r\n            exif_is = true;\r\n            exif_ifd = exif_dict[\"Exif\"];\r\n            if ((\"Interop\" in exif_dict) && Object.keys(exif_dict[\"Interop\"]).length) {\r\n                exif_ifd[40965] = 1;\r\n                interop_is = true;\r\n                interop_ifd = exif_dict[\"Interop\"];\r\n            } else if (Object.keys(exif_ifd).indexOf(that.ExifIFD.InteroperabilityTag.toString()) > -1) {\r\n                delete exif_ifd[40965];\r\n            }\r\n        } else if (Object.keys(zeroth_ifd).indexOf(that.ImageIFD.ExifTag.toString()) > -1) {\r\n            delete zeroth_ifd[34665];\r\n        }\r\n\r\n        if ((\"GPS\" in exif_dict) && (Object.keys(exif_dict[\"GPS\"]).length)) {\r\n            zeroth_ifd[that.ImageIFD.GPSTag] = 1;\r\n            gps_is = true;\r\n            gps_ifd = exif_dict[\"GPS\"];\r\n        } else if (Object.keys(zeroth_ifd).indexOf(that.ImageIFD.GPSTag.toString()) > -1) {\r\n            delete zeroth_ifd[that.ImageIFD.GPSTag];\r\n        }\r\n        \r\n        if ((\"1st\" in exif_dict) &&\r\n            (\"thumbnail\" in exif_dict) &&\r\n            (exif_dict[\"thumbnail\"] != null)) {\r\n            first_is = true;\r\n            exif_dict[\"1st\"][513] = 1;\r\n            exif_dict[\"1st\"][514] = 1;\r\n            first_ifd = exif_dict[\"1st\"];\r\n        }\r\n        \r\n        var zeroth_set = _dict_to_bytes(zeroth_ifd, \"0th\", 0);\r\n        var zeroth_length = (zeroth_set[0].length + exif_is * 12 + gps_is * 12 + 4 +\r\n            zeroth_set[1].length);\r\n\r\n        var exif_set,\r\n            exif_bytes = \"\",\r\n            exif_length = 0,\r\n            gps_set,\r\n            gps_bytes = \"\",\r\n            gps_length = 0,\r\n            interop_set,\r\n            interop_bytes = \"\",\r\n            interop_length = 0,\r\n            first_set,\r\n            first_bytes = \"\",\r\n            thumbnail;\r\n        if (exif_is) {\r\n            exif_set = _dict_to_bytes(exif_ifd, \"Exif\", zeroth_length);\r\n            exif_length = exif_set[0].length + interop_is * 12 + exif_set[1].length;\r\n        }\r\n        if (gps_is) {\r\n            gps_set = _dict_to_bytes(gps_ifd, \"GPS\", zeroth_length + exif_length);\r\n            gps_bytes = gps_set.join(\"\");\r\n            gps_length = gps_bytes.length;\r\n        }\r\n        if (interop_is) {\r\n            var offset = zeroth_length + exif_length + gps_length;\r\n            interop_set = _dict_to_bytes(interop_ifd, \"Interop\", offset);\r\n            interop_bytes = interop_set.join(\"\");\r\n            interop_length = interop_bytes.length;\r\n        }\r\n        if (first_is) {\r\n            var offset = zeroth_length + exif_length + gps_length + interop_length;\r\n            first_set = _dict_to_bytes(first_ifd, \"1st\", offset);\r\n            thumbnail = _get_thumbnail(exif_dict[\"thumbnail\"]);\r\n            if (thumbnail.length > 64000) {\r\n                throw new Error(\"Given thumbnail is too large. max 64kB\");\r\n            }\r\n        }\r\n\r\n        var exif_pointer = \"\",\r\n            gps_pointer = \"\",\r\n            interop_pointer = \"\",\r\n            first_ifd_pointer = \"\\x00\\x00\\x00\\x00\";\r\n        if (exif_is) {\r\n            var pointer_value = TIFF_HEADER_LENGTH + zeroth_length;\r\n            var pointer_str = pack(\">L\", [pointer_value]);\r\n            var key = 34665;\r\n            var key_str = pack(\">H\", [key]);\r\n            var type_str = pack(\">H\", [TYPES[\"Long\"]]);\r\n            var length_str = pack(\">L\", [1]);\r\n            exif_pointer = key_str + type_str + length_str + pointer_str;\r\n        }\r\n        if (gps_is) {\r\n            var pointer_value = TIFF_HEADER_LENGTH + zeroth_length + exif_length;\r\n            var pointer_str = pack(\">L\", [pointer_value]);\r\n            var key = 34853;\r\n            var key_str = pack(\">H\", [key]);\r\n            var type_str = pack(\">H\", [TYPES[\"Long\"]]);\r\n            var length_str = pack(\">L\", [1]);\r\n            gps_pointer = key_str + type_str + length_str + pointer_str;\r\n        }\r\n        if (interop_is) {\r\n            var pointer_value = (TIFF_HEADER_LENGTH +\r\n                zeroth_length + exif_length + gps_length);\r\n            var pointer_str = pack(\">L\", [pointer_value]);\r\n            var key = 40965;\r\n            var key_str = pack(\">H\", [key]);\r\n            var type_str = pack(\">H\", [TYPES[\"Long\"]]);\r\n            var length_str = pack(\">L\", [1]);\r\n            interop_pointer = key_str + type_str + length_str + pointer_str;\r\n        }\r\n        if (first_is) {\r\n            var pointer_value = (TIFF_HEADER_LENGTH + zeroth_length +\r\n                exif_length + gps_length + interop_length);\r\n            first_ifd_pointer = pack(\">L\", [pointer_value]);\r\n            var thumbnail_pointer = (pointer_value + first_set[0].length + 24 +\r\n                4 + first_set[1].length);\r\n            var thumbnail_p_bytes = (\"\\x02\\x01\\x00\\x04\\x00\\x00\\x00\\x01\" +\r\n                pack(\">L\", [thumbnail_pointer]));\r\n            var thumbnail_length_bytes = (\"\\x02\\x02\\x00\\x04\\x00\\x00\\x00\\x01\" +\r\n                pack(\">L\", [thumbnail.length]));\r\n            first_bytes = (first_set[0] + thumbnail_p_bytes +\r\n                thumbnail_length_bytes + \"\\x00\\x00\\x00\\x00\" +\r\n                first_set[1] + thumbnail);\r\n        }\r\n\r\n        var zeroth_bytes = (zeroth_set[0] + exif_pointer + gps_pointer +\r\n            first_ifd_pointer + zeroth_set[1]);\r\n        if (exif_is) {\r\n            exif_bytes = exif_set[0] + interop_pointer + exif_set[1];\r\n        }\r\n\r\n        return (header + zeroth_bytes + exif_bytes + gps_bytes +\r\n            interop_bytes + first_bytes);\r\n    };\r\n\r\n\r\n    function copy(obj) {\r\n        return JSON.parse(JSON.stringify(obj));\r\n    }\r\n\r\n\r\n    function _get_thumbnail(jpeg) {\r\n        var segments = splitIntoSegments(jpeg);\r\n        while ((\"\\xff\\xe0\" <= segments[1].slice(0, 2)) && (segments[1].slice(0, 2) <= \"\\xff\\xef\")) {\r\n            segments = [segments[0]].concat(segments.slice(2));\r\n        }\r\n        return segments.join(\"\");\r\n    }\r\n\r\n\r\n    function _pack_byte(array) {\r\n        return pack(\">\" + nStr(\"B\", array.length), array);\r\n    }\r\n\r\n\r\n    function _pack_short(array) {\r\n        return pack(\">\" + nStr(\"H\", array.length), array);\r\n    }\r\n\r\n\r\n    function _pack_long(array) {\r\n        return pack(\">\" + nStr(\"L\", array.length), array);\r\n    }\r\n\r\n\r\n    function _value_to_bytes(raw_value, value_type, offset) {\r\n        var four_bytes_over = \"\";\r\n        var value_str = \"\";\r\n        var length,\r\n            new_value,\r\n            num,\r\n            den;\r\n\r\n        if (value_type == \"Byte\") {\r\n            length = raw_value.length;\r\n            if (length <= 4) {\r\n                value_str = (_pack_byte(raw_value) +\r\n                    nStr(\"\\x00\", 4 - length));\r\n            } else {\r\n                value_str = pack(\">L\", [offset]);\r\n                four_bytes_over = _pack_byte(raw_value);\r\n            }\r\n        } else if (value_type == \"Short\") {\r\n            length = raw_value.length;\r\n            if (length <= 2) {\r\n                value_str = (_pack_short(raw_value) +\r\n                    nStr(\"\\x00\\x00\", 2 - length));\r\n            } else {\r\n                value_str = pack(\">L\", [offset]);\r\n                four_bytes_over = _pack_short(raw_value);\r\n            }\r\n        } else if (value_type == \"Long\") {\r\n            length = raw_value.length;\r\n            if (length <= 1) {\r\n                value_str = _pack_long(raw_value);\r\n            } else {\r\n                value_str = pack(\">L\", [offset]);\r\n                four_bytes_over = _pack_long(raw_value);\r\n            }\r\n        } else if (value_type == \"Ascii\") {\r\n            new_value = raw_value + \"\\x00\";\r\n            length = new_value.length;\r\n            if (length > 4) {\r\n                value_str = pack(\">L\", [offset]);\r\n                four_bytes_over = new_value;\r\n            } else {\r\n                value_str = new_value + nStr(\"\\x00\", 4 - length);\r\n            }\r\n        } else if (value_type == \"Rational\") {\r\n            if (typeof (raw_value[0]) == \"number\") {\r\n                length = 1;\r\n                num = raw_value[0];\r\n                den = raw_value[1];\r\n                new_value = pack(\">L\", [num]) + pack(\">L\", [den]);\r\n            } else {\r\n                length = raw_value.length;\r\n                new_value = \"\";\r\n                for (var n = 0; n < length; n++) {\r\n                    num = raw_value[n][0];\r\n                    den = raw_value[n][1];\r\n                    new_value += (pack(\">L\", [num]) +\r\n                        pack(\">L\", [den]));\r\n                }\r\n            }\r\n            value_str = pack(\">L\", [offset]);\r\n            four_bytes_over = new_value;\r\n        } else if (value_type == \"SRational\") {\r\n            if (typeof (raw_value[0]) == \"number\") {\r\n                length = 1;\r\n                num = raw_value[0];\r\n                den = raw_value[1];\r\n                new_value = pack(\">l\", [num]) + pack(\">l\", [den]);\r\n            } else {\r\n                length = raw_value.length;\r\n                new_value = \"\";\r\n                for (var n = 0; n < length; n++) {\r\n                    num = raw_value[n][0];\r\n                    den = raw_value[n][1];\r\n                    new_value += (pack(\">l\", [num]) +\r\n                        pack(\">l\", [den]));\r\n                }\r\n            }\r\n            value_str = pack(\">L\", [offset]);\r\n            four_bytes_over = new_value;\r\n        } else if (value_type == \"Undefined\") {\r\n            length = raw_value.length;\r\n            if (length > 4) {\r\n                value_str = pack(\">L\", [offset]);\r\n                four_bytes_over = raw_value;\r\n            } else {\r\n                value_str = raw_value + nStr(\"\\x00\", 4 - length);\r\n            }\r\n        }\r\n\r\n        var length_str = pack(\">L\", [length]);\r\n\r\n        return [length_str, value_str, four_bytes_over];\r\n    }\r\n\r\n    function _dict_to_bytes(ifd_dict, ifd, ifd_offset) {\r\n        var TIFF_HEADER_LENGTH = 8;\r\n        var tag_count = Object.keys(ifd_dict).length;\r\n        var entry_header = pack(\">H\", [tag_count]);\r\n        var entries_length;\r\n        if ([\"0th\", \"1st\"].indexOf(ifd) > -1) {\r\n            entries_length = 2 + tag_count * 12 + 4;\r\n        } else {\r\n            entries_length = 2 + tag_count * 12;\r\n        }\r\n        var entries = \"\";\r\n        var values = \"\";\r\n        var key;\r\n\r\n        for (var key in ifd_dict) {\r\n            if (typeof (key) == \"string\") {\r\n                key = parseInt(key);\r\n            }\r\n            if ((ifd == \"0th\") && ([34665, 34853].indexOf(key) > -1)) {\r\n                continue;\r\n            } else if ((ifd == \"Exif\") && (key == 40965)) {\r\n                continue;\r\n            } else if ((ifd == \"1st\") && ([513, 514].indexOf(key) > -1)) {\r\n                continue;\r\n            }\r\n\r\n            var raw_value = ifd_dict[key];\r\n            var key_str = pack(\">H\", [key]);\r\n            var value_type = TAGS[ifd][key][\"type\"];\r\n            var type_str = pack(\">H\", [TYPES[value_type]]);\r\n\r\n            if (typeof (raw_value) == \"number\") {\r\n                raw_value = [raw_value];\r\n            }\r\n            var offset = TIFF_HEADER_LENGTH + entries_length + ifd_offset + values.length;\r\n            var b = _value_to_bytes(raw_value, value_type, offset);\r\n            var length_str = b[0];\r\n            var value_str = b[1];\r\n            var four_bytes_over = b[2];\r\n\r\n            entries += key_str + type_str + length_str + value_str;\r\n            values += four_bytes_over;\r\n        }\r\n\r\n        return [entry_header + entries, values];\r\n    }\r\n\r\n\r\n\r\n    function ExifReader(data) {\r\n        var segments,\r\n            app1;\r\n        if (data.slice(0, 2) == \"\\xff\\xd8\") { // JPEG\r\n            segments = splitIntoSegments(data);\r\n            app1 = getExifSeg(segments);\r\n            if (app1) {\r\n                this.tiftag = app1.slice(10);\r\n            } else {\r\n                this.tiftag = null;\r\n            }\r\n        } else if ([\"\\x49\\x49\", \"\\x4d\\x4d\"].indexOf(data.slice(0, 2)) > -1) { // TIFF\r\n            this.tiftag = data;\r\n        } else if (data.slice(0, 4) == \"Exif\") { // Exif\r\n            this.tiftag = data.slice(6);\r\n        } else {\r\n            throw new Error(\"Given file is neither JPEG nor TIFF.\");\r\n        }\r\n    }\r\n\r\n    ExifReader.prototype = {\r\n        get_ifd: function (pointer, ifd_name) {\r\n            var ifd_dict = {};\r\n            var tag_count = unpack(this.endian_mark + \"H\",\r\n                this.tiftag.slice(pointer, pointer + 2))[0];\r\n            var offset = pointer + 2;\r\n            var t;\r\n            if ([\"0th\", \"1st\"].indexOf(ifd_name) > -1) {\r\n                t = \"Image\";\r\n            } else {\r\n                t = ifd_name;\r\n            }\r\n\r\n            for (var x = 0; x < tag_count; x++) {\r\n                pointer = offset + 12 * x;\r\n                var tag = unpack(this.endian_mark + \"H\",\r\n                    this.tiftag.slice(pointer, pointer + 2))[0];\r\n                var value_type = unpack(this.endian_mark + \"H\",\r\n                    this.tiftag.slice(pointer + 2, pointer + 4))[0];\r\n                var value_num = unpack(this.endian_mark + \"L\",\r\n                    this.tiftag.slice(pointer + 4, pointer + 8))[0];\r\n                var value = this.tiftag.slice(pointer + 8, pointer + 12);\r\n\r\n                var v_set = [value_type, value_num, value];\r\n                if (tag in TAGS[t]) {\r\n                    ifd_dict[tag] = this.convert_value(v_set);\r\n                }\r\n            }\r\n\r\n            if (ifd_name == \"0th\") {\r\n                pointer = offset + 12 * tag_count;\r\n                ifd_dict[\"first_ifd_pointer\"] = this.tiftag.slice(pointer, pointer + 4);\r\n            }\r\n\r\n            return ifd_dict;\r\n        },\r\n\r\n        convert_value: function (val) {\r\n            var data = null;\r\n            var t = val[0];\r\n            var length = val[1];\r\n            var value = val[2];\r\n            var pointer;\r\n\r\n            if (t == 1) { // BYTE\r\n                if (length > 4) {\r\n                    pointer = unpack(this.endian_mark + \"L\", value)[0];\r\n                    data = unpack(this.endian_mark + nStr(\"B\", length),\r\n                        this.tiftag.slice(pointer, pointer + length));\r\n                } else {\r\n                    data = unpack(this.endian_mark + nStr(\"B\", length), value.slice(0, length));\r\n                }\r\n            } else if (t == 2) { // ASCII\r\n                if (length > 4) {\r\n                    pointer = unpack(this.endian_mark + \"L\", value)[0];\r\n                    data = this.tiftag.slice(pointer, pointer + length - 1);\r\n                } else {\r\n                    data = value.slice(0, length - 1);\r\n                }\r\n            } else if (t == 3) { // SHORT\r\n                if (length > 2) {\r\n                    pointer = unpack(this.endian_mark + \"L\", value)[0];\r\n                    data = unpack(this.endian_mark + nStr(\"H\", length),\r\n                        this.tiftag.slice(pointer, pointer + length * 2));\r\n                } else {\r\n                    data = unpack(this.endian_mark + nStr(\"H\", length),\r\n                        value.slice(0, length * 2));\r\n                }\r\n            } else if (t == 4) { // LONG\r\n                if (length > 1) {\r\n                    pointer = unpack(this.endian_mark + \"L\", value)[0];\r\n                    data = unpack(this.endian_mark + nStr(\"L\", length),\r\n                        this.tiftag.slice(pointer, pointer + length * 4));\r\n                } else {\r\n                    data = unpack(this.endian_mark + nStr(\"L\", length),\r\n                        value);\r\n                }\r\n            } else if (t == 5) { // RATIONAL\r\n                pointer = unpack(this.endian_mark + \"L\", value)[0];\r\n                if (length > 1) {\r\n                    data = [];\r\n                    for (var x = 0; x < length; x++) {\r\n                        data.push([unpack(this.endian_mark + \"L\",\r\n                                this.tiftag.slice(pointer + x * 8, pointer + 4 + x * 8))[0],\r\n                                   unpack(this.endian_mark + \"L\",\r\n                                this.tiftag.slice(pointer + 4 + x * 8, pointer + 8 + x * 8))[0]\r\n                                   ]);\r\n                    }\r\n                } else {\r\n                    data = [unpack(this.endian_mark + \"L\",\r\n                            this.tiftag.slice(pointer, pointer + 4))[0],\r\n                            unpack(this.endian_mark + \"L\",\r\n                            this.tiftag.slice(pointer + 4, pointer + 8))[0]\r\n                            ];\r\n                }\r\n            } else if (t == 7) { // UNDEFINED BYTES\r\n                if (length > 4) {\r\n                    pointer = unpack(this.endian_mark + \"L\", value)[0];\r\n                    data = this.tiftag.slice(pointer, pointer + length);\r\n                } else {\r\n                    data = value.slice(0, length);\r\n                }\r\n            } else if (t == 9) { // SLONG\r\n                if (length > 1) {\r\n                    pointer = unpack(this.endian_mark + \"L\", value)[0];\r\n                    data = unpack(this.endian_mark + nStr(\"l\", length),\r\n                        this.tiftag.slice(pointer, pointer + length * 4));\r\n                } else {\r\n                    data = unpack(this.endian_mark + nStr(\"l\", length),\r\n                        value);\r\n                }\r\n            } else if (t == 10) { // SRATIONAL\r\n                pointer = unpack(this.endian_mark + \"L\", value)[0];\r\n                if (length > 1) {\r\n                    data = [];\r\n                    for (var x = 0; x < length; x++) {\r\n                        data.push([unpack(this.endian_mark + \"l\",\r\n                                this.tiftag.slice(pointer + x * 8, pointer + 4 + x * 8))[0],\r\n                                   unpack(this.endian_mark + \"l\",\r\n                                this.tiftag.slice(pointer + 4 + x * 8, pointer + 8 + x * 8))[0]\r\n                                  ]);\r\n                    }\r\n                } else {\r\n                    data = [unpack(this.endian_mark + \"l\",\r\n                            this.tiftag.slice(pointer, pointer + 4))[0],\r\n                            unpack(this.endian_mark + \"l\",\r\n                            this.tiftag.slice(pointer + 4, pointer + 8))[0]\r\n                           ];\r\n                }\r\n            } else {\r\n                throw new Error(\"Exif might be wrong. Got incorrect value \" +\r\n                    \"type to decode. type:\" + t);\r\n            }\r\n\r\n            if ((data instanceof Array) && (data.length == 1)) {\r\n                return data[0];\r\n            } else {\r\n                return data;\r\n            }\r\n        },\r\n    };\r\n\r\n\r\n    if (typeof window !== \"undefined\" && typeof window.btoa === \"function\") {\r\n        var btoa = window.btoa;\r\n    }\r\n    if (typeof btoa === \"undefined\") {\r\n        var btoa = function (input) {        var output = \"\";\r\n            var chr1, chr2, chr3, enc1, enc2, enc3, enc4;\r\n            var i = 0;\r\n            var keyStr = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\r\n\r\n            while (i < input.length) {\r\n\r\n                chr1 = input.charCodeAt(i++);\r\n                chr2 = input.charCodeAt(i++);\r\n                chr3 = input.charCodeAt(i++);\r\n\r\n                enc1 = chr1 >> 2;\r\n                enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\r\n                enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\r\n                enc4 = chr3 & 63;\r\n\r\n                if (isNaN(chr2)) {\r\n                    enc3 = enc4 = 64;\r\n                } else if (isNaN(chr3)) {\r\n                    enc4 = 64;\r\n                }\r\n\r\n                output = output +\r\n                keyStr.charAt(enc1) + keyStr.charAt(enc2) +\r\n                keyStr.charAt(enc3) + keyStr.charAt(enc4);\r\n\r\n            }\r\n\r\n            return output;\r\n        };\r\n    }\r\n    \r\n    \r\n    if (typeof window !== \"undefined\" && typeof window.atob === \"function\") {\r\n        var atob = window.atob;\r\n    }\r\n    if (typeof atob === \"undefined\") {\r\n        var atob = function (input) {\r\n            var output = \"\";\r\n            var chr1, chr2, chr3;\r\n            var enc1, enc2, enc3, enc4;\r\n            var i = 0;\r\n            var keyStr = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\r\n\r\n            input = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, \"\");\r\n\r\n            while (i < input.length) {\r\n\r\n                enc1 = keyStr.indexOf(input.charAt(i++));\r\n                enc2 = keyStr.indexOf(input.charAt(i++));\r\n                enc3 = keyStr.indexOf(input.charAt(i++));\r\n                enc4 = keyStr.indexOf(input.charAt(i++));\r\n\r\n                chr1 = (enc1 << 2) | (enc2 >> 4);\r\n                chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);\r\n                chr3 = ((enc3 & 3) << 6) | enc4;\r\n\r\n                output = output + String.fromCharCode(chr1);\r\n\r\n                if (enc3 != 64) {\r\n                    output = output + String.fromCharCode(chr2);\r\n                }\r\n                if (enc4 != 64) {\r\n                    output = output + String.fromCharCode(chr3);\r\n                }\r\n\r\n            }\r\n\r\n            return output;\r\n        };\r\n    }\r\n\r\n\r\n    function getImageSize(imageArray) {\r\n        var segments = slice2Segments(imageArray);\r\n        var seg,\r\n            width,\r\n            height,\r\n            SOF = [192, 193, 194, 195, 197, 198, 199, 201, 202, 203, 205, 206, 207];\r\n\r\n        for (var x = 0; x < segments.length; x++) {\r\n            seg = segments[x];\r\n            if (SOF.indexOf(seg[1]) >= 0) {\r\n                height = seg[5] * 256 + seg[6];\r\n                width = seg[7] * 256 + seg[8];\r\n                break;\r\n            }\r\n        }\r\n        return [width, height];\r\n    }\r\n\r\n\r\n    function pack(mark, array) {\r\n        if (!(array instanceof Array)) {\r\n            throw new Error(\"'pack' error. Got invalid type argument.\");\r\n        }\r\n        if ((mark.length - 1) != array.length) {\r\n            throw new Error(\"'pack' error. \" + (mark.length - 1) + \" marks, \" + array.length + \" elements.\");\r\n        }\r\n\r\n        var littleEndian;\r\n        if (mark[0] == \"<\") {\r\n            littleEndian = true;\r\n        } else if (mark[0] == \">\") {\r\n            littleEndian = false;\r\n        } else {\r\n            throw new Error(\"\");\r\n        }\r\n        var packed = \"\";\r\n        var p = 1;\r\n        var val = null;\r\n        var c = null;\r\n        var valStr = null;\r\n\r\n        while (c = mark[p]) {\r\n            if (c.toLowerCase() == \"b\") {\r\n                val = array[p - 1];\r\n                if ((c == \"b\") && (val < 0)) {\r\n                    val += 0x100;\r\n                }\r\n                if ((val > 0xff) || (val < 0)) {\r\n                    throw new Error(\"'pack' error.\");\r\n                } else {\r\n                    valStr = String.fromCharCode(val);\r\n                }\r\n            } else if (c == \"H\") {\r\n                val = array[p - 1];\r\n                if ((val > 0xffff) || (val < 0)) {\r\n                    throw new Error(\"'pack' error.\");\r\n                } else {\r\n                    valStr = String.fromCharCode(Math.floor((val % 0x10000) / 0x100)) +\r\n                        String.fromCharCode(val % 0x100);\r\n                    if (littleEndian) {\r\n                        valStr = valStr.split(\"\").reverse().join(\"\");\r\n                    }\r\n                }\r\n            } else if (c.toLowerCase() == \"l\") {\r\n                val = array[p - 1];\r\n                if ((c == \"l\") && (val < 0)) {\r\n                    val += 0x100000000;\r\n                }\r\n                if ((val > 0xffffffff) || (val < 0)) {\r\n                    throw new Error(\"'pack' error.\");\r\n                } else {\r\n                    valStr = String.fromCharCode(Math.floor(val / 0x1000000)) +\r\n                        String.fromCharCode(Math.floor((val % 0x1000000) / 0x10000)) +\r\n                        String.fromCharCode(Math.floor((val % 0x10000) / 0x100)) +\r\n                        String.fromCharCode(val % 0x100);\r\n                    if (littleEndian) {\r\n                        valStr = valStr.split(\"\").reverse().join(\"\");\r\n                    }\r\n                }\r\n            } else {\r\n                throw new Error(\"'pack' error.\");\r\n            }\r\n\r\n            packed += valStr;\r\n            p += 1;\r\n        }\r\n\r\n        return packed;\r\n    }\r\n\r\n    function unpack(mark, str) {\r\n        if (typeof (str) != \"string\") {\r\n            throw new Error(\"'unpack' error. Got invalid type argument.\");\r\n        }\r\n        var l = 0;\r\n        for (var markPointer = 1; markPointer < mark.length; markPointer++) {\r\n            if (mark[markPointer].toLowerCase() == \"b\") {\r\n                l += 1;\r\n            } else if (mark[markPointer].toLowerCase() == \"h\") {\r\n                l += 2;\r\n            } else if (mark[markPointer].toLowerCase() == \"l\") {\r\n                l += 4;\r\n            } else {\r\n                throw new Error(\"'unpack' error. Got invalid mark.\");\r\n            }\r\n        }\r\n\r\n        if (l != str.length) {\r\n            throw new Error(\"'unpack' error. Mismatch between symbol and string length. \" + l + \":\" + str.length);\r\n        }\r\n\r\n        var littleEndian;\r\n        if (mark[0] == \"<\") {\r\n            littleEndian = true;\r\n        } else if (mark[0] == \">\") {\r\n            littleEndian = false;\r\n        } else {\r\n            throw new Error(\"'unpack' error.\");\r\n        }\r\n        var unpacked = [];\r\n        var strPointer = 0;\r\n        var p = 1;\r\n        var val = null;\r\n        var c = null;\r\n        var length = null;\r\n        var sliced = \"\";\r\n\r\n        while (c = mark[p]) {\r\n            if (c.toLowerCase() == \"b\") {\r\n                length = 1;\r\n                sliced = str.slice(strPointer, strPointer + length);\r\n                val = sliced.charCodeAt(0);\r\n                if ((c == \"b\") && (val >= 0x80)) {\r\n                    val -= 0x100;\r\n                }\r\n            } else if (c == \"H\") {\r\n                length = 2;\r\n                sliced = str.slice(strPointer, strPointer + length);\r\n                if (littleEndian) {\r\n                    sliced = sliced.split(\"\").reverse().join(\"\");\r\n                }\r\n                val = sliced.charCodeAt(0) * 0x100 +\r\n                    sliced.charCodeAt(1);\r\n            } else if (c.toLowerCase() == \"l\") {\r\n                length = 4;\r\n                sliced = str.slice(strPointer, strPointer + length);\r\n                if (littleEndian) {\r\n                    sliced = sliced.split(\"\").reverse().join(\"\");\r\n                }\r\n                val = sliced.charCodeAt(0) * 0x1000000 +\r\n                    sliced.charCodeAt(1) * 0x10000 +\r\n                    sliced.charCodeAt(2) * 0x100 +\r\n                    sliced.charCodeAt(3);\r\n                if ((c == \"l\") && (val >= 0x80000000)) {\r\n                    val -= 0x100000000;\r\n                }\r\n            } else {\r\n                throw new Error(\"'unpack' error. \" + c);\r\n            }\r\n\r\n            unpacked.push(val);\r\n            strPointer += length;\r\n            p += 1;\r\n        }\r\n\r\n        return unpacked;\r\n    }\r\n\r\n    function nStr(ch, num) {\r\n        var str = \"\";\r\n        for (var i = 0; i < num; i++) {\r\n            str += ch;\r\n        }\r\n        return str;\r\n    }\r\n\r\n    function splitIntoSegments(data) {\r\n        if (data.slice(0, 2) != \"\\xff\\xd8\") {\r\n            throw new Error(\"Given data isn't JPEG.\");\r\n        }\r\n\r\n        var head = 2;\r\n        var segments = [\"\\xff\\xd8\"];\r\n        while (true) {\r\n            if (data.slice(head, head + 2) == \"\\xff\\xda\") {\r\n                segments.push(data.slice(head));\r\n                break;\r\n            } else {\r\n                var length = unpack(\">H\", data.slice(head + 2, head + 4))[0];\r\n                var endPoint = head + length + 2;\r\n                segments.push(data.slice(head, endPoint));\r\n                head = endPoint;\r\n            }\r\n\r\n            if (head >= data.length) {\r\n                throw new Error(\"Wrong JPEG data.\");\r\n            }\r\n        }\r\n        return segments;\r\n    }\r\n\r\n\r\n    function getExifSeg(segments) {\r\n        var seg;\r\n        for (var i = 0; i < segments.length; i++) {\r\n            seg = segments[i];\r\n            if (seg.slice(0, 2) == \"\\xff\\xe1\" &&\r\n                   seg.slice(4, 10) == \"Exif\\x00\\x00\") {\r\n                return seg;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n\r\n    function mergeSegments(segments, exif) {\r\n        var hasExifSegment = false;\r\n        var additionalAPP1ExifSegments = [];\r\n\r\n        segments.forEach(function(segment, i) {\r\n            // Replace first occurence of APP1:Exif segment\r\n            if (segment.slice(0, 2) == \"\\xff\\xe1\" &&\r\n                segment.slice(4, 10) == \"Exif\\x00\\x00\"\r\n            ) {\r\n                if (!hasExifSegment) {\r\n                    segments[i] = exif;\r\n                    hasExifSegment = true;\r\n                } else {\r\n                    additionalAPP1ExifSegments.unshift(i);\r\n                }\r\n            }\r\n        });\r\n\r\n        // Remove additional occurences of APP1:Exif segment\r\n        additionalAPP1ExifSegments.forEach(function(segmentIndex) {\r\n            segments.splice(segmentIndex, 1);\r\n        });\r\n\r\n        if (!hasExifSegment && exif) {\r\n            segments = [segments[0], exif].concat(segments.slice(1));\r\n        }\r\n\r\n        return segments.join(\"\");\r\n    }\r\n\r\n\r\n    function toHex(str) {\r\n        var hexStr = \"\";\r\n        for (var i = 0; i < str.length; i++) {\r\n            var h = str.charCodeAt(i);\r\n            var hex = ((h < 10) ? \"0\" : \"\") + h.toString(16);\r\n            hexStr += hex + \" \";\r\n        }\r\n        return hexStr;\r\n    }\r\n\r\n\r\n    var TYPES = {\r\n        \"Byte\": 1,\r\n        \"Ascii\": 2,\r\n        \"Short\": 3,\r\n        \"Long\": 4,\r\n        \"Rational\": 5,\r\n        \"Undefined\": 7,\r\n        \"SLong\": 9,\r\n        \"SRational\": 10\r\n    };\r\n\r\n\r\n    var TAGS = {\r\n        'Image': {\r\n            11: {\r\n                'name': 'ProcessingSoftware',\r\n                'type': 'Ascii'\r\n            },\r\n            254: {\r\n                'name': 'NewSubfileType',\r\n                'type': 'Long'\r\n            },\r\n            255: {\r\n                'name': 'SubfileType',\r\n                'type': 'Short'\r\n            },\r\n            256: {\r\n                'name': 'ImageWidth',\r\n                'type': 'Long'\r\n            },\r\n            257: {\r\n                'name': 'ImageLength',\r\n                'type': 'Long'\r\n            },\r\n            258: {\r\n                'name': 'BitsPerSample',\r\n                'type': 'Short'\r\n            },\r\n            259: {\r\n                'name': 'Compression',\r\n                'type': 'Short'\r\n            },\r\n            262: {\r\n                'name': 'PhotometricInterpretation',\r\n                'type': 'Short'\r\n            },\r\n            263: {\r\n                'name': 'Threshholding',\r\n                'type': 'Short'\r\n            },\r\n            264: {\r\n                'name': 'CellWidth',\r\n                'type': 'Short'\r\n            },\r\n            265: {\r\n                'name': 'CellLength',\r\n                'type': 'Short'\r\n            },\r\n            266: {\r\n                'name': 'FillOrder',\r\n                'type': 'Short'\r\n            },\r\n            269: {\r\n                'name': 'DocumentName',\r\n                'type': 'Ascii'\r\n            },\r\n            270: {\r\n                'name': 'ImageDescription',\r\n                'type': 'Ascii'\r\n            },\r\n            271: {\r\n                'name': 'Make',\r\n                'type': 'Ascii'\r\n            },\r\n            272: {\r\n                'name': 'Model',\r\n                'type': 'Ascii'\r\n            },\r\n            273: {\r\n                'name': 'StripOffsets',\r\n                'type': 'Long'\r\n            },\r\n            274: {\r\n                'name': 'Orientation',\r\n                'type': 'Short'\r\n            },\r\n            277: {\r\n                'name': 'SamplesPerPixel',\r\n                'type': 'Short'\r\n            },\r\n            278: {\r\n                'name': 'RowsPerStrip',\r\n                'type': 'Long'\r\n            },\r\n            279: {\r\n                'name': 'StripByteCounts',\r\n                'type': 'Long'\r\n            },\r\n            282: {\r\n                'name': 'XResolution',\r\n                'type': 'Rational'\r\n            },\r\n            283: {\r\n                'name': 'YResolution',\r\n                'type': 'Rational'\r\n            },\r\n            284: {\r\n                'name': 'PlanarConfiguration',\r\n                'type': 'Short'\r\n            },\r\n            290: {\r\n                'name': 'GrayResponseUnit',\r\n                'type': 'Short'\r\n            },\r\n            291: {\r\n                'name': 'GrayResponseCurve',\r\n                'type': 'Short'\r\n            },\r\n            292: {\r\n                'name': 'T4Options',\r\n                'type': 'Long'\r\n            },\r\n            293: {\r\n                'name': 'T6Options',\r\n                'type': 'Long'\r\n            },\r\n            296: {\r\n                'name': 'ResolutionUnit',\r\n                'type': 'Short'\r\n            },\r\n            301: {\r\n                'name': 'TransferFunction',\r\n                'type': 'Short'\r\n            },\r\n            305: {\r\n                'name': 'Software',\r\n                'type': 'Ascii'\r\n            },\r\n            306: {\r\n                'name': 'DateTime',\r\n                'type': 'Ascii'\r\n            },\r\n            315: {\r\n                'name': 'Artist',\r\n                'type': 'Ascii'\r\n            },\r\n            316: {\r\n                'name': 'HostComputer',\r\n                'type': 'Ascii'\r\n            },\r\n            317: {\r\n                'name': 'Predictor',\r\n                'type': 'Short'\r\n            },\r\n            318: {\r\n                'name': 'WhitePoint',\r\n                'type': 'Rational'\r\n            },\r\n            319: {\r\n                'name': 'PrimaryChromaticities',\r\n                'type': 'Rational'\r\n            },\r\n            320: {\r\n                'name': 'ColorMap',\r\n                'type': 'Short'\r\n            },\r\n            321: {\r\n                'name': 'HalftoneHints',\r\n                'type': 'Short'\r\n            },\r\n            322: {\r\n                'name': 'TileWidth',\r\n                'type': 'Short'\r\n            },\r\n            323: {\r\n                'name': 'TileLength',\r\n                'type': 'Short'\r\n            },\r\n            324: {\r\n                'name': 'TileOffsets',\r\n                'type': 'Short'\r\n            },\r\n            325: {\r\n                'name': 'TileByteCounts',\r\n                'type': 'Short'\r\n            },\r\n            330: {\r\n                'name': 'SubIFDs',\r\n                'type': 'Long'\r\n            },\r\n            332: {\r\n                'name': 'InkSet',\r\n                'type': 'Short'\r\n            },\r\n            333: {\r\n                'name': 'InkNames',\r\n                'type': 'Ascii'\r\n            },\r\n            334: {\r\n                'name': 'NumberOfInks',\r\n                'type': 'Short'\r\n            },\r\n            336: {\r\n                'name': 'DotRange',\r\n                'type': 'Byte'\r\n            },\r\n            337: {\r\n                'name': 'TargetPrinter',\r\n                'type': 'Ascii'\r\n            },\r\n            338: {\r\n                'name': 'ExtraSamples',\r\n                'type': 'Short'\r\n            },\r\n            339: {\r\n                'name': 'SampleFormat',\r\n                'type': 'Short'\r\n            },\r\n            340: {\r\n                'name': 'SMinSampleValue',\r\n                'type': 'Short'\r\n            },\r\n            341: {\r\n                'name': 'SMaxSampleValue',\r\n                'type': 'Short'\r\n            },\r\n            342: {\r\n                'name': 'TransferRange',\r\n                'type': 'Short'\r\n            },\r\n            343: {\r\n                'name': 'ClipPath',\r\n                'type': 'Byte'\r\n            },\r\n            344: {\r\n                'name': 'XClipPathUnits',\r\n                'type': 'Long'\r\n            },\r\n            345: {\r\n                'name': 'YClipPathUnits',\r\n                'type': 'Long'\r\n            },\r\n            346: {\r\n                'name': 'Indexed',\r\n                'type': 'Short'\r\n            },\r\n            347: {\r\n                'name': 'JPEGTables',\r\n                'type': 'Undefined'\r\n            },\r\n            351: {\r\n                'name': 'OPIProxy',\r\n                'type': 'Short'\r\n            },\r\n            512: {\r\n                'name': 'JPEGProc',\r\n                'type': 'Long'\r\n            },\r\n            513: {\r\n                'name': 'JPEGInterchangeFormat',\r\n                'type': 'Long'\r\n            },\r\n            514: {\r\n                'name': 'JPEGInterchangeFormatLength',\r\n                'type': 'Long'\r\n            },\r\n            515: {\r\n                'name': 'JPEGRestartInterval',\r\n                'type': 'Short'\r\n            },\r\n            517: {\r\n                'name': 'JPEGLosslessPredictors',\r\n                'type': 'Short'\r\n            },\r\n            518: {\r\n                'name': 'JPEGPointTransforms',\r\n                'type': 'Short'\r\n            },\r\n            519: {\r\n                'name': 'JPEGQTables',\r\n                'type': 'Long'\r\n            },\r\n            520: {\r\n                'name': 'JPEGDCTables',\r\n                'type': 'Long'\r\n            },\r\n            521: {\r\n                'name': 'JPEGACTables',\r\n                'type': 'Long'\r\n            },\r\n            529: {\r\n                'name': 'YCbCrCoefficients',\r\n                'type': 'Rational'\r\n            },\r\n            530: {\r\n                'name': 'YCbCrSubSampling',\r\n                'type': 'Short'\r\n            },\r\n            531: {\r\n                'name': 'YCbCrPositioning',\r\n                'type': 'Short'\r\n            },\r\n            532: {\r\n                'name': 'ReferenceBlackWhite',\r\n                'type': 'Rational'\r\n            },\r\n            700: {\r\n                'name': 'XMLPacket',\r\n                'type': 'Byte'\r\n            },\r\n            18246: {\r\n                'name': 'Rating',\r\n                'type': 'Short'\r\n            },\r\n            18249: {\r\n                'name': 'RatingPercent',\r\n                'type': 'Short'\r\n            },\r\n            32781: {\r\n                'name': 'ImageID',\r\n                'type': 'Ascii'\r\n            },\r\n            33421: {\r\n                'name': 'CFARepeatPatternDim',\r\n                'type': 'Short'\r\n            },\r\n            33422: {\r\n                'name': 'CFAPattern',\r\n                'type': 'Byte'\r\n            },\r\n            33423: {\r\n                'name': 'BatteryLevel',\r\n                'type': 'Rational'\r\n            },\r\n            33432: {\r\n                'name': 'Copyright',\r\n                'type': 'Ascii'\r\n            },\r\n            33434: {\r\n                'name': 'ExposureTime',\r\n                'type': 'Rational'\r\n            },\r\n            34377: {\r\n                'name': 'ImageResources',\r\n                'type': 'Byte'\r\n            },\r\n            34665: {\r\n                'name': 'ExifTag',\r\n                'type': 'Long'\r\n            },\r\n            34675: {\r\n                'name': 'InterColorProfile',\r\n                'type': 'Undefined'\r\n            },\r\n            34853: {\r\n                'name': 'GPSTag',\r\n                'type': 'Long'\r\n            },\r\n            34857: {\r\n                'name': 'Interlace',\r\n                'type': 'Short'\r\n            },\r\n            34858: {\r\n                'name': 'TimeZoneOffset',\r\n                'type': 'Long'\r\n            },\r\n            34859: {\r\n                'name': 'SelfTimerMode',\r\n                'type': 'Short'\r\n            },\r\n            37387: {\r\n                'name': 'FlashEnergy',\r\n                'type': 'Rational'\r\n            },\r\n            37388: {\r\n                'name': 'SpatialFrequencyResponse',\r\n                'type': 'Undefined'\r\n            },\r\n            37389: {\r\n                'name': 'Noise',\r\n                'type': 'Undefined'\r\n            },\r\n            37390: {\r\n                'name': 'FocalPlaneXResolution',\r\n                'type': 'Rational'\r\n            },\r\n            37391: {\r\n                'name': 'FocalPlaneYResolution',\r\n                'type': 'Rational'\r\n            },\r\n            37392: {\r\n                'name': 'FocalPlaneResolutionUnit',\r\n                'type': 'Short'\r\n            },\r\n            37393: {\r\n                'name': 'ImageNumber',\r\n                'type': 'Long'\r\n            },\r\n            37394: {\r\n                'name': 'SecurityClassification',\r\n                'type': 'Ascii'\r\n            },\r\n            37395: {\r\n                'name': 'ImageHistory',\r\n                'type': 'Ascii'\r\n            },\r\n            37397: {\r\n                'name': 'ExposureIndex',\r\n                'type': 'Rational'\r\n            },\r\n            37398: {\r\n                'name': 'TIFFEPStandardID',\r\n                'type': 'Byte'\r\n            },\r\n            37399: {\r\n                'name': 'SensingMethod',\r\n                'type': 'Short'\r\n            },\r\n            40091: {\r\n                'name': 'XPTitle',\r\n                'type': 'Byte'\r\n            },\r\n            40092: {\r\n                'name': 'XPComment',\r\n                'type': 'Byte'\r\n            },\r\n            40093: {\r\n                'name': 'XPAuthor',\r\n                'type': 'Byte'\r\n            },\r\n            40094: {\r\n                'name': 'XPKeywords',\r\n                'type': 'Byte'\r\n            },\r\n            40095: {\r\n                'name': 'XPSubject',\r\n                'type': 'Byte'\r\n            },\r\n            50341: {\r\n                'name': 'PrintImageMatching',\r\n                'type': 'Undefined'\r\n            },\r\n            50706: {\r\n                'name': 'DNGVersion',\r\n                'type': 'Byte'\r\n            },\r\n            50707: {\r\n                'name': 'DNGBackwardVersion',\r\n                'type': 'Byte'\r\n            },\r\n            50708: {\r\n                'name': 'UniqueCameraModel',\r\n                'type': 'Ascii'\r\n            },\r\n            50709: {\r\n                'name': 'LocalizedCameraModel',\r\n                'type': 'Byte'\r\n            },\r\n            50710: {\r\n                'name': 'CFAPlaneColor',\r\n                'type': 'Byte'\r\n            },\r\n            50711: {\r\n                'name': 'CFALayout',\r\n                'type': 'Short'\r\n            },\r\n            50712: {\r\n                'name': 'LinearizationTable',\r\n                'type': 'Short'\r\n            },\r\n            50713: {\r\n                'name': 'BlackLevelRepeatDim',\r\n                'type': 'Short'\r\n            },\r\n            50714: {\r\n                'name': 'BlackLevel',\r\n                'type': 'Rational'\r\n            },\r\n            50715: {\r\n                'name': 'BlackLevelDeltaH',\r\n                'type': 'SRational'\r\n            },\r\n            50716: {\r\n                'name': 'BlackLevelDeltaV',\r\n                'type': 'SRational'\r\n            },\r\n            50717: {\r\n                'name': 'WhiteLevel',\r\n                'type': 'Short'\r\n            },\r\n            50718: {\r\n                'name': 'DefaultScale',\r\n                'type': 'Rational'\r\n            },\r\n            50719: {\r\n                'name': 'DefaultCropOrigin',\r\n                'type': 'Short'\r\n            },\r\n            50720: {\r\n                'name': 'DefaultCropSize',\r\n                'type': 'Short'\r\n            },\r\n            50721: {\r\n                'name': 'ColorMatrix1',\r\n                'type': 'SRational'\r\n            },\r\n            50722: {\r\n                'name': 'ColorMatrix2',\r\n                'type': 'SRational'\r\n            },\r\n            50723: {\r\n                'name': 'CameraCalibration1',\r\n                'type': 'SRational'\r\n            },\r\n            50724: {\r\n                'name': 'CameraCalibration2',\r\n                'type': 'SRational'\r\n            },\r\n            50725: {\r\n                'name': 'ReductionMatrix1',\r\n                'type': 'SRational'\r\n            },\r\n            50726: {\r\n                'name': 'ReductionMatrix2',\r\n                'type': 'SRational'\r\n            },\r\n            50727: {\r\n                'name': 'AnalogBalance',\r\n                'type': 'Rational'\r\n            },\r\n            50728: {\r\n                'name': 'AsShotNeutral',\r\n                'type': 'Short'\r\n            },\r\n            50729: {\r\n                'name': 'AsShotWhiteXY',\r\n                'type': 'Rational'\r\n            },\r\n            50730: {\r\n                'name': 'BaselineExposure',\r\n                'type': 'SRational'\r\n            },\r\n            50731: {\r\n                'name': 'BaselineNoise',\r\n                'type': 'Rational'\r\n            },\r\n            50732: {\r\n                'name': 'BaselineSharpness',\r\n                'type': 'Rational'\r\n            },\r\n            50733: {\r\n                'name': 'BayerGreenSplit',\r\n                'type': 'Long'\r\n            },\r\n            50734: {\r\n                'name': 'LinearResponseLimit',\r\n                'type': 'Rational'\r\n            },\r\n            50735: {\r\n                'name': 'CameraSerialNumber',\r\n                'type': 'Ascii'\r\n            },\r\n            50736: {\r\n                'name': 'LensInfo',\r\n                'type': 'Rational'\r\n            },\r\n            50737: {\r\n                'name': 'ChromaBlurRadius',\r\n                'type': 'Rational'\r\n            },\r\n            50738: {\r\n                'name': 'AntiAliasStrength',\r\n                'type': 'Rational'\r\n            },\r\n            50739: {\r\n                'name': 'ShadowScale',\r\n                'type': 'SRational'\r\n            },\r\n            50740: {\r\n                'name': 'DNGPrivateData',\r\n                'type': 'Byte'\r\n            },\r\n            50741: {\r\n                'name': 'MakerNoteSafety',\r\n                'type': 'Short'\r\n            },\r\n            50778: {\r\n                'name': 'CalibrationIlluminant1',\r\n                'type': 'Short'\r\n            },\r\n            50779: {\r\n                'name': 'CalibrationIlluminant2',\r\n                'type': 'Short'\r\n            },\r\n            50780: {\r\n                'name': 'BestQualityScale',\r\n                'type': 'Rational'\r\n            },\r\n            50781: {\r\n                'name': 'RawDataUniqueID',\r\n                'type': 'Byte'\r\n            },\r\n            50827: {\r\n                'name': 'OriginalRawFileName',\r\n                'type': 'Byte'\r\n            },\r\n            50828: {\r\n                'name': 'OriginalRawFileData',\r\n                'type': 'Undefined'\r\n            },\r\n            50829: {\r\n                'name': 'ActiveArea',\r\n                'type': 'Short'\r\n            },\r\n            50830: {\r\n                'name': 'MaskedAreas',\r\n                'type': 'Short'\r\n            },\r\n            50831: {\r\n                'name': 'AsShotICCProfile',\r\n                'type': 'Undefined'\r\n            },\r\n            50832: {\r\n                'name': 'AsShotPreProfileMatrix',\r\n                'type': 'SRational'\r\n            },\r\n            50833: {\r\n                'name': 'CurrentICCProfile',\r\n                'type': 'Undefined'\r\n            },\r\n            50834: {\r\n                'name': 'CurrentPreProfileMatrix',\r\n                'type': 'SRational'\r\n            },\r\n            50879: {\r\n                'name': 'ColorimetricReference',\r\n                'type': 'Short'\r\n            },\r\n            50931: {\r\n                'name': 'CameraCalibrationSignature',\r\n                'type': 'Byte'\r\n            },\r\n            50932: {\r\n                'name': 'ProfileCalibrationSignature',\r\n                'type': 'Byte'\r\n            },\r\n            50934: {\r\n                'name': 'AsShotProfileName',\r\n                'type': 'Byte'\r\n            },\r\n            50935: {\r\n                'name': 'NoiseReductionApplied',\r\n                'type': 'Rational'\r\n            },\r\n            50936: {\r\n                'name': 'ProfileName',\r\n                'type': 'Byte'\r\n            },\r\n            50937: {\r\n                'name': 'ProfileHueSatMapDims',\r\n                'type': 'Long'\r\n            },\r\n            50938: {\r\n                'name': 'ProfileHueSatMapData1',\r\n                'type': 'Float'\r\n            },\r\n            50939: {\r\n                'name': 'ProfileHueSatMapData2',\r\n                'type': 'Float'\r\n            },\r\n            50940: {\r\n                'name': 'ProfileToneCurve',\r\n                'type': 'Float'\r\n            },\r\n            50941: {\r\n                'name': 'ProfileEmbedPolicy',\r\n                'type': 'Long'\r\n            },\r\n            50942: {\r\n                'name': 'ProfileCopyright',\r\n                'type': 'Byte'\r\n            },\r\n            50964: {\r\n                'name': 'ForwardMatrix1',\r\n                'type': 'SRational'\r\n            },\r\n            50965: {\r\n                'name': 'ForwardMatrix2',\r\n                'type': 'SRational'\r\n            },\r\n            50966: {\r\n                'name': 'PreviewApplicationName',\r\n                'type': 'Byte'\r\n            },\r\n            50967: {\r\n                'name': 'PreviewApplicationVersion',\r\n                'type': 'Byte'\r\n            },\r\n            50968: {\r\n                'name': 'PreviewSettingsName',\r\n                'type': 'Byte'\r\n            },\r\n            50969: {\r\n                'name': 'PreviewSettingsDigest',\r\n                'type': 'Byte'\r\n            },\r\n            50970: {\r\n                'name': 'PreviewColorSpace',\r\n                'type': 'Long'\r\n            },\r\n            50971: {\r\n                'name': 'PreviewDateTime',\r\n                'type': 'Ascii'\r\n            },\r\n            50972: {\r\n                'name': 'RawImageDigest',\r\n                'type': 'Undefined'\r\n            },\r\n            50973: {\r\n                'name': 'OriginalRawFileDigest',\r\n                'type': 'Undefined'\r\n            },\r\n            50974: {\r\n                'name': 'SubTileBlockSize',\r\n                'type': 'Long'\r\n            },\r\n            50975: {\r\n                'name': 'RowInterleaveFactor',\r\n                'type': 'Long'\r\n            },\r\n            50981: {\r\n                'name': 'ProfileLookTableDims',\r\n                'type': 'Long'\r\n            },\r\n            50982: {\r\n                'name': 'ProfileLookTableData',\r\n                'type': 'Float'\r\n            },\r\n            51008: {\r\n                'name': 'OpcodeList1',\r\n                'type': 'Undefined'\r\n            },\r\n            51009: {\r\n                'name': 'OpcodeList2',\r\n                'type': 'Undefined'\r\n            },\r\n            51022: {\r\n                'name': 'OpcodeList3',\r\n                'type': 'Undefined'\r\n            }\r\n        },\r\n        'Exif': {\r\n            33434: {\r\n                'name': 'ExposureTime',\r\n                'type': 'Rational'\r\n            },\r\n            33437: {\r\n                'name': 'FNumber',\r\n                'type': 'Rational'\r\n            },\r\n            34850: {\r\n                'name': 'ExposureProgram',\r\n                'type': 'Short'\r\n            },\r\n            34852: {\r\n                'name': 'SpectralSensitivity',\r\n                'type': 'Ascii'\r\n            },\r\n            34855: {\r\n                'name': 'ISOSpeedRatings',\r\n                'type': 'Short'\r\n            },\r\n            34856: {\r\n                'name': 'OECF',\r\n                'type': 'Undefined'\r\n            },\r\n            34864: {\r\n                'name': 'SensitivityType',\r\n                'type': 'Short'\r\n            },\r\n            34865: {\r\n                'name': 'StandardOutputSensitivity',\r\n                'type': 'Long'\r\n            },\r\n            34866: {\r\n                'name': 'RecommendedExposureIndex',\r\n                'type': 'Long'\r\n            },\r\n            34867: {\r\n                'name': 'ISOSpeed',\r\n                'type': 'Long'\r\n            },\r\n            34868: {\r\n                'name': 'ISOSpeedLatitudeyyy',\r\n                'type': 'Long'\r\n            },\r\n            34869: {\r\n                'name': 'ISOSpeedLatitudezzz',\r\n                'type': 'Long'\r\n            },\r\n            36864: {\r\n                'name': 'ExifVersion',\r\n                'type': 'Undefined'\r\n            },\r\n            36867: {\r\n                'name': 'DateTimeOriginal',\r\n                'type': 'Ascii'\r\n            },\r\n            36868: {\r\n                'name': 'DateTimeDigitized',\r\n                'type': 'Ascii'\r\n            },\r\n            37121: {\r\n                'name': 'ComponentsConfiguration',\r\n                'type': 'Undefined'\r\n            },\r\n            37122: {\r\n                'name': 'CompressedBitsPerPixel',\r\n                'type': 'Rational'\r\n            },\r\n            37377: {\r\n                'name': 'ShutterSpeedValue',\r\n                'type': 'SRational'\r\n            },\r\n            37378: {\r\n                'name': 'ApertureValue',\r\n                'type': 'Rational'\r\n            },\r\n            37379: {\r\n                'name': 'BrightnessValue',\r\n                'type': 'SRational'\r\n            },\r\n            37380: {\r\n                'name': 'ExposureBiasValue',\r\n                'type': 'SRational'\r\n            },\r\n            37381: {\r\n                'name': 'MaxApertureValue',\r\n                'type': 'Rational'\r\n            },\r\n            37382: {\r\n                'name': 'SubjectDistance',\r\n                'type': 'Rational'\r\n            },\r\n            37383: {\r\n                'name': 'MeteringMode',\r\n                'type': 'Short'\r\n            },\r\n            37384: {\r\n                'name': 'LightSource',\r\n                'type': 'Short'\r\n            },\r\n            37385: {\r\n                'name': 'Flash',\r\n                'type': 'Short'\r\n            },\r\n            37386: {\r\n                'name': 'FocalLength',\r\n                'type': 'Rational'\r\n            },\r\n            37396: {\r\n                'name': 'SubjectArea',\r\n                'type': 'Short'\r\n            },\r\n            37500: {\r\n                'name': 'MakerNote',\r\n                'type': 'Undefined'\r\n            },\r\n            37510: {\r\n                'name': 'UserComment',\r\n                'type': 'Ascii'\r\n            },\r\n            37520: {\r\n                'name': 'SubSecTime',\r\n                'type': 'Ascii'\r\n            },\r\n            37521: {\r\n                'name': 'SubSecTimeOriginal',\r\n                'type': 'Ascii'\r\n            },\r\n            37522: {\r\n                'name': 'SubSecTimeDigitized',\r\n                'type': 'Ascii'\r\n            },\r\n            40960: {\r\n                'name': 'FlashpixVersion',\r\n                'type': 'Undefined'\r\n            },\r\n            40961: {\r\n                'name': 'ColorSpace',\r\n                'type': 'Short'\r\n            },\r\n            40962: {\r\n                'name': 'PixelXDimension',\r\n                'type': 'Long'\r\n            },\r\n            40963: {\r\n                'name': 'PixelYDimension',\r\n                'type': 'Long'\r\n            },\r\n            40964: {\r\n                'name': 'RelatedSoundFile',\r\n                'type': 'Ascii'\r\n            },\r\n            40965: {\r\n                'name': 'InteroperabilityTag',\r\n                'type': 'Long'\r\n            },\r\n            41483: {\r\n                'name': 'FlashEnergy',\r\n                'type': 'Rational'\r\n            },\r\n            41484: {\r\n                'name': 'SpatialFrequencyResponse',\r\n                'type': 'Undefined'\r\n            },\r\n            41486: {\r\n                'name': 'FocalPlaneXResolution',\r\n                'type': 'Rational'\r\n            },\r\n            41487: {\r\n                'name': 'FocalPlaneYResolution',\r\n                'type': 'Rational'\r\n            },\r\n            41488: {\r\n                'name': 'FocalPlaneResolutionUnit',\r\n                'type': 'Short'\r\n            },\r\n            41492: {\r\n                'name': 'SubjectLocation',\r\n                'type': 'Short'\r\n            },\r\n            41493: {\r\n                'name': 'ExposureIndex',\r\n                'type': 'Rational'\r\n            },\r\n            41495: {\r\n                'name': 'SensingMethod',\r\n                'type': 'Short'\r\n            },\r\n            41728: {\r\n                'name': 'FileSource',\r\n                'type': 'Undefined'\r\n            },\r\n            41729: {\r\n                'name': 'SceneType',\r\n                'type': 'Undefined'\r\n            },\r\n            41730: {\r\n                'name': 'CFAPattern',\r\n                'type': 'Undefined'\r\n            },\r\n            41985: {\r\n                'name': 'CustomRendered',\r\n                'type': 'Short'\r\n            },\r\n            41986: {\r\n                'name': 'ExposureMode',\r\n                'type': 'Short'\r\n            },\r\n            41987: {\r\n                'name': 'WhiteBalance',\r\n                'type': 'Short'\r\n            },\r\n            41988: {\r\n                'name': 'DigitalZoomRatio',\r\n                'type': 'Rational'\r\n            },\r\n            41989: {\r\n                'name': 'FocalLengthIn35mmFilm',\r\n                'type': 'Short'\r\n            },\r\n            41990: {\r\n                'name': 'SceneCaptureType',\r\n                'type': 'Short'\r\n            },\r\n            41991: {\r\n                'name': 'GainControl',\r\n                'type': 'Short'\r\n            },\r\n            41992: {\r\n                'name': 'Contrast',\r\n                'type': 'Short'\r\n            },\r\n            41993: {\r\n                'name': 'Saturation',\r\n                'type': 'Short'\r\n            },\r\n            41994: {\r\n                'name': 'Sharpness',\r\n                'type': 'Short'\r\n            },\r\n            41995: {\r\n                'name': 'DeviceSettingDescription',\r\n                'type': 'Undefined'\r\n            },\r\n            41996: {\r\n                'name': 'SubjectDistanceRange',\r\n                'type': 'Short'\r\n            },\r\n            42016: {\r\n                'name': 'ImageUniqueID',\r\n                'type': 'Ascii'\r\n            },\r\n            42032: {\r\n                'name': 'CameraOwnerName',\r\n                'type': 'Ascii'\r\n            },\r\n            42033: {\r\n                'name': 'BodySerialNumber',\r\n                'type': 'Ascii'\r\n            },\r\n            42034: {\r\n                'name': 'LensSpecification',\r\n                'type': 'Rational'\r\n            },\r\n            42035: {\r\n                'name': 'LensMake',\r\n                'type': 'Ascii'\r\n            },\r\n            42036: {\r\n                'name': 'LensModel',\r\n                'type': 'Ascii'\r\n            },\r\n            42037: {\r\n                'name': 'LensSerialNumber',\r\n                'type': 'Ascii'\r\n            },\r\n            42240: {\r\n                'name': 'Gamma',\r\n                'type': 'Rational'\r\n            }\r\n        },\r\n        'GPS': {\r\n            0: {\r\n                'name': 'GPSVersionID',\r\n                'type': 'Byte'\r\n            },\r\n            1: {\r\n                'name': 'GPSLatitudeRef',\r\n                'type': 'Ascii'\r\n            },\r\n            2: {\r\n                'name': 'GPSLatitude',\r\n                'type': 'Rational'\r\n            },\r\n            3: {\r\n                'name': 'GPSLongitudeRef',\r\n                'type': 'Ascii'\r\n            },\r\n            4: {\r\n                'name': 'GPSLongitude',\r\n                'type': 'Rational'\r\n            },\r\n            5: {\r\n                'name': 'GPSAltitudeRef',\r\n                'type': 'Byte'\r\n            },\r\n            6: {\r\n                'name': 'GPSAltitude',\r\n                'type': 'Rational'\r\n            },\r\n            7: {\r\n                'name': 'GPSTimeStamp',\r\n                'type': 'Rational'\r\n            },\r\n            8: {\r\n                'name': 'GPSSatellites',\r\n                'type': 'Ascii'\r\n            },\r\n            9: {\r\n                'name': 'GPSStatus',\r\n                'type': 'Ascii'\r\n            },\r\n            10: {\r\n                'name': 'GPSMeasureMode',\r\n                'type': 'Ascii'\r\n            },\r\n            11: {\r\n                'name': 'GPSDOP',\r\n                'type': 'Rational'\r\n            },\r\n            12: {\r\n                'name': 'GPSSpeedRef',\r\n                'type': 'Ascii'\r\n            },\r\n            13: {\r\n                'name': 'GPSSpeed',\r\n                'type': 'Rational'\r\n            },\r\n            14: {\r\n                'name': 'GPSTrackRef',\r\n                'type': 'Ascii'\r\n            },\r\n            15: {\r\n                'name': 'GPSTrack',\r\n                'type': 'Rational'\r\n            },\r\n            16: {\r\n                'name': 'GPSImgDirectionRef',\r\n                'type': 'Ascii'\r\n            },\r\n            17: {\r\n                'name': 'GPSImgDirection',\r\n                'type': 'Rational'\r\n            },\r\n            18: {\r\n                'name': 'GPSMapDatum',\r\n                'type': 'Ascii'\r\n            },\r\n            19: {\r\n                'name': 'GPSDestLatitudeRef',\r\n                'type': 'Ascii'\r\n            },\r\n            20: {\r\n                'name': 'GPSDestLatitude',\r\n                'type': 'Rational'\r\n            },\r\n            21: {\r\n                'name': 'GPSDestLongitudeRef',\r\n                'type': 'Ascii'\r\n            },\r\n            22: {\r\n                'name': 'GPSDestLongitude',\r\n                'type': 'Rational'\r\n            },\r\n            23: {\r\n                'name': 'GPSDestBearingRef',\r\n                'type': 'Ascii'\r\n            },\r\n            24: {\r\n                'name': 'GPSDestBearing',\r\n                'type': 'Rational'\r\n            },\r\n            25: {\r\n                'name': 'GPSDestDistanceRef',\r\n                'type': 'Ascii'\r\n            },\r\n            26: {\r\n                'name': 'GPSDestDistance',\r\n                'type': 'Rational'\r\n            },\r\n            27: {\r\n                'name': 'GPSProcessingMethod',\r\n                'type': 'Undefined'\r\n            },\r\n            28: {\r\n                'name': 'GPSAreaInformation',\r\n                'type': 'Undefined'\r\n            },\r\n            29: {\r\n                'name': 'GPSDateStamp',\r\n                'type': 'Ascii'\r\n            },\r\n            30: {\r\n                'name': 'GPSDifferential',\r\n                'type': 'Short'\r\n            },\r\n            31: {\r\n                'name': 'GPSHPositioningError',\r\n                'type': 'Rational'\r\n            }\r\n        },\r\n        'Interop': {\r\n            1: {\r\n                'name': 'InteroperabilityIndex',\r\n                'type': 'Ascii'\r\n            }\r\n        },\r\n    };\r\n    TAGS[\"0th\"] = TAGS[\"Image\"];\r\n    TAGS[\"1st\"] = TAGS[\"Image\"];\r\n    that.TAGS = TAGS;\r\n\r\n    \r\n    that.ImageIFD = {\r\n        ProcessingSoftware:11,\r\n        NewSubfileType:254,\r\n        SubfileType:255,\r\n        ImageWidth:256,\r\n        ImageLength:257,\r\n        BitsPerSample:258,\r\n        Compression:259,\r\n        PhotometricInterpretation:262,\r\n        Threshholding:263,\r\n        CellWidth:264,\r\n        CellLength:265,\r\n        FillOrder:266,\r\n        DocumentName:269,\r\n        ImageDescription:270,\r\n        Make:271,\r\n        Model:272,\r\n        StripOffsets:273,\r\n        Orientation:274,\r\n        SamplesPerPixel:277,\r\n        RowsPerStrip:278,\r\n        StripByteCounts:279,\r\n        XResolution:282,\r\n        YResolution:283,\r\n        PlanarConfiguration:284,\r\n        GrayResponseUnit:290,\r\n        GrayResponseCurve:291,\r\n        T4Options:292,\r\n        T6Options:293,\r\n        ResolutionUnit:296,\r\n        TransferFunction:301,\r\n        Software:305,\r\n        DateTime:306,\r\n        Artist:315,\r\n        HostComputer:316,\r\n        Predictor:317,\r\n        WhitePoint:318,\r\n        PrimaryChromaticities:319,\r\n        ColorMap:320,\r\n        HalftoneHints:321,\r\n        TileWidth:322,\r\n        TileLength:323,\r\n        TileOffsets:324,\r\n        TileByteCounts:325,\r\n        SubIFDs:330,\r\n        InkSet:332,\r\n        InkNames:333,\r\n        NumberOfInks:334,\r\n        DotRange:336,\r\n        TargetPrinter:337,\r\n        ExtraSamples:338,\r\n        SampleFormat:339,\r\n        SMinSampleValue:340,\r\n        SMaxSampleValue:341,\r\n        TransferRange:342,\r\n        ClipPath:343,\r\n        XClipPathUnits:344,\r\n        YClipPathUnits:345,\r\n        Indexed:346,\r\n        JPEGTables:347,\r\n        OPIProxy:351,\r\n        JPEGProc:512,\r\n        JPEGInterchangeFormat:513,\r\n        JPEGInterchangeFormatLength:514,\r\n        JPEGRestartInterval:515,\r\n        JPEGLosslessPredictors:517,\r\n        JPEGPointTransforms:518,\r\n        JPEGQTables:519,\r\n        JPEGDCTables:520,\r\n        JPEGACTables:521,\r\n        YCbCrCoefficients:529,\r\n        YCbCrSubSampling:530,\r\n        YCbCrPositioning:531,\r\n        ReferenceBlackWhite:532,\r\n        XMLPacket:700,\r\n        Rating:18246,\r\n        RatingPercent:18249,\r\n        ImageID:32781,\r\n        CFARepeatPatternDim:33421,\r\n        CFAPattern:33422,\r\n        BatteryLevel:33423,\r\n        Copyright:33432,\r\n        ExposureTime:33434,\r\n        ImageResources:34377,\r\n        ExifTag:34665,\r\n        InterColorProfile:34675,\r\n        GPSTag:34853,\r\n        Interlace:34857,\r\n        TimeZoneOffset:34858,\r\n        SelfTimerMode:34859,\r\n        FlashEnergy:37387,\r\n        SpatialFrequencyResponse:37388,\r\n        Noise:37389,\r\n        FocalPlaneXResolution:37390,\r\n        FocalPlaneYResolution:37391,\r\n        FocalPlaneResolutionUnit:37392,\r\n        ImageNumber:37393,\r\n        SecurityClassification:37394,\r\n        ImageHistory:37395,\r\n        ExposureIndex:37397,\r\n        TIFFEPStandardID:37398,\r\n        SensingMethod:37399,\r\n        XPTitle:40091,\r\n        XPComment:40092,\r\n        XPAuthor:40093,\r\n        XPKeywords:40094,\r\n        XPSubject:40095,\r\n        PrintImageMatching:50341,\r\n        DNGVersion:50706,\r\n        DNGBackwardVersion:50707,\r\n        UniqueCameraModel:50708,\r\n        LocalizedCameraModel:50709,\r\n        CFAPlaneColor:50710,\r\n        CFALayout:50711,\r\n        LinearizationTable:50712,\r\n        BlackLevelRepeatDim:50713,\r\n        BlackLevel:50714,\r\n        BlackLevelDeltaH:50715,\r\n        BlackLevelDeltaV:50716,\r\n        WhiteLevel:50717,\r\n        DefaultScale:50718,\r\n        DefaultCropOrigin:50719,\r\n        DefaultCropSize:50720,\r\n        ColorMatrix1:50721,\r\n        ColorMatrix2:50722,\r\n        CameraCalibration1:50723,\r\n        CameraCalibration2:50724,\r\n        ReductionMatrix1:50725,\r\n        ReductionMatrix2:50726,\r\n        AnalogBalance:50727,\r\n        AsShotNeutral:50728,\r\n        AsShotWhiteXY:50729,\r\n        BaselineExposure:50730,\r\n        BaselineNoise:50731,\r\n        BaselineSharpness:50732,\r\n        BayerGreenSplit:50733,\r\n        LinearResponseLimit:50734,\r\n        CameraSerialNumber:50735,\r\n        LensInfo:50736,\r\n        ChromaBlurRadius:50737,\r\n        AntiAliasStrength:50738,\r\n        ShadowScale:50739,\r\n        DNGPrivateData:50740,\r\n        MakerNoteSafety:50741,\r\n        CalibrationIlluminant1:50778,\r\n        CalibrationIlluminant2:50779,\r\n        BestQualityScale:50780,\r\n        RawDataUniqueID:50781,\r\n        OriginalRawFileName:50827,\r\n        OriginalRawFileData:50828,\r\n        ActiveArea:50829,\r\n        MaskedAreas:50830,\r\n        AsShotICCProfile:50831,\r\n        AsShotPreProfileMatrix:50832,\r\n        CurrentICCProfile:50833,\r\n        CurrentPreProfileMatrix:50834,\r\n        ColorimetricReference:50879,\r\n        CameraCalibrationSignature:50931,\r\n        ProfileCalibrationSignature:50932,\r\n        AsShotProfileName:50934,\r\n        NoiseReductionApplied:50935,\r\n        ProfileName:50936,\r\n        ProfileHueSatMapDims:50937,\r\n        ProfileHueSatMapData1:50938,\r\n        ProfileHueSatMapData2:50939,\r\n        ProfileToneCurve:50940,\r\n        ProfileEmbedPolicy:50941,\r\n        ProfileCopyright:50942,\r\n        ForwardMatrix1:50964,\r\n        ForwardMatrix2:50965,\r\n        PreviewApplicationName:50966,\r\n        PreviewApplicationVersion:50967,\r\n        PreviewSettingsName:50968,\r\n        PreviewSettingsDigest:50969,\r\n        PreviewColorSpace:50970,\r\n        PreviewDateTime:50971,\r\n        RawImageDigest:50972,\r\n        OriginalRawFileDigest:50973,\r\n        SubTileBlockSize:50974,\r\n        RowInterleaveFactor:50975,\r\n        ProfileLookTableDims:50981,\r\n        ProfileLookTableData:50982,\r\n        OpcodeList1:51008,\r\n        OpcodeList2:51009,\r\n        OpcodeList3:51022,\r\n        NoiseProfile:51041,\r\n    };\r\n\r\n    \r\n    that.ExifIFD = {\r\n        ExposureTime:33434,\r\n        FNumber:33437,\r\n        ExposureProgram:34850,\r\n        SpectralSensitivity:34852,\r\n        ISOSpeedRatings:34855,\r\n        OECF:34856,\r\n        SensitivityType:34864,\r\n        StandardOutputSensitivity:34865,\r\n        RecommendedExposureIndex:34866,\r\n        ISOSpeed:34867,\r\n        ISOSpeedLatitudeyyy:34868,\r\n        ISOSpeedLatitudezzz:34869,\r\n        ExifVersion:36864,\r\n        DateTimeOriginal:36867,\r\n        DateTimeDigitized:36868,\r\n        ComponentsConfiguration:37121,\r\n        CompressedBitsPerPixel:37122,\r\n        ShutterSpeedValue:37377,\r\n        ApertureValue:37378,\r\n        BrightnessValue:37379,\r\n        ExposureBiasValue:37380,\r\n        MaxApertureValue:37381,\r\n        SubjectDistance:37382,\r\n        MeteringMode:37383,\r\n        LightSource:37384,\r\n        Flash:37385,\r\n        FocalLength:37386,\r\n        SubjectArea:37396,\r\n        MakerNote:37500,\r\n        UserComment:37510,\r\n        SubSecTime:37520,\r\n        SubSecTimeOriginal:37521,\r\n        SubSecTimeDigitized:37522,\r\n        FlashpixVersion:40960,\r\n        ColorSpace:40961,\r\n        PixelXDimension:40962,\r\n        PixelYDimension:40963,\r\n        RelatedSoundFile:40964,\r\n        InteroperabilityTag:40965,\r\n        FlashEnergy:41483,\r\n        SpatialFrequencyResponse:41484,\r\n        FocalPlaneXResolution:41486,\r\n        FocalPlaneYResolution:41487,\r\n        FocalPlaneResolutionUnit:41488,\r\n        SubjectLocation:41492,\r\n        ExposureIndex:41493,\r\n        SensingMethod:41495,\r\n        FileSource:41728,\r\n        SceneType:41729,\r\n        CFAPattern:41730,\r\n        CustomRendered:41985,\r\n        ExposureMode:41986,\r\n        WhiteBalance:41987,\r\n        DigitalZoomRatio:41988,\r\n        FocalLengthIn35mmFilm:41989,\r\n        SceneCaptureType:41990,\r\n        GainControl:41991,\r\n        Contrast:41992,\r\n        Saturation:41993,\r\n        Sharpness:41994,\r\n        DeviceSettingDescription:41995,\r\n        SubjectDistanceRange:41996,\r\n        ImageUniqueID:42016,\r\n        CameraOwnerName:42032,\r\n        BodySerialNumber:42033,\r\n        LensSpecification:42034,\r\n        LensMake:42035,\r\n        LensModel:42036,\r\n        LensSerialNumber:42037,\r\n        Gamma:42240,\r\n    };\r\n\r\n\r\n    that.GPSIFD = {\r\n        GPSVersionID:0,\r\n        GPSLatitudeRef:1,\r\n        GPSLatitude:2,\r\n        GPSLongitudeRef:3,\r\n        GPSLongitude:4,\r\n        GPSAltitudeRef:5,\r\n        GPSAltitude:6,\r\n        GPSTimeStamp:7,\r\n        GPSSatellites:8,\r\n        GPSStatus:9,\r\n        GPSMeasureMode:10,\r\n        GPSDOP:11,\r\n        GPSSpeedRef:12,\r\n        GPSSpeed:13,\r\n        GPSTrackRef:14,\r\n        GPSTrack:15,\r\n        GPSImgDirectionRef:16,\r\n        GPSImgDirection:17,\r\n        GPSMapDatum:18,\r\n        GPSDestLatitudeRef:19,\r\n        GPSDestLatitude:20,\r\n        GPSDestLongitudeRef:21,\r\n        GPSDestLongitude:22,\r\n        GPSDestBearingRef:23,\r\n        GPSDestBearing:24,\r\n        GPSDestDistanceRef:25,\r\n        GPSDestDistance:26,\r\n        GPSProcessingMethod:27,\r\n        GPSAreaInformation:28,\r\n        GPSDateStamp:29,\r\n        GPSDifferential:30,\r\n        GPSHPositioningError:31,\r\n    };\r\n\r\n\r\n    that.InteropIFD = {\r\n        InteroperabilityIndex:1,\r\n    };\r\n\r\n    that.GPSHelper = {\r\n        degToDmsRational:function (degFloat) {\r\n            var degAbs = Math.abs(degFloat);\r\n            var minFloat = degAbs % 1 * 60;\r\n            var secFloat = minFloat % 1 * 60;\r\n            var deg = Math.floor(degAbs);\r\n            var min = Math.floor(minFloat);\r\n            var sec = Math.round(secFloat * 100);\r\n\r\n            return [[deg, 1], [min, 1], [sec, 100]];\r\n        },\r\n\r\n        dmsRationalToDeg:function (dmsArray, ref) {\r\n            var sign = (ref === 'S' || ref === 'W') ? -1.0 : 1.0;\r\n            var deg = dmsArray[0][0] / dmsArray[0][1] +\r\n                      dmsArray[1][0] / dmsArray[1][1] / 60.0 +\r\n                      dmsArray[2][0] / dmsArray[2][1] / 3600.0;\r\n\r\n            return deg * sign;\r\n        }\r\n    };\r\n    \r\n    \r\n    if (typeof exports !== 'undefined') {\r\n        if (typeof module !== 'undefined' && module.exports) {\r\n            exports = module.exports = that;\r\n        }\r\n        exports.piexif = that;\r\n    } else {\r\n        window.piexif = that;\r\n    }\r\n\r\n})();\r\n", "import Imager from \"./ImagerJs\";\r\nimport QualitySelector from \"./QualitySelector\";\r\nimport './imagerJs.css';\r\n\r\nwindow.ImagerJs = {\r\n  Imager,\r\n  ImagerQualitySelector: QualitySelector\r\n};\r\n", "import { nanoid } from \"nanoid\";\r\nimport piexif from \"piexifjs\";\r\nimport { Modal } from \"./Modal\";\r\nimport { Toolbar } from \"./Toolbar\";\r\nimport { translate } from \"./Translations\";\r\nimport CropPlugin from \"./plugins/crop/Crop\";\r\nimport DeletePlugin from \"./plugins/delete/Delete\";\r\nimport PropertiesPlugin from \"./plugins/properties/properties\";\r\nimport ResizePlugin from \"./plugins/resize/Resize\";\r\nimport RotatePlugin from \"./plugins/rotate/Rotate\";\r\nimport SavePlugin from \"./plugins/save/Save\";\r\nimport ToolbarPlugin from \"./plugins/toolbar/Toolbar\";\r\nimport { UndoPlugin } from \"./plugins/undo/Undo\";\r\nimport FileSelector from \"./util/FileSelector\";\r\nimport * as util from \"./util/Util\";\r\n\r\nconst imagerInstances = [];\r\nconst pluginsCatalog = [\r\n  Modal,\r\n  Toolbar,\r\n  CropPlugin,\r\n  DeletePlugin,\r\n  PropertiesPlugin,\r\n  ResizePlugin,\r\n  RotatePlugin,\r\n  SavePlugin,\r\n  ToolbarPlugin,\r\n  UndoPlugin,\r\n];\r\n\r\nconst PLATFORM = {\r\n  ios: \"ios\",\r\n  android: \"android\",\r\n  windowsMobile: \"windowsMobile\",\r\n  genericMobile: \"genericMobile\",\r\n};\r\n\r\n/**\r\n *\r\n * @param $imageElement <img> Element to attach to\r\n *\r\n * @param options {Object} Options\r\n * @param options.editModeCss {Object} Css object for image edit box.\r\n * <br>\r\n * For example, to make background transparent like in photoshop, try this:\r\n * <br>\r\n * <code><pre>\r\n *   {\r\n *    \"background\": \"url(assets/transparent.png)\"\r\n *   }\r\n * </pre></code>\r\n * <br>\r\n *\r\n * Edit box border also could be set here like this:\r\n * <br>\r\n * <code><pre>\r\n *   {\r\n *    \"border\": \"1px dashed green\"\r\n *   }\r\n * </pre></code>\r\n *\r\n * @param {Function} options.detectTouch\r\n * A custom function that will be used by ImagerJs to determine whether it is\r\n * running on touch device or not.\r\n * <br><br>\r\n *\r\n * This function must return <code>true</code> or <code>false</code>.\r\n * <br><br>\r\n *\r\n * <code>true</code> means that touch device is detected and ImagerJs should\r\n * adjust its toolbar size, add touch events etc.\r\n * <br><br>\r\n *\r\n * Note that if this function is not specified, ImagerJs will use its own\r\n * detection mechanism.\r\n * <br><br>\r\n *\r\n * To disable any detection simply set this parameter to such function:\r\n * <code><pre>function() { return false; }</pre></code>\r\n *\r\n * @param {String} options.waitingCursor\r\n * Cursor that will be used for long-running operations.\r\n * <br><br>\r\n *\r\n * Example:\r\n * <code><pre>url(path/to/cursor.cur), default</pre></code>\r\n *\r\n * Note the word 'default' at the end: that is the name of cursor that will\r\n * be used when url is unavailable.\r\n *\r\n * More information about css cursor property could be found here:\r\n * {@link https://developer.mozilla.org/en-US/docs/Web/CSS/cursor}\r\n *\r\n * @see {@link https://developer.mozilla.org/en-US/docs/Web/CSS/cursor}\r\n *\r\n * @param {Number} options.imageSizeForPerformanceWarning Size in bytes.\r\n *\r\n * If image is bigger that provided number, an alert will be shown\r\n * saying that such big images could cause serious performance issues.\r\n *\r\n * @param {Number} options.maxImageWidth Maximum image width in pixels.\r\n *\r\n * If image is width is larger than this value it will be scaled down with .\r\n * This option allows avoiding bad performance with large images.\r\n *\r\n * @param {Number} options.maxImageHeight Maximum image height in pixels.\r\n *\r\n * If image is width is larger than this value it will be scaled down with .\r\n * This option allows avoiding bad performance with large images.\r\n *\r\n * @param {Number} options.canvasSizeLimit : Maximum canvas size, in pixels.\r\n * Canvas is scaled down, if it gets more then this value.\r\n * Default is 32 megapixels for desktop, and 5 megapixels for mobile.\r\n * Warning: if canvasSizeLimit is set larger, then browser restrictions, big images can fail to load.\r\n *\r\n * If image is height is larger than this value it will be scaled down.\r\n * This option allows avoiding bad performance with large images.\r\n *\r\n * @constructor\r\n * @memberof ImagerJs\r\n */\r\nexport default class Imager {\r\n  constructor($imageElement, options) {\r\n    this.$imageElement = $($imageElement);\r\n\r\n    this.defaultOptions = {\r\n      saveData: undefined,\r\n      loadData: undefined,\r\n      quality: 1,\r\n      targetScale: 1,\r\n      plugins: [],\r\n      format: undefined,\r\n      toolbarButtonSize: 32,\r\n      toolbarButtonSizeTouch: 50,\r\n      editModeCss: {\r\n        border: \"1px solid white\",\r\n      },\r\n      pluginsConfig: {},\r\n      detectTouch: null,\r\n      waitingCursor: \"wait\",\r\n      imageSizeForPerformanceWarning: 1000000, // 1 MB\r\n      maxImageWidth: 2048,\r\n      maxImageHeight: 2048,\r\n    };\r\n\r\n    options = options ? options : {};\r\n    this.options = $.extend(true, this.defaultOptions, options);\r\n\r\n    this.debug = false;\r\n\r\n    /**\r\n     * Whether to show temporary canvases that are used to render some image states\r\n     * before final rendering to the canvas that user sees.\r\n     *\r\n     * Use this for debugging with breakpoints.\r\n     *\r\n     * @type {boolean}\r\n     */\r\n    this.showTemporaryCanvas = false;\r\n\r\n    this.targetScale = this.options.targetScale;\r\n    this.quality = this.options.quality;\r\n\r\n    this._eventEmitter = $({});\r\n    this._isInEditMode = false;\r\n\r\n    /**\r\n     * Array containing operations history with images.\r\n     * @type {Array}\r\n     */\r\n    this.history = [];\r\n\r\n    imagerInstances.push(this);\r\n\r\n    /**\r\n     * Will be set only for jpeg images.\r\n     * Stores exif info of the original image.\r\n     * @type {null|Object}\r\n     */\r\n    this.originalExif = null;\r\n\r\n    // detect Platform\r\n    this.detectPlatform();\r\n\r\n    // if no canvasSizeLimit set in options, set it\r\n    if (!this.options.canvasSizeLimit) {\r\n      if (\r\n        [PLATFORM.ios, PLATFORM.android, PLATFORM.windowsMobile].indexOf(\r\n          this.platform\r\n        ) !== -1\r\n      ) {\r\n        // 5 MP on devices\r\n        this.canvasSizeLimit = 5 * 1024 * 1024;\r\n      } else {\r\n        // 32 MP on desktop\r\n        this.canvasSizeLimit = 32 * 1024 * 1024;\r\n      }\r\n    }\r\n\r\n    this.$originalImage = this.$imageElement.clone();\r\n\r\n    this.handleImageElementSrcChanged();\r\n\r\n    /**\r\n     * Imager will instantiate all plugins and store them here.\r\n     * @type {Object|null}\r\n     */\r\n    this.pluginsInstances = null;\r\n    this.instantiatePlugins(pluginsCatalog);\r\n\r\n    $(\"body\").on(\"imagerResize\", () => {\r\n      this.adjustEditContainer();\r\n    });\r\n\r\n    $(window).on(\"resize\", () => {\r\n      this.adjustEditContainer();\r\n    });\r\n  }\r\n\r\n  on(event, handler) {\r\n    this._eventEmitter.on(event, handler);\r\n  }\r\n\r\n  off(event) {\r\n    this._eventEmitter.off(event);\r\n  }\r\n\r\n  trigger(event, args) {\r\n    this._eventEmitter.trigger(event, args);\r\n\r\n    var eventMethodName =\r\n      \"on\" + event.substr(0, 1).toUpperCase() + event.substr(1);\r\n\r\n    for (var i = 0; i < this.pluginsInstances.length; i++) {\r\n      var p = this.pluginsInstances[i];\r\n\r\n      if (p[eventMethodName] !== undefined) {\r\n        p[eventMethodName](args);\r\n      }\r\n    }\r\n  }\r\n\r\n  log() {\r\n    if (this.debug) {\r\n      var args = Array.prototype.slice.call(arguments);\r\n      console.log.apply(console, args);\r\n    }\r\n  }\r\n\r\n  invokePluginsMethod(methodName) {\r\n    var results = [];\r\n\r\n    var args = Array.prototype.slice.call(arguments);\r\n\r\n    args = args.slice(1); // remove method name\r\n\r\n    for (var i = 0; i < this.pluginsInstances.length; i++) {\r\n      var p = this.pluginsInstances[i];\r\n\r\n      if (p[methodName] !== undefined) {\r\n        var result = p[methodName].apply(p, args);\r\n\r\n        if (result) {\r\n          results.push({\r\n            name: p.__name,\r\n            instance: p,\r\n            result: result,\r\n          });\r\n        }\r\n      }\r\n    }\r\n\r\n    return results;\r\n  }\r\n\r\n  /**\r\n   * Sorts plugins based in their `weight`\r\n   */\r\n  pluginSort(p1, p2) {\r\n    if (p1.weight === undefined || p2.weight === null) {\r\n      p1.weight = Infinity;\r\n    }\r\n\r\n    if (p2.weight === undefined || p2.weight === null) {\r\n      p2.weight = Infinity;\r\n    }\r\n\r\n    if (p1.weight < p2.weight) {\r\n      return -1;\r\n    }\r\n\r\n    if (p1.weight > p2.weight) {\r\n      return 1;\r\n    }\r\n\r\n    return 0;\r\n  }\r\n\r\n  /*\r\n   * Iterates through plugins array from config and instantiates them.\r\n   */\r\n  instantiatePlugins(plugins) {\r\n    this.pluginsInstances = plugins.map(\r\n      (t) => new t(this, {}) // this.options.pluginsConfig[pluginName]  TODO\r\n    );\r\n\r\n    this.pluginsInstances.sort(this.pluginSort);\r\n  }\r\n\r\n  /**\r\n   * This function should be called when image's `src` attribute is changed from outside of the imager.\r\n   * It checks `src` attribute, detects image format, prepares image (rotates it according to EXIF for example)\r\n   * and triggers `ready` event on imager.\r\n   */\r\n  handleImageElementSrcChanged() {\r\n    if (!this.options.format) {\r\n      this.options.format = this.getImageFormat(this.$imageElement.attr(\"src\"));\r\n    }\r\n\r\n    if (this.$imageElement.attr(\"data-imager-id\")) {\r\n      // if image already has an id, then it has been edited using Imager.\r\n      // and should contain original image data somewhere\r\n      this.id = this.$imageElement.attr(\"data-imager-id\");\r\n\r\n      if (this.$imageElement.attr(\"src\").length < 1) {\r\n        throw new Error(\r\n          \"Imager was initialized on an empty image. Please check image's `src` attribute. \" +\r\n            \"It should not be empty.\"\r\n        );\r\n      }\r\n    } else {\r\n      this.id = nanoid();\r\n      this.$imageElement.attr(\"data-imager-id\", this.id);\r\n    }\r\n\r\n    //region prepare image\r\n    // Image needs some preparations before it could be used by imager.\r\n    // Fix EXIF rotation data, make image smaller on slow devices etc.\r\n    this.fixImageSizeAndRotation(this.$imageElement)\r\n      .then((imageData) => {\r\n        this.$imageElement.attr(\"src\", imageData);\r\n        this.$imageElement.attr(\"imager-attached\", true);\r\n      })\r\n      .fail((err) => {\r\n        console.error(err);\r\n      });\r\n\r\n    this.$imageElement.on(\"load.imagerInit\", () => {\r\n      this.$imageElement.off(\"load.imagerInit\");\r\n      this.trigger(\"ready\");\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Prepares image after first loading. It checks image EXIF data and fixes it's rotation,\r\n   * scales image down if it's too large.\r\n   *\r\n   * @param {HTMLImageElement} $image\r\n   * @returns {jQuery.Deferred.<string>} Image data base64 string\r\n   */\r\n  fixImageSizeAndRotation($image) {\r\n    // first of all we need to avoid HUGE problems that safari has when displaying\r\n    // images that have exif orientation other than 1.\r\n    // So first step is to remove any exif data from image.\r\n    // Since we can do that only on base64 string  - here we check whether our image is a base64\r\n    // encoded string. If yes - we can start right away. If not, we need to download it as data first using\r\n    // XMLHttpRequest.\r\n\r\n    var deferred = $.Deferred();\r\n\r\n    var imageSrc = $image.attr(\"src\");\r\n\r\n    if (imageSrc.length < 1) {\r\n      return $.when(\"\");\r\n    } else if (imageSrc.indexOf(\"data:image\") === 0) {\r\n      return this._fixBase64ImageSizeAndRotation(imageSrc);\r\n    } else if (imageSrc.indexOf(\"http\") === 0) {\r\n      var xhr = new XMLHttpRequest();\r\n      xhr.responseType = \"blob\";\r\n      xhr.onload = () => {\r\n        var reader = new FileReader();\r\n        reader.onloadend = () => {\r\n          this._fixBase64ImageSizeAndRotation(reader.result).then((imageData) =>\r\n            deferred.resolve(imageData)\r\n          );\r\n        };\r\n        reader.onerror = (err) => {\r\n          deferred.reject(err);\r\n        };\r\n        reader.readAsDataURL(xhr.response);\r\n      };\r\n      xhr.open(\"GET\", imageSrc);\r\n      xhr.send();\r\n      return deferred.promise();\r\n    } else {\r\n      console.error(\"Unsupported image `src`!\");\r\n      return $.when(\"\");\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Base64 image data could contain EXIF data which causes\r\n   * @param imageBase64Data\r\n   * @returns {*}\r\n   * @private\r\n   */\r\n  _fixBase64ImageSizeAndRotation(imageBase64Data) {\r\n    var deferred = $.Deferred();\r\n\r\n    var imageFormat = this.getImageFormat(this.$imageElement.attr(\"src\"));\r\n\r\n    if (imageFormat === \"jpeg\" || imageFormat === \"jpg\") {\r\n      // first of all - get rid of any rotation in exif\r\n      this.originalExif = piexif.load(imageBase64Data);\r\n      var originalOrientation =\r\n        this.originalExif[\"0th\"][piexif.ImageIFD.Orientation];\r\n      this.originalExif[\"0th\"][piexif.ImageIFD.Orientation] = 1;\r\n      imageBase64Data = piexif.insert(\r\n        piexif.dump(this.originalExif),\r\n        imageBase64Data\r\n      );\r\n    }\r\n\r\n    var image = document.createElement(\"img\");\r\n    image.onload = () => {\r\n      var canvas = document.createElement(\"canvas\");\r\n      canvas.width = image.naturalWidth;\r\n      canvas.height = image.naturalHeight;\r\n\r\n      var ctx = canvas.getContext(\"2d\");\r\n\r\n      if (imageFormat === \"jpeg\" || imageFormat === \"jpg\") {\r\n        switch (originalOrientation) {\r\n          case 2:\r\n            // horizontal flip\r\n            ctx.translate(canvas.width, 0);\r\n            ctx.scale(-1, 1);\r\n            break;\r\n          case 3:\r\n            // 180\u00B0 rotate left\r\n            ctx.translate(canvas.width, canvas.height);\r\n            ctx.rotate(Math.PI);\r\n            break;\r\n          case 4:\r\n            // vertical flip\r\n            ctx.translate(0, canvas.height);\r\n            ctx.scale(1, -1);\r\n            break;\r\n          case 5:\r\n            // vertical flip + 90 rotate right\r\n            canvas.width = image.naturalHeight;\r\n            canvas.height = image.naturalWidth;\r\n\r\n            ctx.rotate(0.5 * Math.PI);\r\n            ctx.scale(1, -1);\r\n            break;\r\n          case 6:\r\n            // 90\u00B0 rotate right and flip canvas width and height\r\n            canvas.width = image.naturalHeight;\r\n            canvas.height = image.naturalWidth;\r\n\r\n            ctx.translate(canvas.width, 0);\r\n            ctx.rotate(0.5 * Math.PI);\r\n            break;\r\n          case 7:\r\n            // horizontal flip + 90 rotate right\r\n\r\n            canvas.width = image.naturalHeight;\r\n            canvas.height = image.naturalWidth;\r\n\r\n            ctx.rotate(0.5 * Math.PI);\r\n            ctx.translate(canvas.width, -canvas.height);\r\n            ctx.scale(-1, 1);\r\n            break;\r\n          case 8:\r\n            // 90\u00B0 rotate left\r\n            canvas.width = image.naturalHeight;\r\n            canvas.height = image.naturalWidth;\r\n\r\n            ctx.rotate(-0.5 * Math.PI);\r\n            ctx.translate(-canvas.width, 0);\r\n            break;\r\n        }\r\n      }\r\n\r\n      ctx.drawImage(image, 0, 0);\r\n\r\n      if (canvas.width > this.options.maxImageWidth) {\r\n        var newWidth = this.options.maxImageWidth;\r\n\r\n        var scalePercent = (this.options.maxImageWidth * 100) / canvas.width;\r\n\r\n        var newHeight = (scalePercent * canvas.height) / 100;\r\n\r\n        this.log(\r\n          \"Image is bigger than we could handle, resizing to\",\r\n          newWidth,\r\n          newHeight\r\n        );\r\n\r\n        util.resizeImage(\r\n          canvas,\r\n          canvas.width,\r\n          canvas.height,\r\n          newWidth,\r\n          newHeight\r\n        );\r\n      }\r\n\r\n      deferred.resolve(canvas.toDataURL(this.options.format));\r\n    };\r\n\r\n    image.src = imageBase64Data;\r\n\r\n    return deferred.promise();\r\n  }\r\n\r\n  startSelector() {\r\n    this.$selectorContainer = $(\r\n      '<div class=\"imager-selector-container\" tabindex=\"1\"></div>'\r\n    );\r\n\r\n    var onImagerReady = () => {\r\n      this.off(\"ready\", onImagerReady);\r\n\r\n      this.startEditing();\r\n      this.$selectorContainer.remove();\r\n      this.$selectorContainer = null;\r\n    };\r\n\r\n    var onImageLoad = () => {\r\n      this.$imageElement.off(\"load\", onImageLoad);\r\n\r\n      this.handleImageElementSrcChanged();\r\n      this.on(\"ready\", onImagerReady);\r\n    };\r\n\r\n    var fileSelector = new FileSelector(\"image/*\");\r\n    fileSelector.onFileSelected((file) => {\r\n      util.setWaiting(this.$selectorContainer, translate(\"Please wait...\"));\r\n\r\n      setTimeout(() => {\r\n        this.$imageElement.attr(\"src\", file.data);\r\n        this.$imageElement.css(\"height\", \"auto\");\r\n        this.$imageElement.css(\"min-height\", \"inherit\");\r\n        this.$imageElement.css(\"min-width\", \"inherit\");\r\n\r\n        this.$imageElement.on(\"load\", onImageLoad);\r\n      }, 200);\r\n    });\r\n\r\n    this.$selectorContainer.append(fileSelector.getElement());\r\n\r\n    $(\"body\").append(this.$selectorContainer);\r\n\r\n    var imageOffset = this.$imageElement.offset();\r\n\r\n    this.$selectorContainer.css({\r\n      left: imageOffset.left,\r\n      top: imageOffset.top,\r\n      width: this.$imageElement.width(),\r\n      height: this.$imageElement.height(),\r\n    });\r\n  }\r\n\r\n  startEditing() {\r\n    this.log(\"startEditing()\");\r\n\r\n    this.hideOriginalImage();\r\n\r\n    if (!this.$imageElement[0].complete) {\r\n      throw new Error(\r\n        \"Trying to start editing image that was not yet loaded. \" +\r\n          \"Please add `ready` event listener to imager.\"\r\n      );\r\n    }\r\n\r\n    this.originalPreviewWidth = this.$imageElement.width();\r\n    this.originalPreviewHeight = this.$imageElement.height();\r\n\r\n    this.$editContainer = $(\r\n      '<div class=\"imager-edit-container\" tabindex=\"1\"></div>'\r\n    );\r\n\r\n    if (this.options.editModeCss) {\r\n      this.$editContainer.css(this.options.editModeCss);\r\n    }\r\n\r\n    $(\"body\").append(this.$editContainer);\r\n\r\n    this._createEditCanvas();\r\n\r\n    this.adjustEditContainer();\r\n\r\n    this.trigger(\"editStart\");\r\n\r\n    this.render();\r\n\r\n    this._isInEditMode = true;\r\n\r\n    this.$editContainer.focus();\r\n\r\n    var sizeInBytes = this.getDataSize();\r\n    if (sizeInBytes > this.options.imageSizeForPerformanceWarning) {\r\n      util.setOverlayMessage(\r\n        this.$editContainer,\r\n        \"Image is too big and could cause very poor performance.\",\r\n        \"default\",\r\n        \"Ok\",\r\n        () => util.removeOverlayMessage(this.$editContainer)\r\n      );\r\n    }\r\n\r\n    this._adjustElementsSize(\r\n      \"toolbar-button\",\r\n      this.touchDevice\r\n        ? this.options.toolbarButtonSizeTouch\r\n        : this.options.toolbarButtonSize\r\n    );\r\n\r\n    // clean up the history\r\n    if (this.history.length === 0) {\r\n      this.commitChanges(\"Original\");\r\n    }\r\n\r\n    this.trigger(\"historyChange\");\r\n  }\r\n\r\n  stopEditing() {\r\n    if (!this._isInEditMode) {\r\n      return;\r\n    }\r\n\r\n    this.showOriginalImage();\r\n\r\n    this.render();\r\n\r\n    var pluginsDataRaw = this.invokePluginsMethod(\"serialize\");\r\n    var pluginsData = {};\r\n    $(pluginsDataRaw).each((i, d) => {\r\n      pluginsData[d.name] = d.result;\r\n    });\r\n\r\n    var imageData = null;\r\n\r\n    try {\r\n      imageData = this.canvas.toDataURL(\r\n        \"image/\" + this.options.format,\r\n        this.quality\r\n      );\r\n    } catch (err) {\r\n      if (err.name && err.name === \"SecurityError\") {\r\n        console.error(\r\n          \"Failed to get image data from canvas because of security error.\" +\r\n            \"Usually this happens when image drawed on canvas is located on separate domain without\" +\r\n            \"proper access-control headers.\"\r\n        );\r\n      } else {\r\n        console.error(err);\r\n      }\r\n    }\r\n\r\n    if (!imageData) {\r\n      console.error(\"Failed to get image data from canvas.\");\r\n    }\r\n\r\n    // save current changes to image\r\n    this.$imageElement.attr(\"src\", imageData);\r\n\r\n    this.$editContainer.remove();\r\n    this.$editContainer = null;\r\n\r\n    this.canvas = null;\r\n    this.tempCanvas = null;\r\n\r\n    this.trigger(\"editStop\", {\r\n      imageData: imageData,\r\n      pluginsData: pluginsData,\r\n    });\r\n\r\n    this._isInEditMode = false;\r\n  }\r\n\r\n  /**\r\n   * Change the container's z-index property.\r\n   *\r\n   * @param zIndexValue\r\n   */\r\n  setZindex(zIndexValue) {\r\n    if (this.$editContainer) {\r\n      this.$editContainer.css(\"z-index\", zIndexValue);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Stores current image to history, then renders current canvas into image.\r\n   *\r\n   * @param operationMessage\r\n   */\r\n  commitChanges(operationMessage, callback) {\r\n    var originalQuality = this.quality;\r\n    var originalTargetScale = this.targetScale;\r\n\r\n    this.quality = 1;\r\n    this.targetScale = 1;\r\n    this.adjustCanvasSize();\r\n    this.render();\r\n\r\n    const imageLoadHandler = () => {\r\n      this.$imageElement.off(\"load\", imageLoadHandler);\r\n\r\n      this.quality = originalQuality;\r\n      this.targetScale = originalTargetScale;\r\n      this.adjustCanvasSize();\r\n\r\n      this.history.push({\r\n        message: operationMessage,\r\n        image: imageData,\r\n        width: this.$imageElement.width(),\r\n        height: this.$imageElement.height(),\r\n      });\r\n\r\n      this.originalPreviewWidth = this.$imageElement.width();\r\n      this.originalPreviewHeight = this.$imageElement.height();\r\n\r\n      this.render();\r\n      this.trigger(\"historyChange\");\r\n\r\n      if (callback && callback instanceof Function) {\r\n        callback();\r\n      }\r\n    };\r\n\r\n    const onImageLoadError = (event) => {\r\n      console.warn(\"commitChanges() : image failed to load :\", event);\r\n    };\r\n\r\n    // save current canvas image to image element\r\n    var imageData = this.canvas.toDataURL(\"image/\" + this.options.format, 100);\r\n\r\n    // set image loading handlers\r\n    this.$imageElement.on(\"load\", imageLoadHandler);\r\n    this.$imageElement.on(\"error\", onImageLoadError);\r\n\r\n    // load image\r\n    this.$imageElement.attr(\"src\", imageData);\r\n  }\r\n\r\n  isInEditMode() {\r\n    return this._isInEditMode;\r\n  }\r\n\r\n  /**\r\n   * Creates canvas for showing temporary edited image.\r\n   * Created temporary canvas for drawing temporary data by plugins etc.\r\n   *\r\n   * Those canvases could be accessed as this.canvas and this.tempCanvas.\r\n   *\r\n   * @private\r\n   */\r\n  _createEditCanvas() {\r\n    var imageWidth = this.$imageElement.width();\r\n    var imageHeight = this.$imageElement.height();\r\n\r\n    var imageNaturalWidth = this.$imageElement[0].naturalWidth;\r\n    var imageNaturalHeight = this.$imageElement[0].naturalHeight;\r\n\r\n    var $canvas = $('<canvas class=\"imager-edit-canvas\"/>');\r\n    $canvas.css({\r\n      width: imageWidth,\r\n      height: imageHeight,\r\n    });\r\n\r\n    this.canvas = $canvas[0];\r\n\r\n    this.adjustCanvasSize();\r\n\r\n    this.$editContainer.append($canvas);\r\n\r\n    this.tempCanvas = document.createElement(\"canvas\");\r\n    this.tempCanvas.width = imageNaturalWidth;\r\n    this.tempCanvas.height = imageNaturalHeight;\r\n\r\n    if (this.showTemporaryCanvas) {\r\n      $(\"body\").append(this.tempCanvas);\r\n      $(this.tempCanvas).css({\r\n        position: \"absolute\",\r\n        left: \"50px\",\r\n        top: \"50px\",\r\n        width: imageWidth,\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Renders image on temporary canvas and then invokes plugin methods\r\n   * that shoul modify image.\r\n   *\r\n   * @param [ctx] Context on which to draw image.\r\n   */\r\n  render(ctx) {\r\n    ctx = ctx !== undefined ? ctx : this.canvas.getContext(\"2d\");\r\n\r\n    var realWidth = this.$imageElement[0].naturalWidth;\r\n    var realHeight = this.$imageElement[0].naturalHeight;\r\n\r\n    if (realWidth === 0 || realHeight === 0) {\r\n      console.warn(\"Trying to render canvas with zero width or height\");\r\n      console.trace();\r\n      return;\r\n    }\r\n\r\n    // reset canvas size to image natural size\r\n    ctx.canvas.width = realWidth * this.targetScale;\r\n    ctx.canvas.height = realHeight * this.targetScale;\r\n\r\n    this.tempCanvas.width = realWidth;\r\n    this.tempCanvas.height = realHeight;\r\n\r\n    var destWidth = ctx.canvas.width;\r\n    var destHeight = ctx.canvas.height;\r\n\r\n    var viewPort = {\r\n      sourceLeft: 0,\r\n      sourceTop: 0,\r\n      sourceWidth: realWidth,\r\n      sourceHeight: realHeight,\r\n      destLeft: 0,\r\n      destTop: 0,\r\n      destWidth: destWidth,\r\n      destHeight: destHeight,\r\n      paddingWidth: 0,\r\n      paddingHeight: 0,\r\n    };\r\n\r\n    this.drawImage(this.$imageElement, ctx, viewPort);\r\n\r\n    this.invokePluginsMethod(\"render\", ctx);\r\n  }\r\n\r\n  clearCanvas(ctx) {\r\n    ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\r\n\r\n    if (this.options.format == \"jpeg\") {\r\n      ctx.fillStyle = \"#FFFFFF\"; // jpeg does not support transparency\r\n      // so without this line all non painted areas will be black.\r\n      ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height);\r\n    }\r\n  }\r\n\r\n  drawImage($img, ctx, viewPort) {\r\n    if (ctx.canvas.width === 0 || ctx.canvas.height === 0) {\r\n      console.warn(\r\n        \"Imager.drawImage() : Trying to render canvas with either width or height equal to 0\"\r\n      );\r\n      return;\r\n    }\r\n\r\n    this._drawWithScaling(\r\n      $img,\r\n      ctx,\r\n      this.tempCanvas.getContext(\"2d\"),\r\n      viewPort.sourceLeft,\r\n      viewPort.sourceTop,\r\n      viewPort.sourceWidth,\r\n      viewPort.sourceHeight,\r\n\r\n      viewPort.destLeft,\r\n      viewPort.destTop,\r\n      viewPort.destWidth,\r\n      viewPort.destHeight,\r\n\r\n      viewPort.paddingWidth,\r\n      viewPort.paddingHeight\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Draws image on canvas with specified dimensions.\r\n   * Drawing is performed in few steps to make image smooth.\r\n   *\r\n   * More information about interpolation here:\r\n   * http://stackoverflow.com/questions/17861447/html5-canvas-drawimage-how-to-apply-antialiasing\r\n   *\r\n   * @param {HTMLImageElement} $img Image to draw\r\n   * @param ctx           Canvas context to draw on\r\n   * @param tempCtx       Temporary canvas context to draw on interpolation steps\r\n   * @param sourceLeft    Source image x coordinate\r\n   * @param sourceTop     Source image y coordinate\r\n   * @param sourceWidth   Source image width\r\n   * @param sourceHeight  Source image height\r\n   * @param destLeft      Destination image x coordinate\r\n   * @param destTop       Destination image y coordinate\r\n   * @param destWidth     Destination image width\r\n   * @param destHeight    Destination image height\r\n   * @param paddingWidth  Width padding that will be applied to target image\r\n   * @param paddingHeight Height padding that will be applied to target image\r\n   * @private\r\n   */\r\n  _drawWithScaling(\r\n    $img,\r\n    ctx,\r\n    tempCtx,\r\n    sourceLeft,\r\n    sourceTop,\r\n    sourceWidth,\r\n    sourceHeight,\r\n    destLeft,\r\n    destTop,\r\n    destWidth,\r\n    destHeight,\r\n    paddingWidth,\r\n    paddingHeight\r\n  ) {\r\n    paddingWidth = paddingWidth !== undefined ? paddingWidth : 0;\r\n    paddingHeight = paddingHeight !== undefined ? paddingHeight : 0;\r\n\r\n    sourceLeft = sourceLeft !== undefined ? sourceLeft : 0;\r\n    sourceTop = sourceTop !== undefined ? sourceTop : 0;\r\n\r\n    var paddingWidthHalf = paddingWidth / 2;\r\n    var paddingHeightHalf = paddingHeight / 2;\r\n\r\n    var tempCanvas = tempCtx.canvas;\r\n\r\n    tempCtx.clearRect(0, 0, sourceWidth, sourceHeight);\r\n\r\n    var img = $img[0];\r\n\r\n    var steps = 3;\r\n\r\n    var step = 0.5;\r\n\r\n    var currentStepWidth = sourceWidth;\r\n    var currentStepHeight = sourceHeight;\r\n\r\n    var currentStepSourceLeft = sourceLeft;\r\n    var currentStepSourceTop = sourceTop;\r\n\r\n    tempCtx.drawImage(\r\n      img,\r\n      currentStepSourceLeft,\r\n      currentStepSourceTop,\r\n      sourceWidth,\r\n      sourceHeight,\r\n      0,\r\n      0,\r\n      currentStepWidth,\r\n      currentStepHeight\r\n    );\r\n\r\n    for (var s = 0; s < steps; s++) {\r\n      if (\r\n        currentStepWidth <= destWidth * 2 ||\r\n        currentStepHeight <= destHeight * 2\r\n      ) {\r\n        break;\r\n      }\r\n\r\n      var prevStepWidth = currentStepWidth;\r\n      var prevStepHeight = currentStepHeight;\r\n\r\n      currentStepWidth *= step;\r\n      currentStepHeight *= step;\r\n\r\n      currentStepSourceLeft *= step;\r\n      currentStepSourceTop *= step;\r\n\r\n      var stepTempCanvas = document.createElement(\"canvas\");\r\n      stepTempCanvas.width = tempCtx.canvas.width;\r\n      stepTempCanvas.height = tempCtx.canvas.height;\r\n\r\n      var stepTempCtx = stepTempCanvas.getContext(\"2d\");\r\n      stepTempCtx.clearRect(0, 0, stepTempCanvas.width, stepTempCanvas.height);\r\n\r\n      stepTempCtx.drawImage(\r\n        tempCanvas,\r\n        currentStepSourceLeft,\r\n        currentStepSourceTop,\r\n        prevStepWidth,\r\n        prevStepHeight,\r\n        0,\r\n        0,\r\n        currentStepWidth,\r\n        currentStepHeight\r\n      );\r\n\r\n      tempCtx.clearRect(0, 0, tempCtx.canvas.width, tempCtx.canvas.height);\r\n\r\n      tempCtx.drawImage(\r\n        stepTempCanvas,\r\n        0,\r\n        0,\r\n        currentStepWidth,\r\n        currentStepHeight,\r\n        0,\r\n        0,\r\n        currentStepWidth,\r\n        currentStepHeight\r\n      );\r\n    }\r\n\r\n    ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\r\n\r\n    ctx.drawImage(\r\n      tempCanvas,\r\n      0,\r\n      0,\r\n      currentStepWidth,\r\n      currentStepHeight,\r\n      destLeft + paddingWidthHalf,\r\n      destTop + paddingHeightHalf,\r\n      destWidth - paddingWidth,\r\n      destHeight - paddingHeight\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Sets preview area dimensions.\r\n   * Note that this affects only the size of image that user sees.\r\n   * Internal image size is not affected.\r\n   *\r\n   * @param {number} width\r\n   * @param {number} height\r\n   */\r\n  setPreviewSize(width, height) {\r\n    this.$imageElement.css({\r\n      width: width,\r\n      height: height,\r\n    });\r\n\r\n    $(this.canvas).css({\r\n      width: width,\r\n      height: height,\r\n    });\r\n\r\n    $(\"body\").trigger(\"imagerResize\");\r\n    this.log(\"resize trigger\");\r\n\r\n    this.originalPreviewWidth = this.$imageElement.width();\r\n    this.originalPreviewHeight = this.$imageElement.height();\r\n  }\r\n\r\n  getPreviewSize() {\r\n    return {\r\n      width: this.$imageElement.width(),\r\n      height: this.$imageElement.height(),\r\n    };\r\n  }\r\n\r\n  getImageRealSize() {\r\n    return {\r\n      width: this.$imageElement[0].naturalWidth,\r\n      height: this.$imageElement[0].naturalHeight,\r\n    };\r\n  }\r\n\r\n  getCanvasSize() {\r\n    return {\r\n      width: this.canvas.width,\r\n      height: this.canvas.height,\r\n    };\r\n  }\r\n\r\n  convertScale(value, sourceMax, targetMax) {\r\n    var valueInPercents = (value * 100) / sourceMax;\r\n\r\n    return (valueInPercents * targetMax) / 100;\r\n  }\r\n\r\n  hideOriginalImage() {\r\n    this.$imageElement.css(\"opacity\", 0);\r\n  }\r\n\r\n  showOriginalImage() {\r\n    this.$imageElement.css(\"opacity\", 1);\r\n  }\r\n\r\n  /**\r\n   * Takes image's real size (naturalWidth & naturalHeight)\r\n   * and adjust canvas size to match that\r\n   * but with respect to aspect ratio of preview viewport size.\r\n   */\r\n  adjustCanvasSize() {\r\n    var imageRealSize = this.getImageRealSize();\r\n    var previewSize = this.getPreviewSize();\r\n\r\n    var newCanvasWidth = 0;\r\n    var newCanvasHeight = 0;\r\n\r\n    var aspectRatio = 0;\r\n\r\n    if (previewSize.width > previewSize.height) {\r\n      newCanvasWidth = imageRealSize.width;\r\n\r\n      aspectRatio = (previewSize.height * 100) / previewSize.width;\r\n      newCanvasHeight = (aspectRatio * newCanvasWidth) / 100;\r\n    } else {\r\n      newCanvasHeight = imageRealSize.height;\r\n\r\n      aspectRatio = (previewSize.width * 100) / previewSize.height;\r\n      newCanvasWidth = (aspectRatio * newCanvasHeight) / 100;\r\n    }\r\n\r\n    this.canvas.width = newCanvasWidth * this.targetScale;\r\n    this.canvas.height = newCanvasHeight * this.targetScale;\r\n\r\n    // if canvas size limit is set - check canvas size\r\n    this.canvasSizeLimit = 1 * 1024 * 1024;\r\n    if (this.canvasSizeLimit) {\r\n      if (this.canvas.width * this.canvas.height > this.canvasSizeLimit) {\r\n        console.warn(\r\n          \"adjustCanvasSize(): canvas size is too big : \",\r\n          this.canvas.width,\r\n          this.canvas.height\r\n        );\r\n        var ratio =\r\n          (0.95 * this.canvasSizeLimit) /\r\n          (this.canvas.width * this.canvas.height);\r\n\r\n        this.canvas.width = this.canvas.width * ratio;\r\n        this.canvas.height = this.canvas.height * ratio;\r\n        console.warn(\r\n          \"adjustCanvasSize(): canvas was reduced to : \",\r\n          this.canvas.width,\r\n          this.canvas.height\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Positions $editContained with absolute coordinates\r\n   * to be on top of $imageElement.\r\n   */\r\n  adjustEditContainer() {\r\n    var imageOffset = this.$imageElement.offset();\r\n\r\n    if (this.$editContainer) {\r\n      this.$editContainer.css({\r\n        left: imageOffset.left,\r\n        top: imageOffset.top,\r\n        width: this.$imageElement.width(),\r\n        height: this.$imageElement.height(),\r\n      });\r\n    }\r\n\r\n    if (this.$selectorContainer) {\r\n      this.$selectorContainer.css({\r\n        left: imageOffset.left,\r\n        top: imageOffset.top,\r\n        width: this.$imageElement.width(),\r\n        height: this.$imageElement.attr(\"src\")\r\n          ? this.$imageElement.height()\r\n          : \"auto\",\r\n      });\r\n    }\r\n  }\r\n\r\n  restoreOriginal() {\r\n    this.$imageElement.replaceWith(this.$originalImage);\r\n  }\r\n\r\n  historyUndo() {\r\n    if (this.history.length < 2) {\r\n      return;\r\n    }\r\n\r\n    var lastEntry = this.history[this.history.length - 2];\r\n\r\n    const imageLoadHandler = () => {\r\n      this.$imageElement.off(\"load\", imageLoadHandler);\r\n\r\n      this.originalPreviewWidth = this.$imageElement.width();\r\n      this.originalPreviewHeight = this.$imageElement.height();\r\n\r\n      this.setPreviewSize(lastEntry.width, lastEntry.height);\r\n\r\n      this.render();\r\n      this.history.splice(this.history.length - 1, 1);\r\n\r\n      this.trigger(\"historyChange\");\r\n    };\r\n\r\n    this.$imageElement.on(\"load\", imageLoadHandler);\r\n    this.$imageElement.attr(\"src\", lastEntry.image);\r\n\r\n    this.$imageElement.width(lastEntry.width);\r\n    this.$imageElement.height(lastEntry.height);\r\n  }\r\n\r\n  remove(removeImage) {\r\n    this.trigger(\"remove\");\r\n\r\n    this.$imageElement.removeAttr(\"imager-attached\");\r\n    this.stopEditing();\r\n    this.showOriginalImage();\r\n    var index = imagerInstances.indexOf(this);\r\n    imagerInstances.splice(index, 1);\r\n\r\n    this.$originalImage = null;\r\n    this.pluginsInstances = null;\r\n\r\n    if (removeImage) {\r\n      this.$imageElement.remove();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Returns current image data in bytes.\r\n   *\r\n   * @returns {number} Bytes number\r\n   */\r\n  getDataSize() {\r\n    var head = \"data:\" + \"image/\" + this.options.format + \";base64,\";\r\n    var data = this.canvas.toDataURL(\r\n      \"image/\" + this.options.format,\r\n      this.quality\r\n    );\r\n\r\n    var size = Math.round(((data.length - head.length) * 3) / 4);\r\n\r\n    return size;\r\n  }\r\n\r\n  /**\r\n   * Tries to find Imager instance associated with provided img element.\r\n   *\r\n   * @param $img {HTMLImageElement|jQuery}\r\n   * @returns {Imager|undefined}\r\n   */\r\n  static getImagerFor($img) {\r\n    for (var i = 0; i < imagerInstances.length; i++) {\r\n      var imager = imagerInstances[i];\r\n\r\n      if (imager.id == $($img).attr(\"data-imager-id\")) {\r\n        return imager;\r\n      }\r\n    }\r\n\r\n    return undefined;\r\n  }\r\n\r\n  static isImagerAttached($elem) {\r\n    return $($elem).attr(\"imager-attached\") !== undefined;\r\n  }\r\n\r\n  /**\r\n   * @param {boolean} waiting Waiting status. TRUE for adding 'waiting' text,\r\n   * false to remove.\r\n   */\r\n  setWaiting(waiting) {\r\n    if (waiting) {\r\n      if (this.$editContainer) {\r\n        util.setWaiting(\r\n          this.$editContainer,\r\n          translate(\"Please wait...\"),\r\n          this.options.waitingCursor\r\n        );\r\n      }\r\n    } else {\r\n      util.stopWaiting(this.$editContainer);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Detects image format for either base64 encoded string or http:// url.\r\n   * @param {string} imageSrc\r\n   */\r\n  getImageFormat(imageSrc) {\r\n    if (!imageSrc) {\r\n      return;\r\n    }\r\n\r\n    var extension;\r\n\r\n    if (imageSrc.indexOf(\"http\") === 0) {\r\n      extension = imageSrc.split(\".\").pop();\r\n\r\n      if (extension == \"jpeg\") {\r\n        extension = \"jpeg\";\r\n      } else if (extension == \"jpg\") {\r\n        extension = \"jpeg\";\r\n      } else if (extension == \"png\") {\r\n        extension = \"png\";\r\n      }\r\n    } else if (imageSrc.indexOf(\"data:image\") === 0) {\r\n      if (imageSrc[11] == \"j\") {\r\n        extension = \"jpeg\";\r\n      } else if (imageSrc[11] == \"p\") {\r\n        extension = \"png\";\r\n      }\r\n    }\r\n\r\n    return extension;\r\n  }\r\n\r\n  /**\r\n   * This method allows dynamical size adjustment of elements.\r\n   * Elements which needs to be resized should have two attributes:\r\n   *\r\n   * data-sizeable=\"someNamespace\",\r\n   * where someNamespace is unique id for the group of elements tht will be\r\n   * resized together.\r\n   *\r\n   * data-cssrules=width,height,font-size:($v / 2.5)\r\n   * which provides a list of css rules on which a new size will be applied.\r\n   * If resulting size needs to be modififed in some way, the one could\r\n   * specify a function like in font-size.\r\n   *\r\n   * @private\r\n   */\r\n  _adjustElementsSize(namespace, newSize) {\r\n    var elementsToResize = $(\"[data-sizeable=\" + namespace + \"]\");\r\n\r\n    for (var i = 0; i < elementsToResize.length; i++) {\r\n      var elem = elementsToResize[i];\r\n      var attributesToChange = $(elem).attr(\"data-cssrules\").split(\",\");\r\n\r\n      for (var a = 0; a < attributesToChange.length; a++) {\r\n        var attrName = attributesToChange[a];\r\n        var attrVal = newSize;\r\n\r\n        if (attrName[0] == \"-\") {\r\n          attrName = attrName.substr(1);\r\n          attrVal = \"-\" + newSize;\r\n        }\r\n\r\n        var matches = attrName.match(/:\\((.+)\\)/);\r\n        if (matches) {\r\n          attrName = attrName.replace(matches[0], \"\");\r\n          var expression = matches[1];\r\n          expression = expression.replace(\"$v\", attrVal);\r\n          var result = new Function(\"return \" + expression)();\r\n          attrVal = result;\r\n        }\r\n\r\n        $(elem).css(attrName, attrVal + \"px\");\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Crude detection of device and platform.\r\n   * Sets this.platform and this.touchDevice.\r\n   * @todo this is BAD. Use more precise methods or some lib\r\n   */\r\n  detectPlatform() {\r\n    // crude check of platform\r\n    if (/iPhone|iPad|iPod/i.test(navigator.userAgent)) {\r\n      this.platform = PLATFORM.ios;\r\n    } else if (/Android|BlackBerry/i.test(navigator.userAgent)) {\r\n      this.platform = PLATFORM.android;\r\n    } else if (/IEMobile/i.test(navigator.userAgent)) {\r\n      this.platform = PLATFORM.windowsMobile;\r\n    }\r\n\r\n    // check if options.detectTouch is function\r\n    if (\r\n      this.options.detectTouch &&\r\n      this.options.detectTouch.constructor.name !== \"Function\"\r\n    ) {\r\n      console.error(\r\n        \"detectTouch should be a function which will be \" +\r\n          \"called when Imager needs to determine whether it is working \" +\r\n          \"on touch device\"\r\n      );\r\n      this.options.detectTouch = null;\r\n    }\r\n\r\n    // crude check of touch\r\n    if (this.options.detectTouch) {\r\n      this.touchDevice = this.options.detectTouch(this);\r\n    } else {\r\n      this.touchDevice = /(iPhone|iPod|iPad|BlackBerry|Android)/i.test(\r\n        navigator.userAgent\r\n      );\r\n    }\r\n\r\n    // one more touch check\r\n\r\n    $(\"body\").on(\"touchstart.DrawerTouchCheck\", () => {\r\n      this.touchDevice = true;\r\n      $(\"body\").off(\"touchstart.DrawerTouchCheck\");\r\n      this.log(\"Found touch screen.\");\r\n    });\r\n  }\r\n}\r\n", "import { urlAlphabet } from './url-alphabet/index.js'\nexport { urlAlphabet } from './url-alphabet/index.js'\nexport let random = bytes => crypto.getRandomValues(new Uint8Array(bytes))\nexport let customRandom = (alphabet, defaultSize, getRandom) => {\n  let mask = (2 << (Math.log(alphabet.length - 1) / Math.LN2)) - 1\n  let step = -~((1.6 * mask * defaultSize) / alphabet.length)\n  return (size = defaultSize) => {\n    let id = ''\n    while (true) {\n      let bytes = getRandom(step)\n      let j = step\n      while (j--) {\n        id += alphabet[bytes[j] & mask] || ''\n        if (id.length === size) return id\n      }\n    }\n  }\n}\nexport let customAlphabet = (alphabet, size = 21) =>\n  customRandom(alphabet, size, random)\nexport let nanoid = (size = 21) => {\n  let id = ''\n  let bytes = crypto.getRandomValues(new Uint8Array(size))\n  while (size--) {\n    id += urlAlphabet[bytes[size] & 63]\n  }\n  return id\n}\n", "export const urlAlphabet =\n  'useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict'\n", "import './Modal.css';\r\n\r\nlet $body = null;\r\nlet $overlay = $(\r\n  '<div class=\"modaljs-overlay hidden hidden-add-end noselect\"></div>'\r\n);\r\nlet $wrapper = $(\r\n  '<div class=\"modaljs-wrapper hidden noselect\">' +\r\n    '<div class=\"modaljs-wrapper2 modaljs-modals-container noselect\"></div>' +\r\n    \"</div>\"\r\n);\r\n\r\n$(document).ready(() => {\r\n  $body = $(\"body\");\r\n  $body.append($overlay);\r\n  $body.append($wrapper);\r\n});\r\n\r\nexport class Modal {\r\n  constructor() {\r\n    var $modal = $(\r\n      '<div class=\"modaljs hidden noselect\">' +\r\n        \"<header></header>\" +\r\n        '<div class=\"modaljs-template-container noselect\"></div>' +\r\n        \"<footer>\" +\r\n        \"</footer>\"\r\n    );\r\n\r\n    $wrapper.find(\".modaljs-modals-container\").append($modal);\r\n\r\n    $wrapper.find(\".modaljs\").scroll(() => {\r\n      $(window).trigger(\"resize\");\r\n    });\r\n\r\n    this.$modal = $modal;\r\n    this.classname = \"\";\r\n\r\n    this.cancelHandler = null;\r\n\r\n    $(window).resize(() => {\r\n      this.fixPosition();\r\n    });\r\n\r\n    $(\"body\").on(\"imagerResize\", () => {\r\n      this.fixPosition();\r\n    });\r\n  }\r\n\r\n  setTitle(title) {\r\n    this.$modal.find(\"header\").html(title);\r\n  }\r\n\r\n  setTemplate(template) {\r\n    this.$modal.find(\".modaljs-template-container\").append($(template));\r\n  }\r\n\r\n  fixPosition() {\r\n    if ($wrapper.find(\".modaljs\").length < 1) {\r\n      return;\r\n    }\r\n\r\n    var headerHeight = $wrapper\r\n      .find(\".modaljs > header\")[0]\r\n      .getBoundingClientRect().height;\r\n    var bodyHeight = $wrapper\r\n      .find(\".modaljs > .modaljs-template-container\")[0]\r\n      .getBoundingClientRect().height;\r\n    var footerHeight = $wrapper\r\n      .find(\".modaljs > footer\")[0]\r\n      .getBoundingClientRect().height;\r\n\r\n    var fullContentHeight = headerHeight + bodyHeight + footerHeight;\r\n\r\n    if ($(window).height() <= fullContentHeight) {\r\n      $wrapper.addClass(\"fullheight\");\r\n    } else {\r\n      $wrapper.removeClass(\"fullheight\");\r\n    }\r\n  }\r\n\r\n  addCancelButton(buttonText, handler) {\r\n    this.cancelHandler = handler;\r\n\r\n    var $button = $(\"<button></button>\").text(buttonText);\r\n    $button.on(\"click\", () => {\r\n      this.hide();\r\n      if (this.cancelHandler) {\r\n        this.cancelHandler();\r\n      }\r\n    });\r\n\r\n    this.$modal.find(\"footer\").append($button);\r\n\r\n    this._fixButtonsSize();\r\n  }\r\n\r\n  addClass(classname) {\r\n    this.classname += \" \" + classname;\r\n    this.$modal.addClass(classname);\r\n  }\r\n\r\n  addActionButton(buttonText, handler) {\r\n    var $button = $(\"<button></button>\")\r\n      .addClass(\"modaljs-action-button\")\r\n      .text(buttonText);\r\n\r\n    $button.on(\"click\", () => {\r\n      var handlerResponse = handler();\r\n      if (handlerResponse === undefined && handlerResponse !== false) {\r\n        this.hide();\r\n      }\r\n    });\r\n\r\n    this.$modal.find(\"footer\").append($button);\r\n\r\n    this._fixButtonsSize();\r\n  }\r\n\r\n  _fixButtonsSize() {\r\n    var $buttons = this.$modal.find(\"footer button\");\r\n    $buttons.css(\"width\", 100 / $buttons.length + \"%\");\r\n  }\r\n\r\n  show() {\r\n    $overlay.addClass(this.classname);\r\n\r\n    $overlay.removeClass(\"hidden-add-end\");\r\n    $overlay.removeClass(\"hidden\");\r\n    $overlay.css(\"height\", $(\"body\").height());\r\n    $overlay.on(\"click\", () => {\r\n      this.hide();\r\n      if (this.cancelHandler) {\r\n        this.cancelHandler();\r\n      }\r\n    });\r\n\r\n    $wrapper.removeClass(\"hidden\");\r\n\r\n    this.$modal.removeClass(\"hidden\");\r\n\r\n    var bodyWidthBefore = $body.width();\r\n    this.overflowBefore = $body.css(\"overflow\");\r\n\r\n    $body.css(\"overflow\", \"hidden\");\r\n    this.widthDiff = $body.width() - bodyWidthBefore;\r\n    this.paddingBefore = $body.css(\"padding-right\");\r\n\r\n    $body.css(\"padding-right\", this.widthDiff + \"px\");\r\n  }\r\n\r\n  hide() {\r\n    $overlay.removeClass(this.classname);\r\n\r\n    $overlay.addClass(\"hidden\");\r\n    setTimeout(() => {\r\n      $overlay.addClass(\"hidden-add-end\");\r\n    }, 400);\r\n\r\n    $overlay.off(\"click\");\r\n\r\n    $wrapper.addClass(\"hidden\");\r\n    this.$modal.addClass(\"hidden\");\r\n\r\n    $body.css(\"overflow\", this.overflowBefore);\r\n    $body.css(\"padding-right\", this.paddingBefore);\r\n  }\r\n\r\n  remove() {\r\n    this.$modal.remove();\r\n    this.cancelHandler = false;\r\n  }\r\n}\r\n", "import \"./Toolbar.css\";\r\nimport { translate } from \"./Translations\";\r\n\r\nimport { bindClick } from \"./util/Util\";\r\n\r\nexport class Toolbar {\r\n  constructor(options) {\r\n    options = options || {};\r\n\r\n    var defaultOptions = {\r\n      tooltipEnabled: true,\r\n      tooltipCss: null,\r\n    };\r\n\r\n    this.options = $.extend(defaultOptions, options);\r\n\r\n    this.$toolbar = $('<ul class=\"toolbar\"></ul>')\r\n      .attr(\"contenteditable\", \"false\")\r\n      .addClass(\"noselect\")\r\n      .addClass(\"toolbar-topLeft\");\r\n\r\n    this.tooltips = [];\r\n    this.buttonsGroups = {};\r\n  }\r\n\r\n  getElement() {\r\n    return this.$toolbar;\r\n  }\r\n\r\n  addButton(className, iconClass, tooltipText, clickHandler) {\r\n    var $button = this.createButton(className, iconClass, clickHandler);\r\n\r\n    this.$toolbar.append($button);\r\n    this.createTooltip($button.find(\"a\"), className, tooltipText, \"bottom\");\r\n\r\n    return $button;\r\n  }\r\n\r\n  createButton(className, iconClass, clickHandler) {\r\n    var $button = $(\r\n      '<li data-sizeable=\"toolbar-button\" ' +\r\n        'data-cssrules=\"width,height\">' +\r\n        '<a href=\"#\" ' +\r\n        'data-sizeable=\"toolbar-button\" ' +\r\n        'data-cssrules=\"line-height,font-size:($v / 2.5)\" tabindex=\"-1\">' +\r\n        '<i class=\"fa ' +\r\n        iconClass +\r\n        '\"></i>' +\r\n        \"</a>\" +\r\n        \"</li>\"\r\n    ).addClass(className);\r\n\r\n    bindClick($button.find(\"a\"), \"imager-button\", () => clickHandler(this));\r\n\r\n    return $button;\r\n  }\r\n\r\n  /**\r\n   * Add a button to this toolbar. Button will be appended to group.\r\n   * Group is a one button which will show dropdown with its buttons on click.\r\n   *\r\n   * @param className {String}    Add specified class to button's <li> element.\r\n   * @param iconClass {String}    Add specified class to button's <i> element.\r\n   * @param tooltipText {String} Tooltip text that will be shown on mouse over.\r\n   * @param group {Object} Group object with group class name and tooltip text\r\n   * @param group.name {String} Group unique id\r\n   * @param group.tooltip {String} A tooltip text that will be shown on mouse over\r\n   * @param clickHandler {Function} function that will be invoked\r\n   *                                when user clicks on this button.\r\n   */\r\n  addButtonToGroup(className, iconClass, tooltipText, group, clickHandler) {\r\n    var $groupContainer = null;\r\n    if (!this.buttonsGroups[group.name]) {\r\n      $groupContainer = $(\r\n        '<li class=\"btn-group\" ' +\r\n          'data-editable-canvas-sizeable=\"toolbar-button\" ' +\r\n          'data-editable-canvas-cssrules=\"width,height\">' +\r\n          '<a href=\"#\" ' +\r\n          'data-editable-canvas-sizeable=\"toolbar-button\" ' +\r\n          'data-editable-canvas-cssrules=\"line-height,font-size:($v / 2.5)\" ' +\r\n          'tabindex=\"-1\">' +\r\n          '<i class=\"fa ' +\r\n          iconClass +\r\n          '\"></i>' +\r\n          \"</a>\" +\r\n          '<ul class=\"group-items-container hidden\">' +\r\n          \"</ul>\" +\r\n          \"</li>\"\r\n      );\r\n\r\n      this.buttonsGroups[group.name] = $groupContainer;\r\n      this.$toolbar.append($groupContainer);\r\n\r\n      bindClick(\r\n        $groupContainer.children(\"a\"),\r\n        \"drawer-toolbar-group-button\",\r\n        () => {\r\n          $groupContainer\r\n            .find(\"ul.group-items-container\")\r\n            .toggleClass(\"hidden\");\r\n        }\r\n      );\r\n\r\n      this.createTooltip(\r\n        $groupContainer.children(\"a\"),\r\n        group.name,\r\n        group.tooltip,\r\n        \"bottom\"\r\n      );\r\n    }\r\n\r\n    $groupContainer = this.buttonsGroups[group.name];\r\n\r\n    var $button = this.createButton(className, iconClass, (clickEvent) => {\r\n      $groupContainer.find(\"ul.group-items-container\").toggleClass(\"hidden\");\r\n\r\n      clickHandler(clickEvent);\r\n\r\n      $groupContainer\r\n        .attr(\"class\", $button.attr(\"class\"))\r\n        .addClass(\"btn-group\");\r\n      $groupContainer\r\n        .children(\"a\")\r\n        .attr(\"class\", $button.children(\"a\").attr(\"class\"));\r\n      $groupContainer.children(\"a\").html($button.children(\"a\").html());\r\n    });\r\n\r\n    $groupContainer.find(\".group-items-container\").append($button);\r\n\r\n    this.createTooltip(\r\n      $button.find(\"a\"),\r\n      className + \" group-item\",\r\n      tooltipText,\r\n      \"right\"\r\n    );\r\n\r\n    return $button;\r\n  }\r\n\r\n  createTooltip($button, className, title, align) {\r\n    if (!this.options.tooltipEnabled) {\r\n      return;\r\n    }\r\n\r\n    var $tooltip = $(\"<span>\")\r\n      .addClass(\"toolbar-tooltip tooltip-\" + className)\r\n      .html(title);\r\n\r\n    $tooltip.appendTo(\"body\");\r\n    this.tooltips.push($tooltip);\r\n\r\n    if (this.options.tooltipCss) {\r\n      $tooltip.css(this.options.tooltipCss);\r\n    }\r\n\r\n    $button.on(\"mouseenter\", e=> {\r\n      if ($(e.target).hasClass(\"disabled\")) return;\r\n\r\n      var btnPos = $button.offset();\r\n      var btnHeight = $button.innerHeight();\r\n      var btnWidth = $button.innerWidth();\r\n\r\n      $tooltip.addClass(\"active\");\r\n\r\n      var top = 0;\r\n      var left = 0;\r\n\r\n      switch (align) {\r\n        case \"right\":\r\n          top = btnPos.top + ($button.height() - $tooltip.outerHeight()) / 2;\r\n          left = btnPos.left + btnWidth;\r\n          break;\r\n        default:\r\n          top = btnPos.top + btnHeight;\r\n          left = btnPos.left + btnWidth / 2 - $tooltip.innerWidth() / 2;\r\n          break;\r\n      }\r\n      $tooltip.css({\r\n        top: top + \"px\",\r\n        left: left + \"px\",\r\n      });\r\n    });\r\n\r\n    $button.on(\"mouseout\", () => $tooltip.removeClass(\"active\"));\r\n  }\r\n\r\n  setActiveButton(buttonClassName) {\r\n    this.$toolbar\r\n      .find(\"li.\" + buttonClassName)\r\n      .children(\"a\")\r\n      .addClass(\"active\");\r\n  }\r\n\r\n  clearActiveButton() {\r\n    this.$toolbar.find(\"li\").children(\"a\").removeClass(\"active\");\r\n  }\r\n\r\n  remove() {\r\n    if (this.$toolbar) {\r\n      this.$toolbar.remove();\r\n      this.$toolbar = null;\r\n    }\r\n\r\n    if (this.tooltips) {\r\n      this.tooltips.map(($tooltip) => {\r\n        $tooltip.remove();\r\n        $tooltip = null;\r\n        return null;\r\n      });\r\n      this.tooltips = null;\r\n    }\r\n  }\r\n}\r\n", "// (function ($, namespace) {\r\n//   set = function(strings){\r\n//     strings = strings ? strings : {};\r\n//     translations = $.extend(true, translations, strings);\r\n//   };\r\n\r\n//   ;\r\n\r\n//   ;\r\n// })(jQuery, ImagerJs.translations);\r\n\r\nconst translations = {\r\n  \"Incorrect file type\": \"Incorrect file type\",\r\n  Insert: \"Insert\",\r\n  Cancel: \"Cancel\",\r\n  \"Add image\": \"Add image\",\r\n  Quality: \"Quality\",\r\n\r\n  Rotate: \"Rotate\",\r\n  Crop: \"Crop\",\r\n\r\n  Original: \"Original\",\r\n  KB: \"KB\",\r\n  Large: \"Large\",\r\n  Medium: \"Medium\",\r\n  Small: \"Small\",\r\n  \"Custom quality percent\": \"Custom quality percent\",\r\n  Custom: \"Custom\",\r\n\r\n  \"Image properties\": \"Image properties\",\r\n  \"Size:\": \"Size:\",\r\n  \"width in px\": \"width in px\",\r\n  \"height in px\": \"height in px\",\r\n  Left: \"Left\",\r\n  Right: \"Right\",\r\n  Center: \"Center\",\r\n  Inline: \"Inline\",\r\n  Floating: \"Floating\",\r\n  \"Transparent background\": \"Transparent background\",\r\n  Apply: \"Apply\",\r\n  Reject: \"Reject\",\r\n  \"Delete image\": \"Delete image\",\r\n  \"Move image\": \"Move image\",\r\n  \"Are you sure want to delete this image?\":\r\n    \"Are you sure want to delete this image?\",\r\n  \"Or drop files here\": \"Or drop files here\",\r\n  \"No file selected.\": \"No file selected.\",\r\n  \"Please wait...\": \"Please wait...\",\r\n  Save: \"Save\",\r\n  Undo: \"Undo\",\r\n  \"Rotate manually\": \"Rotate manually\",\r\n  \"Rotate 90 left\": \"Rotate 90\u00B0 left\",\r\n  \"Rotate 90 right\": \"Rotate 90\u00B0 left\",\r\n\r\n  \"Image is too big and could cause very poor performance.\":\r\n    \"Image is too big and could cause very poor performance.\",\r\n};\r\n\r\nexport function translate(textString) {\r\n  if (translations[textString]) {\r\n    return translations[textString];\r\n  } else {\r\n    console.warn(\"String not found in texts:\" + textString);\r\n    return textString;\r\n  }\r\n}\r\n", "/**\r\n * This function finds an url from which drawer file was loaded\r\n *\r\n * @function\r\n * @memberof DrawerJs.util\r\n * @returns {*}\r\n */\r\nexport function getDrawerFolderUrl() {\r\n  // try to find a folder from which this script is included\r\n  var scripts = document.getElementsByTagName(\"script\");\r\n  var drawerJsFilenamePattern = /dist\\/(drawer.+\\.js)+$/;\r\n\r\n  for (var i = 0; i < scripts.length; i++) {\r\n    var s = scripts.item(i);\r\n\r\n    if (s.src) {\r\n      var match = s.src.match(drawerJsFilenamePattern);\r\n      if (match) {\r\n        var pathToDrawerFolder = s.src.replace(match[1], \"\");\r\n        return pathToDrawerFolder;\r\n      }\r\n    }\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\n/**\r\n * Removes all click events with specified namespace bound to element.\r\n *\r\n * @param {jQuery} element\r\n * @param {String} namespace\r\n */\r\nexport function unbindClick(element, namespace) {\r\n  var ns = namespace + \"drawerBindClick\";\r\n\r\n  $(element).off(\"click.\" + ns);\r\n  $(element).off(\"touchstart.\" + ns);\r\n  $(element).off(\"touchend.\" + ns);\r\n}\r\n\r\nexport function bindClick(element, namespace, handler) {\r\n  var ns = namespace + \"drawerBindClick\";\r\n\r\n  $(element).on(\"click.\" + ns, function (event) {\r\n    var elem = this;\r\n    var result = null;\r\n\r\n    if (elem.__lastClickTime) {\r\n      var lastClickDiff = Date.now() - elem.__lastClickTime;\r\n      if (lastClickDiff > 500) {\r\n        result = handler.apply(elem, [event]);\r\n        if (result === false) {\r\n          event.stopPropagation();\r\n          event.preventDefault();\r\n          return false;\r\n        }\r\n      } else {\r\n        // seems that we have already triggered this click on touchend event\r\n      }\r\n    } else {\r\n      result = handler.apply(elem, [event]);\r\n      if (result === false) {\r\n        event.stopPropagation();\r\n        event.preventDefault();\r\n        return false;\r\n      }\r\n    }\r\n  });\r\n  $(element).on(\"touchstart.\" + ns, function (event) {\r\n    var elem = this;\r\n\r\n    elem.__drawerTouchStartEvent = event;\r\n\r\n    // disable click entirely since we do everything with touch events\r\n    $(element).off(\"click.\" + ns);\r\n  });\r\n  $(element).on(\"touchend.\" + ns, function (event) {\r\n    var elem = this;\r\n\r\n    if (elem.__drawerTouchStartEvent) {\r\n      var tsDiff = Math.abs(\r\n        elem.__drawerTouchStartEvent.timeStamp - event.timeStamp\r\n      );\r\n\r\n      if (tsDiff < 300) {\r\n        elem.__lastClickTime = Date.now();\r\n        var result = handler.apply(elem, [event]);\r\n        if (result === false) {\r\n          event.stopPropagation();\r\n          event.preventDefault();\r\n          return false;\r\n        }\r\n      }\r\n      delete elem.__drawerTouchStartEvent;\r\n    }\r\n  });\r\n}\r\n\r\nexport function bindDoubleTap(element, namespace, handler) {\r\n  var timeWindow = 500;\r\n  var positionWindow = 20;\r\n\r\n  $(element).on(\"touchend.\" + namespace, function (event) {\r\n    var eventElem = this;\r\n    if (eventElem.__touchEndTime) {\r\n      var diff = Date.now() - eventElem.__touchEndTime;\r\n      var xDiff = Math.abs(eventElem.__touchEndX - event.originalEvent.pageX);\r\n      var yDiff = Math.abs(eventElem.__touchEndY - event.originalEvent.pageY);\r\n\r\n      if (\r\n        diff < timeWindow &&\r\n        xDiff < positionWindow &&\r\n        yDiff < positionWindow\r\n      ) {\r\n        delete eventElem.__touchEndTime;\r\n        delete eventElem.__touchEndX;\r\n        delete eventElem.__touchEndY;\r\n        var result = handler.apply(eventElem, [event]);\r\n        if (result === false) {\r\n          event.stopPropagation();\r\n          event.preventDefault();\r\n          return false;\r\n        }\r\n      } else {\r\n        delete eventElem.__touchEndTime;\r\n        delete eventElem.__touchEndX;\r\n        delete eventElem.__touchEndY;\r\n      }\r\n    } else {\r\n      eventElem.__touchEndTime = Date.now();\r\n      eventElem.__touchEndX = event.originalEvent.pageX;\r\n      eventElem.__touchEndY = event.originalEvent.pageY;\r\n      setTimeout(function () {\r\n        delete eventElem.__touchEndTime;\r\n        delete eventElem.__touchEndX;\r\n        delete eventElem.__touchEndY;\r\n      }, timeWindow);\r\n    }\r\n  });\r\n}\r\n\r\nexport function bindLongPress(element, namespace, handler) {\r\n  var logTag = \"drawerBindLongPress\";\r\n  var ns = namespace + logTag;\r\n\r\n  $(element).on(\"touchstart.\" + ns, function (event) {\r\n    var elem = this;\r\n\r\n    elem.__touchStartTime = Date.now();\r\n    elem.__touchStartX = event.originalEvent.pageX;\r\n    elem.__touchStartY = event.originalEvent.pageY;\r\n\r\n    if (elem.__longPressCheckTimeout) {\r\n      clearTimeout(elem.__longPressCheckTimeout);\r\n    }\r\n\r\n    var cleanHandlers = function () {\r\n      delete elem.__touchStartTime;\r\n      delete elem.__touchStartX;\r\n      delete elem.__touchStartY;\r\n\r\n      $(elem).off(\"touchmove.\" + ns);\r\n      $(elem).off(\"touchend.\" + ns);\r\n    };\r\n\r\n    $(elem).on(\"touchmove.\" + ns, function (moveEvent) {\r\n      if (elem.__touchStartTime) {\r\n        var xDiff = Math.abs(\r\n          elem.__touchStartX - moveEvent.originalEvent.pageX\r\n        );\r\n        var yDiff = Math.abs(\r\n          elem.__touchStartY - moveEvent.originalEvent.pageY\r\n        );\r\n\r\n        if (xDiff > 10 || yDiff > 10) {\r\n          cleanHandlers();\r\n        }\r\n      }\r\n    });\r\n\r\n    $(elem).on(\"touchend.\" + ns, function (endEvent) {\r\n      cleanHandlers();\r\n    });\r\n\r\n    elem.__longPressCheckTimeout = setTimeout(function () {\r\n      if (elem.__touchStartTime) {\r\n        cleanHandlers();\r\n        var result = handler.apply(elem, [event]);\r\n      }\r\n    }, 1000);\r\n\r\n    return true;\r\n  });\r\n}\r\n\r\nexport function unbindLongPress(element, namespace) {\r\n  var logTag = \"drawerBindLongPress\";\r\n  var ns = namespace + logTag;\r\n\r\n  $(element).off(\"touchstart.\" + ns);\r\n  $(element).off(\"touchmove.\" + ns);\r\n  $(element).off(\"touchend.\" + ns);\r\n}\r\n\r\nexport function mouseDown(namespace) {\r\n  return \"mousedown.\" + namespace + \" touchstart.\" + namespace;\r\n}\r\n\r\nexport function mouseMove(namespace) {\r\n  return \"mousemove.\" + namespace + \" touchmove.\" + namespace;\r\n}\r\n\r\nexport function mouseUp(namespace) {\r\n  return \"mouseup.\" + namespace + \" touchend.\" + namespace;\r\n}\r\n\r\nexport function getTransitionDuration(el, with_delay) {\r\n  var style = window.getComputedStyle(el),\r\n    duration = style.webkitTransitionDuration,\r\n    delay = style.webkitTransitionDelay;\r\n\r\n  // fix miliseconds vs seconds\r\n  duration =\r\n    duration.indexOf(\"ms\") > -1\r\n      ? parseFloat(duration)\r\n      : parseFloat(duration) * 1000;\r\n  delay =\r\n    delay.indexOf(\"ms\") > -1 ? parseFloat(delay) : parseFloat(delay) * 1000;\r\n\r\n  if (with_delay) return duration + delay;\r\n  else return duration;\r\n}\r\n\r\nexport function getEventPosition(event) {\r\n  if (event.type.indexOf(\"touch\") > -1) {\r\n    event = event.originalEvent;\r\n\r\n    if (\r\n      (event.pageX === 0 && event.pageY === 0) ||\r\n      (event.pageX === undefined &&\r\n        event.pageY === undefined &&\r\n        event.touches.length > 0)\r\n    ) {\r\n      return {\r\n        left: event.touches[0].pageX,\r\n        top: event.touches[0].pageY,\r\n      };\r\n    }\r\n  }\r\n\r\n  return {\r\n    left: event.pageX,\r\n    top: event.pageY,\r\n  };\r\n}\r\n\r\nexport function isShape(fabricObject) {\r\n  var isShape = false;\r\n\r\n  if (\r\n    fabricObject.type &&\r\n    (fabricObject.type == \"line\" || fabricObject.type == \"arrow\")\r\n  ) {\r\n    isShape = false;\r\n  } else if (fabricObject.path) {\r\n    // free drawing shape\r\n    isShape = false;\r\n  } else {\r\n    isShape = true;\r\n  }\r\n\r\n  return isShape;\r\n}\r\n\r\nlet __temporaryCanvas = null;\r\n\r\nexport function getTemporaryCanvas(originalCanvas) {\r\n  if (!__temporaryCanvas) {\r\n    __temporaryCanvas = document.createElement(\"canvas\");\r\n  }\r\n\r\n  __temporaryCanvas.setAttribute(\"width\", originalCanvas.width);\r\n  __temporaryCanvas.setAttribute(\"height\", originalCanvas.height);\r\n\r\n  return __temporaryCanvas;\r\n}\r\n\r\nexport function LastCoordsQueue() {\r\n  this.coordsQueue = [];\r\n  this.length = 10;\r\n\r\n  this.pushCoords = function (x, y) {\r\n    if (this.coordsQueue.length > this.length) {\r\n      this.coordsQueue = this.coordsQueue.slice(\r\n        this.coordsQueue.length - this.length\r\n      );\r\n    }\r\n\r\n    this.coordsQueue.push({ x: x, y: y });\r\n  };\r\n\r\n  this.getInterpolatedValues = function () {\r\n    if (this.coordsQueue.length === 0) {\r\n      return [];\r\n    }\r\n\r\n    if (this.coordsQueue.length === 1) {\r\n      return [{ x: this.coordsQueue[0].x, y: this.coordsQueue[0].y }];\r\n    }\r\n\r\n    var interpolatedCoords = [];\r\n\r\n    var prevX = this.coordsQueue[this.coordsQueue.length - 2].x;\r\n    var prevY = this.coordsQueue[this.coordsQueue.length - 2].y;\r\n\r\n    var currX = this.coordsQueue[this.coordsQueue.length - 1].x;\r\n    var currY = this.coordsQueue[this.coordsQueue.length - 1].y;\r\n\r\n    var xDiff = currX - prevX;\r\n    var yDiff = currY - prevY;\r\n\r\n    var xDiffAbs = Math.abs(xDiff);\r\n    var yDiffAbs = Math.abs(yDiff);\r\n\r\n    var iterations = xDiffAbs > yDiffAbs ? xDiffAbs : yDiffAbs;\r\n\r\n    for (var ii = 0; ii < iterations; ii++) {\r\n      interpolatedCoords.push({\r\n        x: prevX + (xDiff / iterations) * ii,\r\n        y: prevY + (yDiff / iterations) * ii,\r\n      });\r\n    }\r\n\r\n    return interpolatedCoords;\r\n  };\r\n}\r\n\r\nexport function setWaiting(element, text, cursor) {\r\n  if (!cursor) {\r\n    cursor = \"wait\";\r\n  }\r\n\r\n  setOverlayMessage(element, text, cursor);\r\n}\r\n\r\nexport function stopWaiting(element) {\r\n  removeOverlayMessage(element);\r\n}\r\n\r\n/**\r\n * Adds overlay with a text message to container\r\n *\r\n * @param {HTMLElement} element\r\n * @param {string} text\r\n * @param {string} cursor\r\n * @param {string} [actionButtonText] If provided, a button will be shown\r\n * @param {Function} [actionButtonClickHandler]\r\n */\r\nexport function setOverlayMessage(\r\n  element,\r\n  text,\r\n  cursor,\r\n  actionButtonText,\r\n  actionButtonClickHandler\r\n) {\r\n  if (!cursor) {\r\n    cursor = \"default\";\r\n  }\r\n\r\n  var actionButton = actionButtonText\r\n    ? '<div class=\"action-button\">' + actionButtonText + \"</div>\"\r\n    : \"\";\r\n\r\n  $(element).append(\r\n    '<div class=\"overlay-message-wrapper\">' +\r\n      '<div class=\"overlay-message\">' +\r\n      text +\r\n      actionButton +\r\n      \"</div>\" +\r\n      \"</div>\"\r\n  );\r\n\r\n  $(element).find(\".overlay-message-wrapper\").css(\"cursor\", cursor);\r\n\r\n  bindClick(\r\n    $(element).find(\".action-button\"),\r\n    \"overlay-message-click\",\r\n    actionButtonClickHandler\r\n  );\r\n}\r\n\r\nexport function removeOverlayMessage(element) {\r\n  $(element).find(\".overlay-message-wrapper\").remove();\r\n}\r\n\r\n/**\r\n * Performs image resize using Hermite filter.\r\n *\r\n * https://github.com/viliusle/Hermite-resize\r\n *\r\n * @param canvas\r\n * @param W width\r\n * @param H height\r\n * @param W2 resized width\r\n * @param H2 resized height\r\n */\r\nexport function resizeImage(canvas, W, H, W2, H2) {\r\n  var time1 = Date.now();\r\n  W2 = Math.round(W2);\r\n  H2 = Math.round(H2);\r\n  var img = canvas.getContext(\"2d\").getImageData(0, 0, W, H);\r\n  var img2 = canvas.getContext(\"2d\").getImageData(0, 0, W2, H2);\r\n  var data = img.data;\r\n  var data2 = img2.data;\r\n  var ratio_w = W / W2;\r\n  var ratio_h = H / H2;\r\n  var ratio_w_half = Math.ceil(ratio_w / 2);\r\n  var ratio_h_half = Math.ceil(ratio_h / 2);\r\n\r\n  for (var j = 0; j < H2; j++) {\r\n    for (var i = 0; i < W2; i++) {\r\n      var x2 = (i + j * W2) * 4;\r\n      var weight = 0;\r\n      var weights = 0;\r\n      var weights_alpha = 0;\r\n\r\n      var gx_r = 0,\r\n        gx_g = 0,\r\n        gx_b = 0,\r\n        gx_a = 0;\r\n\r\n      var center_y = (j + 0.5) * ratio_h;\r\n      for (var yy = Math.floor(j * ratio_h); yy < (j + 1) * ratio_h; yy++) {\r\n        var dy = Math.abs(center_y - (yy + 0.5)) / ratio_h_half;\r\n        var center_x = (i + 0.5) * ratio_w;\r\n        var w0 = dy * dy; //pre-calc part of w\r\n        for (var xx = Math.floor(i * ratio_w); xx < (i + 1) * ratio_w; xx++) {\r\n          var dx = Math.abs(center_x - (xx + 0.5)) / ratio_w_half;\r\n          var w = Math.sqrt(w0 + dx * dx);\r\n          if (w >= -1 && w <= 1) {\r\n            //hermite filter\r\n            weight = 2 * w * w * w - 3 * w * w + 1;\r\n            if (weight > 0) {\r\n              dx = 4 * (xx + yy * W);\r\n              //alpha\r\n              gx_a += weight * data[dx + 3];\r\n              weights_alpha += weight;\r\n              //colors\r\n              if (data[dx + 3] < 255) weight = (weight * data[dx + 3]) / 250;\r\n              gx_r += weight * data[dx];\r\n              gx_g += weight * data[dx + 1];\r\n              gx_b += weight * data[dx + 2];\r\n              weights += weight;\r\n            }\r\n          }\r\n        }\r\n      }\r\n      data2[x2] = gx_r / weights;\r\n      data2[x2 + 1] = gx_g / weights;\r\n      data2[x2 + 2] = gx_b / weights;\r\n      data2[x2 + 3] = gx_a / weights_alpha;\r\n    }\r\n  }\r\n  //console.log(\"hermite = \" + (Math.round(Date.now() - time1) / 1000) + \" s\");\r\n  canvas.getContext(\"2d\").clearRect(0, 0, Math.max(W, W2), Math.max(H, H2));\r\n  canvas.width = W2;\r\n  canvas.height = H2;\r\n  canvas.getContext(\"2d\").putImageData(img2, 0, 0);\r\n}\r\n", "import { translate } from \"../../Translations\";\r\nimport * as util from \"../../util/Util\";\r\nimport './Crop.css';\r\n\r\nconst MOUSE_DOWN = util.mouseDown(\"imagerjsCrop\");\r\nconst MOUSE_UP = util.mouseUp(\"imagerjsCrop\");\r\nconst MOUSE_MOVE = util.mouseMove(\"imagerjsCrop\");\r\n\r\n/**\r\n * Cropping plugin. Provides a button which allows to enter in\r\n * cropping mode and select image area to crop.\r\n *\r\n * @param imagerInstance\r\n *\r\n * @param options {Object} Cropping controls options.\r\n * @param options.controlsCss {Object} Css properties that will be applied to\r\n * cropping controls.\r\n *\r\n * @param options.controlsTouchCss {Object} Css properties that will\r\n * be applied to cropping controls when on touch device.\r\n *\r\n * @constructor\r\n * @memberof ImagerJs.plugins\r\n */\r\nexport default class CropPlugin {\r\n  constructor(imagerInstance, options) {\r\n    this.weight = 0;\r\n\r\n    this.imager = imagerInstance;\r\n\r\n    this.defaultOptions = {\r\n      controlsCss: {},\r\n      controlsTouchCss: {},\r\n    };\r\n\r\n    options = options ? options : {};\r\n    this.options = $.extend(true, this.defaultOptions, options);\r\n\r\n    this.originalWidth = null;\r\n    this.originalHeight = null;\r\n\r\n    this.croppedWidth = null;\r\n    this.croppedHeight = null;\r\n    this.croppedLeft = null;\r\n    this.croppedTop = null;\r\n  }\r\n\r\n  getButtons() {\r\n    return [\r\n      {\r\n        classes: \"btn-crop\",\r\n        iconClasses: \"fa-scissors\",\r\n        tooltip: translate(\"Crop\"),\r\n        enabledHandler: () =>  {\r\n          if (this.sizeBeforeCrop) {\r\n            this.imager.setPreviewSize(\r\n              this.sizeBeforeCrop.width,\r\n              this.sizeBeforeCrop.height\r\n            );\r\n          }\r\n\r\n          this.enableRendering = false;\r\n\r\n          this.imager.render();\r\n\r\n          this.startCropping();\r\n        },\r\n\r\n        applyHandler: () =>  {\r\n          this.sizeBeforeCrop = this.imager.getPreviewSize();\r\n\r\n          this.stopCropping();\r\n          this.enableRendering = true;\r\n\r\n          this.imager.setPreviewSize(this.croppedWidth, this.croppedHeight);\r\n\r\n          this.imager.setWaiting(true);\r\n\r\n          setTimeout(() =>  {\r\n            this.imager.commitChanges(\"Crop\");\r\n            this.reset();\r\n            this.imager.render();\r\n\r\n            this.imager.setWaiting(false);\r\n          }, 50);\r\n        },\r\n        rejectHandler: () =>  {\r\n          this.stopCropping();\r\n\r\n          this.croppedWidth = null;\r\n          this.croppedHeight = null;\r\n          this.croppedLeft = null;\r\n          this.croppedTop = null;\r\n\r\n          this.imager.render();\r\n        },\r\n      },\r\n    ];\r\n  }\r\n\r\n  startCropping() {\r\n    // show original image to user when cropping mode is on\r\n    this.renderCropped = false;\r\n    this.imager.render();\r\n\r\n    const $body = $(\"body\");\r\n\r\n    var previewSize = this.imager.getPreviewSize();\r\n    this.originalWidth = previewSize.width;\r\n    this.originalHeight = previewSize.height;\r\n\r\n    this.makePreview();\r\n\r\n    this.$cropControls = $(\r\n      '<div class=\"imager-crop-container\">' +\r\n        '<div class=\"crop-corner crop-top-left\"></div>' +\r\n        '<div class=\"crop-corner crop-top-right\"></div>' +\r\n        '<div class=\"crop-corner crop-bottom-right\"></div>' +\r\n        '<div class=\"crop-corner crop-bottom-left\"></div>' +\r\n        '<div class=\"crop-border crop-border-top\"></div>' +\r\n        '<div class=\"crop-border crop-border-right\"></div>' +\r\n        '<div class=\"crop-border crop-border-bottom\"></div>' +\r\n        '<div class=\"crop-border crop-border-left\"></div>' +\r\n        \"</div>\"\r\n    ).css({\r\n      width: this.croppedWidth ? this.croppedWidth : this.originalWidth,\r\n      height: this.croppedHeight ? this.croppedHeight : this.originalHeight,\r\n      left: this.croppedLeft ? this.croppedLeft : 0,\r\n      top: this.croppedTop ? this.croppedTop : 0,\r\n    });\r\n\r\n    this.imager.$editContainer.append(this.$cropControls);\r\n    var $selection = this.$cropControls;\r\n    var $corners = $selection.find(\".crop-corner\");\r\n\r\n    if (this.imager.touchDevice) {\r\n      $corners.css(this.options.controlsTouchCss);\r\n    } else {\r\n      $corners.css(this.options.controlsCss);\r\n    }\r\n\r\n    const handleCropSelectionChanges = () => {\r\n      this.$cropControls.css({\r\n        left: this.croppedLeft,\r\n        top: this.croppedTop,\r\n        width: this.croppedWidth,\r\n        height: this.croppedHeight,\r\n      });\r\n\r\n      this.adjustPreview();\r\n    }\r\n\r\n    $corners.on(MOUSE_DOWN, (clickEvent) => {\r\n      clickEvent.stopPropagation();\r\n      var controlItem = clickEvent.target;\r\n\r\n      var startPos = util.getEventPosition(clickEvent);\r\n\r\n      var startControlsLeft =\r\n        this.$cropControls.css(\"left\").replace(\"px\", \"\") | 0;\r\n      var startControlsTop =\r\n        this.$cropControls.css(\"top\").replace(\"px\", \"\") | 0;\r\n\r\n      var startControlsWidth =\r\n        this.$cropControls.css(\"width\").replace(\"px\", \"\") | 0;\r\n      var startControlsHeight =\r\n        this.$cropControls.css(\"height\").replace(\"px\", \"\") | 0;\r\n\r\n      $body.on(MOUSE_MOVE, (moveEvent) => {\r\n        var movePos = util.getEventPosition(moveEvent);\r\n\r\n        var diffLeft = movePos.left - startPos.left;\r\n        var diffTop = movePos.top - startPos.top;\r\n\r\n        // bounds validation\r\n        const validateBounds = () => {\r\n          if (this.croppedLeft < 0) {\r\n            this.croppedLeft = 0;\r\n          }\r\n\r\n          if (this.croppedTop < 0) {\r\n            this.croppedTop = 0;\r\n          }\r\n\r\n          if (this.croppedLeft + this.croppedWidth > this.originalWidth) {\r\n            this.croppedWidth = this.originalWidth - this.croppedLeft;\r\n          }\r\n\r\n          if (this.croppedTop + this.croppedHeight > this.originalHeight) {\r\n            this.croppedHeight = this.originalHeight - this.croppedTop;\r\n          }\r\n        }\r\n\r\n        if ($(controlItem).hasClass(\"crop-top-left\")) {\r\n          this.croppedLeft = startControlsLeft + diffLeft;\r\n          this.croppedTop = startControlsTop + diffTop;\r\n\r\n          this.croppedWidth = startControlsWidth - diffLeft;\r\n          this.croppedHeight = startControlsHeight - diffTop;\r\n\r\n          if (moveEvent.shiftKey) {\r\n            validateBounds();\r\n            if (this.croppedHeight < this.croppedWidth) {\r\n              this.croppedWidth = this.croppedHeight;\r\n              this.croppedLeft =\r\n                startControlsWidth - this.croppedHeight + startControlsLeft;\r\n            } else {\r\n              this.croppedHeight = this.croppedWidth;\r\n              this.croppedTop =\r\n                startControlsHeight - this.croppedWidth + startControlsTop;\r\n            }\r\n          }\r\n        }\r\n\r\n        if ($(controlItem).hasClass(\"crop-top-right\")) {\r\n          this.croppedLeft = startControlsLeft;\r\n          this.croppedTop = startControlsTop + diffTop;\r\n\r\n          this.croppedWidth = startControlsWidth - diffLeft * -1;\r\n          this.croppedHeight = startControlsHeight - diffTop;\r\n\r\n          if (moveEvent.shiftKey) {\r\n            validateBounds();\r\n            if (this.croppedHeight < this.croppedWidth) {\r\n              this.croppedWidth = this.croppedHeight;\r\n            } else {\r\n              this.croppedHeight = this.croppedWidth;\r\n              this.croppedTop =\r\n                startControlsHeight - this.croppedHeight + startControlsTop;\r\n            }\r\n          }\r\n        }\r\n\r\n        if ($(controlItem).hasClass(\"crop-bottom-right\")) {\r\n          this.croppedLeft = startControlsLeft;\r\n          this.croppedTop = startControlsTop;\r\n\r\n          this.croppedWidth = startControlsWidth - diffLeft * -1;\r\n          this.croppedHeight = startControlsHeight + diffTop;\r\n\r\n          if (moveEvent.shiftKey) {\r\n            validateBounds();\r\n            if (this.croppedHeight < this.croppedWidth) {\r\n              this.croppedWidth = this.croppedHeight;\r\n            } else {\r\n              this.croppedHeight = this.croppedWidth;\r\n            }\r\n          }\r\n        }\r\n\r\n        if ($(controlItem).hasClass(\"crop-bottom-left\")) {\r\n          this.croppedLeft = startControlsLeft + diffLeft;\r\n          this.croppedTop = startControlsTop;\r\n\r\n          this.croppedWidth = startControlsWidth - diffLeft;\r\n          this.croppedHeight = startControlsHeight + diffTop;\r\n\r\n          if (moveEvent.shiftKey) {\r\n            validateBounds();\r\n            if (this.croppedHeight < this.croppedWidth) {\r\n              this.croppedWidth = this.croppedHeight;\r\n              this.croppedLeft =\r\n                startControlsLeft + (startControlsWidth - this.croppedWidth);\r\n            } else {\r\n              this.croppedHeight = this.croppedWidth;\r\n            }\r\n          }\r\n        }\r\n\r\n        validateBounds();\r\n\r\n        handleCropSelectionChanges();\r\n\r\n        moveEvent.preventDefault();\r\n        moveEvent.stopPropagation();\r\n        return false;\r\n      });\r\n\r\n      $body.on(MOUSE_UP, () =>  {\r\n        $body.off(MOUSE_MOVE);\r\n        $body.off(MOUSE_UP);\r\n      });\r\n    });\r\n\r\n    $selection.on(MOUSE_DOWN,  (clickEvent) => {\r\n      var startPos = util.getEventPosition(clickEvent);\r\n\r\n      var startControlsLeft =\r\n        this.$cropControls.css(\"left\").replace(\"px\", \"\") | 0;\r\n      var startControlsTop =\r\n        this.$cropControls.css(\"top\").replace(\"px\", \"\") | 0;\r\n\r\n      $body.on(MOUSE_MOVE, (moveEvent) => {\r\n        var movePos = util.getEventPosition(moveEvent);\r\n\r\n        var diffLeft = movePos.left - startPos.left;\r\n        var diffTop = movePos.top - startPos.top;\r\n\r\n        this.croppedLeft = startControlsLeft + diffLeft;\r\n        this.croppedTop = startControlsTop + diffTop;\r\n\r\n        // bounds validation\r\n        if (this.croppedLeft < 0) {\r\n          this.croppedLeft = 0;\r\n        }\r\n        if (this.croppedTop < 0) {\r\n          this.croppedTop = 0;\r\n        }\r\n        if (this.croppedLeft + this.croppedWidth > this.originalWidth) {\r\n          this.croppedLeft = this.originalWidth - this.croppedWidth;\r\n        }\r\n        if (this.croppedTop + this.croppedHeight > this.originalHeight) {\r\n          this.croppedTop = this.originalHeight - this.croppedHeight;\r\n        }\r\n\r\n        handleCropSelectionChanges();\r\n\r\n        moveEvent.preventDefault();\r\n        moveEvent.stopPropagation();\r\n        return false;\r\n      });\r\n\r\n      $body.on(MOUSE_UP, () =>  {\r\n        $body.off(MOUSE_MOVE);\r\n        $body.off(MOUSE_UP);\r\n      });\r\n    });\r\n  }\r\n\r\n  stopCropping() {\r\n    this.$preview.remove();\r\n    this.$preview = null;\r\n\r\n    this.$cropControls.remove();\r\n    this.$cropControls = null;\r\n\r\n    this.renderCropped = true;\r\n  }\r\n\r\n  makePreview() {\r\n    var originalPreviewSize = this.imager.getPreviewSize();\r\n\r\n    this.$preview = $(\r\n      \"\" +\r\n        '<div class=\"imager-crop-preview-container\">' +\r\n        '<canvas class=\"imager-crop-preview\"></canvas>' +\r\n        \"</div>\"\r\n    )\r\n      .css(\"position\", \"absolute\")\r\n      .css(\"top\", \"50px\")\r\n      .css({\r\n        width: originalPreviewSize.width,\r\n        height: originalPreviewSize.height,\r\n        position: \"absolute\",\r\n        right: \"50px\",\r\n        top: \"50px\",\r\n      });\r\n\r\n    this.previewCanvas = this.$preview.find(\"canvas.imager-crop-preview\")[0];\r\n    this.previewCanvas.__previewCanvas = true;\r\n\r\n    this.previewCanvas.width = originalPreviewSize.width * 1.5;\r\n    this.previewCanvas.height = originalPreviewSize.height * 1.5;\r\n\r\n    $(this.previewCanvas).css({\r\n      height: \"400px\",\r\n    });\r\n\r\n    this.imager.$editContainer.after(this.$preview);\r\n  }\r\n\r\n  adjustPreview() {\r\n    //this.$preview.find('canvas').css({\r\n    //  width: this.croppedWidth,\r\n    //  height: this.croppedHeight//,\r\n    //  //left: this.croppedLeft,\r\n    //  //top: this.croppedTop\r\n    //});\r\n    //\r\n    //this.previewCanvas.width = this.croppedWidth * 1.5;\r\n    //this.previewCanvas.height = this.croppedHeight * 1.5;\r\n  }\r\n\r\n  render(ctx) {\r\n    if (this.croppedWidth === null || !this.enableRendering) {\r\n      return;\r\n    }\r\n\r\n    var previewSize = this.imager.getPreviewSize();\r\n\r\n    var previewWidth = previewSize.width;\r\n    var previewHeight = previewSize.height;\r\n\r\n    if (this.sizeBeforeCrop) {\r\n      previewWidth = this.sizeBeforeCrop.width;\r\n      previewHeight = this.sizeBeforeCrop.height;\r\n    }\r\n\r\n    var tempCtx = this.imager.tempCanvas.getContext(\"2d\");\r\n\r\n    // firstly find selection size in global coordinate syztem and scale\r\n    var scaledWidth = this.imager.convertScale(\r\n      this.croppedWidth,\r\n      previewWidth,\r\n      ctx.canvas.width\r\n    );\r\n    var scaledHeight = this.imager.convertScale(\r\n      this.croppedHeight,\r\n      previewHeight,\r\n      ctx.canvas.height\r\n    );\r\n\r\n    var left = this.imager.convertScale(\r\n      this.croppedLeft,\r\n      previewWidth,\r\n      ctx.canvas.width\r\n    );\r\n    var top = this.imager.convertScale(\r\n      this.croppedTop,\r\n      previewHeight,\r\n      ctx.canvas.height\r\n    );\r\n\r\n    left *= -1;\r\n    top *= -1;\r\n\r\n    // then calculate the difference to know how to translate temporary canvas\r\n    var widthDiff = ctx.canvas.width - scaledWidth;\r\n    var heightDiff = ctx.canvas.height - scaledHeight;\r\n\r\n    tempCtx.canvas.width = scaledWidth;\r\n    tempCtx.canvas.height = scaledHeight;\r\n\r\n    tempCtx.clearRect(0, 0, tempCtx.canvas.width, tempCtx.canvas.height);\r\n\r\n    tempCtx.drawImage(\r\n      ctx.canvas,\r\n      0,\r\n      0,\r\n      ctx.canvas.width,\r\n      ctx.canvas.height,\r\n      left,\r\n      top,\r\n      tempCtx.canvas.width + widthDiff,\r\n      tempCtx.canvas.height + heightDiff\r\n    );\r\n\r\n    ctx.canvas.width = scaledWidth;\r\n    ctx.canvas.height = scaledHeight;\r\n\r\n    this.imager.clearCanvas(ctx);\r\n    ctx.drawImage(\r\n      tempCtx.canvas,\r\n      0,\r\n      0,\r\n      tempCtx.canvas.width,\r\n      tempCtx.canvas.height,\r\n      0,\r\n      0,\r\n      ctx.canvas.width,\r\n      ctx.canvas.height\r\n    );\r\n  }\r\n\r\n  onToolSelected(btn) {\r\n    if (btn.plugin.constructor.name == \"RotatePlugin\") {\r\n      this.croppedLeft = null;\r\n      this.croppedTop = null;\r\n      this.croppedWidth = null;\r\n      this.croppedHeight = null;\r\n\r\n      this.sizeBeforeCrop = null;\r\n    }\r\n  }\r\n\r\n  deserialize(savedState) {\r\n    if (savedState) {\r\n      this.croppedLeft = croppedLeft;\r\n      this.croppedTop = croppedTop;\r\n      this.croppedWidth = croppedWidth;\r\n      this.croppedHeight = croppedHeight;\r\n      this.sizeBeforeCrop = sizeBeforeCrop;\r\n    }\r\n  }\r\n\r\n  serialize() {\r\n    return {\r\n      croppedLeft: this.croppedLeft,\r\n      croppedTop: this.croppedTop,\r\n      croppedWidth: this.croppedWidth,\r\n      croppedHeight: this.croppedHeight,\r\n      sizeBeforeCrop: this.sizeBeforeCrop,\r\n    };\r\n  }\r\n\r\n  reset() {\r\n    this.croppedLeft = null;\r\n    this.croppedTop = null;\r\n    this.croppedWidth = null;\r\n    this.croppedHeight = null;\r\n\r\n    this.sizeBeforeCrop = null;\r\n  }\r\n}\r\n", "import \"./Delete.css\";\r\nimport { translate } from \"../../Translations\";\r\n\r\n/**\r\n * This plugin provides a button that will remove image & editing controls\r\n * from it.\r\n *\r\n * @param {ImagerJs} imagerInstance\r\n * @param {Object} options\r\n * @param {boolean} [options.fullRemove=false] Whether to fully remove imager.\r\n * If true, everything will be removed from DOM.\r\n * If false, a selector for new image will be left\r\n *\r\n * @constructor\r\n *\r\n * @memberof ImagerJs.progins\r\n */\r\nexport default class DeletePlugin {\r\n  constructor(imagerInstance, options) {\r\n    /**\r\n     *\r\n     * @type {ImagerJs}\r\n     */\r\n    this.imager = imagerInstance;\r\n\r\n    this.defaultOptions = {\r\n      fullRemove: false,\r\n    };\r\n\r\n    options = options ? options : {};\r\n    this.options = $.extend(true, this.defaultOptions, options);\r\n\r\n    this.weight = 500;\r\n  }\r\n\r\n  getButtons() {\r\n    return [\r\n      {\r\n        classes: \"btn-delete\",\r\n        iconClasses: \"fa-times\",\r\n        tooltip: translate(\"Delete image\"),\r\n        enabledHandler: (toolbar) => {\r\n          var question = translate(\"Are you sure want to delete this image?\");\r\n          var response = confirm(question);\r\n          if (response) {\r\n            this.imager.setWaiting(true);\r\n\r\n            setTimeout(() => {\r\n              if (this.options.fullRemove) {\r\n                this.imager.remove(true);\r\n              } else {\r\n                this.imager.stopEditing();\r\n                this.imager.$imageElement.attr(\"src\", \"\");\r\n\r\n                this.imager.startSelector();\r\n                this.imager.adjustEditContainer();\r\n              }\r\n            }, 1);\r\n          }\r\n        },\r\n      },\r\n    ];\r\n  }\r\n}\r\n", "import { mouseDown, mouseMove, mouseUp } from \"../../util/Util\";\r\nimport \"./Properties.css\";\r\nimport { translate } from \"../../Translations\";\r\n\r\nconst MOUSE_DOWN = mouseDown(\"MovableFloatingMode\");\r\nconst MOUSE_MOVE = mouseMove(\"MovableFloatingMode\");\r\nconst MOUSE_UP = mouseUp(\"MovableFloatingMode\");\r\n\r\n/**\r\n * Provides a button which shows modal window with image properties line\r\n * aligment and size.\r\n *\r\n * @param imagerInstance\r\n * @param options\r\n * @constructor\r\n */\r\nexport default class PropertiesPlugin {\r\n  constructor(imagerInstance, options) {\r\n    this.imager = imagerInstance;\r\n\r\n    this.defaultOptions = {\r\n      minWidth: 50,\r\n      minHeight: 50,\r\n    };\r\n\r\n    options = options ? options : {};\r\n    this.options = $.extend(true, this.defaultOptions, options);\r\n\r\n    this.weight = 100;\r\n\r\n    this.imager.log(\"[PropertiesPlugin]\", \"init\");\r\n  }\r\n\r\n  getButtons() {\r\n    return [\r\n      {\r\n        classes: \"btn-properties\",\r\n        iconClasses: \"fa-cog\",\r\n        tooltip: translate(\"Image properties\"),\r\n        enabledHandler: () => this.showPropertiesModal(),\r\n      },\r\n    ];\r\n  }\r\n\r\n  showPropertiesModal() {\r\n    var modal = new Modal();\r\n    modal.setTitle(translate(\"Image properties\"));\r\n    modal.addClass(\"canvas-properties imager-click-stop\");\r\n\r\n    var $template = $(\r\n      '<div class=\"image-properties\">' +\r\n        '<form class=\"image-size-form\"><div class=\"form-group\">' +\r\n        '<label for=\"image-properties-width\">' +\r\n        translate(\"Size:\") +\r\n        \" \" +\r\n        \"</label>\" +\r\n        '<input type=\"text\" class=\"form-control\" ' +\r\n        'id=\"image-properties-width\" ' +\r\n        'placeholder=\"' +\r\n        translate(\"width in px\") +\r\n        '\">' +\r\n        \"<span>x</span>\" +\r\n        '<input type=\"email\" class=\"form-control\" ' +\r\n        'id=\"image-properties-height\" ' +\r\n        'placeholder=\"' +\r\n        translate(\"height in px\") +\r\n        '\">' +\r\n        \"</div></form>\" +\r\n        \"<br>\" +\r\n        '<form class=\"aligment\"><div class=\"form-group\">' +\r\n        '<label for=\"image-properties-layout\">Aligment:</label>' +\r\n        '<select id=\"image-properties-layout\" ' +\r\n        'class=\"form-control layout-selector\">' +\r\n        '<option value=\"left\">' +\r\n        translate(\"Left\") +\r\n        \"</option>\" +\r\n        '<option value=\"right\">' +\r\n        translate(\"Right\") +\r\n        \"</option>\" +\r\n        '<option value=\"center\">' +\r\n        translate(\"Center\") +\r\n        \"</option>\" +\r\n        '<option value=\"inline\">' +\r\n        translate(\"Inline\") +\r\n        \"</option>\" +\r\n        '<option value=\"floating\">' +\r\n        translate(\"Floating\") +\r\n        \"</option>\" +\r\n        \"</select>\" +\r\n        \"</div></form>\" +\r\n        '<form class=\"background-transparency\"><div class=\"form-group\">' +\r\n        '<input id=\"image-properties-transparent-background\" ' +\r\n        'type=\"checkbox\" checked>' +\r\n        '<label for=\"image-properties-transparent-background\">' +\r\n        translate(\"Transparent background\") +\r\n        \"</label>\" +\r\n        \"</div></form>\" +\r\n        \"</div>\"\r\n    );\r\n\r\n    if (this.getAlign() == \"floating\") {\r\n      $template.find(\".background-transparency\").show();\r\n    } else {\r\n      $template.find(\".background-transparency\").hide();\r\n    }\r\n\r\n    var backgroundColor = this.imager.$imageElement.css(\"background-color\");\r\n\r\n    if (\r\n      backgroundColor == \"transparent\" ||\r\n      backgroundColor == \"rgba(0, 0, 0, 0)\"\r\n    ) {\r\n      $template\r\n        .find(\"#image-properties-transparent-background\")\r\n        .attr(\"checked\", \"checked\");\r\n    } else {\r\n      $template\r\n        .find(\"#image-properties-transparent-background\")\r\n        .removeAttr(\"checked\");\r\n    }\r\n\r\n    var size = this.imager.getPreviewSize();\r\n    var ratioWidth = size.height / size.width;\r\n    var ratioHeight = size.width / size.height;\r\n\r\n    var currentAlign = this.getAlign();\r\n\r\n    $template.find(\"#image-properties-width\").val(size.width);\r\n    $template.find(\"#image-properties-width\").on(\"change keyup\", () =>  {\r\n      var newWidth = $template.find(\"#image-properties-width\").val();\r\n      var newHeight = Math.floor(newWidth * ratioWidth);\r\n      $template.find(\"#image-properties-height\").val(newHeight);\r\n    });\r\n\r\n    $template.find(\"#image-properties-height\").val(size.height);\r\n    $template.find(\"#image-properties-height\").on(\"change keyup\", () =>  {\r\n      var newHeight = $template.find(\"#image-properties-height\").val();\r\n      var newWidth = Math.floor(newHeight * ratioHeight);\r\n      $template.find(\"#image-properties-width\").val(newWidth);\r\n    });\r\n\r\n    $template.find(\"#image-properties-layout\").val(currentAlign);\r\n\r\n    $template.find(\"#image-properties-layout\").change(() =>  {\r\n      if ($(\"#image-properties-layout\").val() == \"floating\") {\r\n        $template.find(\".background-transparency\").show();\r\n      } else {\r\n        $template.find(\".background-transparency\").hide();\r\n      }\r\n    });\r\n\r\n    modal.setTemplate($template);\r\n\r\n    modal.addCancelButton(translate(\"Cancel\"), () =>  {\r\n      modal.remove();\r\n    });\r\n\r\n    modal.addActionButton(translate(\"Apply\"), () =>  {\r\n      var width = $(\"#image-properties-width\").val();\r\n      var height = $(\"#image-properties-height\").val();\r\n      var align = $(\"#image-properties-layout\").val();\r\n      var transparent = $(\"#image-properties-transparent-background\").attr(\r\n        \"checked\"\r\n      );\r\n\r\n      if (transparent) {\r\n        this.imager.$editContainer.css(\"background\", \"transparent\");\r\n        this.imager.$imageElement.css(\"background\", \"transparent\");\r\n      } else {\r\n        this.imager.$editContainer.css(\"background\", \"white\");\r\n        this.imager.$imageElement.css(\"background\", \"white\");\r\n      }\r\n\r\n      this.imager.render();\r\n\r\n      if (align != this.getAlign()) {\r\n        this.setAlign(align);\r\n      }\r\n\r\n      this.imager.setPreviewSize(width, height);\r\n\r\n      modal.remove();\r\n    });\r\n\r\n    modal.show();\r\n  }\r\n\r\n  setAlign(align) {\r\n    var aligmentCss = {};\r\n\r\n    if (align == \"floating\") {\r\n      aligmentCss[\"position\"] = \"absolute\";\r\n      aligmentCss[\"display\"] = \"block\";\r\n      aligmentCss[\"float\"] = \"none\";\r\n      aligmentCss[\"left\"] = \"0px\";\r\n      aligmentCss[\"top\"] = \"0px\";\r\n    } else if (align == \"center\") {\r\n      aligmentCss[\"float\"] = \"none\";\r\n      aligmentCss[\"margin-left\"] = \"auto\";\r\n      aligmentCss[\"margin-right\"] = \"auto\";\r\n      aligmentCss[\"display\"] = \"block\";\r\n      aligmentCss[\"position\"] = \"static\";\r\n    } else if (align == \"inline\") {\r\n      aligmentCss[\"float\"] = \"none\";\r\n      aligmentCss[\"display\"] = \"inline-block\";\r\n      aligmentCss[\"position\"] = \"static\";\r\n    } else {\r\n      aligmentCss[\"display\"] = \"block\";\r\n      aligmentCss[\"float\"] = align;\r\n      aligmentCss[\"position\"] = \"static\";\r\n    }\r\n\r\n    this.imager.$imageElement.css(aligmentCss);\r\n\r\n    this.onEditStart();\r\n\r\n    this.imager.adjustEditContainer();\r\n  }\r\n\r\n  getAlign() {\r\n    var aligmentCss = this.imager.$imageElement.css([\r\n      \"position\",\r\n      \"float\",\r\n      \"display\",\r\n      \"margin-left\",\r\n      \"margin-right\",\r\n    ]);\r\n\r\n    var currentAlign = \"inline\";\r\n\r\n    if (aligmentCss[\"position\"] == \"absolute\") {\r\n      currentAlign = \"floating\";\r\n    } else if (aligmentCss[\"float\"] == \"left\") {\r\n      currentAlign = \"left\";\r\n    } else if (aligmentCss[\"float\"] == \"right\") {\r\n      currentAlign = \"right\";\r\n    } else if (\r\n      aligmentCss[\"display\"] == \"block\" &&\r\n      aligmentCss[\"margin-left\"] == \"auto\"\r\n    ) {\r\n      currentAlign = \"center\";\r\n    }\r\n\r\n    return currentAlign;\r\n  }\r\n\r\n  onEditStart() {\r\n    var align = this.getAlign();\r\n\r\n    if (align == \"floating\") {\r\n      this.makeMoveButton();\r\n    } else if (this.$moveButton) {\r\n      this.$moveButton.remove();\r\n      this.$moveButton = null;\r\n    }\r\n  }\r\n\r\n  makeMoveButton() {\r\n    var toolbar = this.imager.getPluginInstance(\"Toolbar\").toolbar;\r\n\r\n    var $body = $(\"body\");\r\n\r\n    this.$moveButton = toolbar.addButton(\r\n      \"btn-move\",\r\n      \"fa-arrows\",\r\n      translate(\"Move image\"),\r\n      () =>  {}\r\n    );\r\n\r\n    this.$moveButton.on(MOUSE_DOWN, (event) => {\r\n      if (event.type.indexOf(\"touch\") > -1) {\r\n        event = event.originalEvent;\r\n      }\r\n\r\n      $(\".tooltip-btn-move\").css(\"display\", \"none\");\r\n\r\n      var startLeft =\r\n        this.imager.$imageElement.css(\"left\").replace(\"px\", \"\") | 0;\r\n      var startTop = this.imager.$imageElement.css(\"top\").replace(\"px\", \"\") | 0;\r\n\r\n      var mouseStartLeft = event.pageX;\r\n      var mouseStartTop = event.pageY;\r\n\r\n      $body.on(MOUSE_MOVE, (moveEvent) => {\r\n        if (moveEvent.type.indexOf(\"touch\") > -1) {\r\n          moveEvent = moveEvent.originalEvent;\r\n        }\r\n\r\n        var diffLeft = moveEvent.pageX - mouseStartLeft;\r\n        var diffTop = moveEvent.pageY - mouseStartTop;\r\n\r\n        var newLeft = startLeft + diffLeft;\r\n        var newTop = startTop + diffTop;\r\n\r\n        if (newLeft < 0) {\r\n          newLeft = 0;\r\n        }\r\n        if (newTop < 0) {\r\n          newTop = 0;\r\n        }\r\n\r\n        this.imager.$imageElement.css({\r\n          left: newLeft,\r\n          top: newTop,\r\n        });\r\n\r\n        this.imager.adjustEditContainer();\r\n\r\n        moveEvent.preventDefault();\r\n        moveEvent.stopPropagation();\r\n        return false;\r\n      });\r\n\r\n      $body.on(MOUSE_UP, () =>  {\r\n        $(\".tooltip-btn-move\").css(\"display\", \"block\");\r\n        $body.off(MOUSE_MOVE);\r\n        $body.off(MOUSE_UP);\r\n      });\r\n    });\r\n  }\r\n}\r\n", "import {\r\n  getEventPosition,\r\n  mouseDown,\r\n  mouseMove,\r\n  mouseUp,\r\n} from \"../../util/Util\";\r\nimport \"./Resize.css\";\r\nimport { translate } from \"../../Translations\";\r\n\r\nconst MOUSE_DOWN = mouseDown(\"imagerjsResize\");\r\nconst MOUSE_UP = mouseUp(\"imagerjsResize\");\r\nconst MOUSE_MOVE = mouseMove(\"imagerjsResize\");\r\n\r\n/**\r\n * Resize plugin. Provides a control which allows to to resize an image.\r\n *\r\n * @param imagerInstance\r\n *\r\n * @param options {Object} Resize square control options.\r\n * @param options.controlsCss {Object} Css properties that will be applied to\r\n * resizing controls.\r\n *\r\n * @param options.controlsTouchCss {Object} Css properties that will\r\n * be applied to resizing controls when on touch device.\r\n *\r\n * @param options.doubleDiff {Boolean} Doubles mouse pointer distance.\r\n * This is needed when image is centered while resizing to make\r\n * resize corner be always under mouse cursor.\r\n *\r\n * @constructor\r\n * @memberof ImagerJs.plugins\r\n */\r\nexport default class ResizePlugin {\r\n  constructor(imagerInstance, options) {\r\n    this.imager = imagerInstance;\r\n\r\n    this.defaultOptions = {\r\n      minWidth: 50,\r\n      minHeight: 50,\r\n      controlsCss: {},\r\n      controlsTouchCss: {},\r\n      doubleDiff: false,\r\n    };\r\n\r\n    options = options ? options : {};\r\n    this.options = $.extend(true, this.defaultOptions, options);\r\n\r\n    this.weight = 99999;\r\n  }\r\n\r\n  onToolSelected() {\r\n    if (this.$resizeSquare) {\r\n      this.$resizeSquare.addClass(\"hidden\");\r\n    }\r\n  }\r\n\r\n  onToolApply() {\r\n    if (this.$resizeSquare) {\r\n      this.$resizeSquare.removeClass(\"hidden\");\r\n    }\r\n  }\r\n\r\n  onToolReject() {\r\n    if (this.$resizeSquare) {\r\n      this.$resizeSquare.removeClass(\"hidden\");\r\n    }\r\n  }\r\n\r\n  onEditStart() {\r\n    var $resizeSquare = $('<div class=\"resize-square\"></div>');\r\n\r\n    if (this.imager.touchDevice) {\r\n      $resizeSquare.css(this.options.controlsTouchCss);\r\n    } else {\r\n      $resizeSquare.css(this.options.controlsCss);\r\n    }\r\n\r\n    this.imager.$editContainer.append($resizeSquare);\r\n\r\n    var $body = $(\"body\");\r\n\r\n    $resizeSquare.on(MOUSE_DOWN, (downEvent) => {\r\n      var startPos = getEventPosition(downEvent);\r\n\r\n      var startDimensions = this.imager.getPreviewSize();\r\n\r\n      const ratioWidth = startDimensions.height / startDimensions.width;\r\n      const ratioHeight = startDimensions.width / startDimensions.height;\r\n\r\n      $body.on(MOUSE_MOVE, (moveEvent) => {\r\n        var movePos = util.getEventPosition(moveEvent);\r\n\r\n        var leftDiff = movePos.left - startPos.left;\r\n        var topDiff = movePos.top - startPos.top;\r\n\r\n        if (this.options.doubleDiff) {\r\n          leftDiff *= 2;\r\n          topDiff *= 2;\r\n        }\r\n\r\n        var newWidth = startDimensions.width + leftDiff;\r\n        var newHeight = startDimensions.height + topDiff;\r\n\r\n        var fitSize = this.calcAspectRatio(\r\n          startDimensions.width,\r\n          startDimensions.height,\r\n          newWidth,\r\n          newHeight\r\n        );\r\n\r\n        newWidth = fitSize.width;\r\n        newHeight = fitSize.height;\r\n\r\n        if (newWidth < this.options.minWidth) {\r\n          newWidth = this.options.minWidth;\r\n        }\r\n\r\n        if (newHeight < this.options.minHeight) {\r\n          newHeight = this.options.minHeight;\r\n        }\r\n\r\n        this.imager.setPreviewSize(newWidth, newHeight);\r\n\r\n        moveEvent.stopPropagation();\r\n        moveEvent.preventDefault();\r\n        return false;\r\n      });\r\n\r\n      $body.on(MOUSE_UP, (upEvent) => {\r\n        $body.off(MOUSE_UP);\r\n        $body.off(MOUSE_MOVE);\r\n      });\r\n\r\n      downEvent.stopPropagation();\r\n      downEvent.preventDefault();\r\n      return false;\r\n    });\r\n\r\n    this.$resizeSquare = $resizeSquare;\r\n  }\r\n\r\n  /**\r\n   * Conserve aspect ratio of the orignal region.\r\n   * Useful when shrinking/enlarging\r\n   * images to fit into a certain area.\r\n   *\r\n   * @param {Number} srcWidth Source area width\r\n   * @param {Number} srcHeight Source area height\r\n   * @param {Number} maxWidth Fittable area maximum available width\r\n   * @param {Number} maxHeight Fittable area maximum available height\r\n   * @return {Object} { width, heigth }\r\n   */\r\n  calcAspectRatio(srcWidth, srcHeight, maxWidth, maxHeight) {\r\n    var ratio = Math.min(maxWidth / srcWidth, maxHeight / srcHeight);\r\n\r\n    return { width: srcWidth * ratio, height: srcHeight * ratio };\r\n  }\r\n}\r\n", "import { translate } from \"../../Translations\";\r\nimport {\r\n  getEventPosition,\r\n  mouseDown,\r\n  mouseMove,\r\n  mouseUp,\r\n} from \"../../util/Util\";\r\nimport \"./Rotate.css\";\r\n\r\nconst MOUSE_DOWN = mouseDown(\"imagerjsRotate\");\r\nconst MOUSE_UP = mouseUp(\"imagerjsRotate\");\r\nconst MOUSE_MOVE = mouseMove(\"imagerjsRotate\");\r\n\r\n/**\r\n * Rotate plugins. Allows image rotation.\r\n *\r\n * @param imagerInstance\r\n *\r\n * @param options {Object} Rotating controls options.\r\n * @param options.controlsCss {Object} Css properties that will be applied to\r\n * rotating controls.\r\n *\r\n * @param options.controlsTouchCss {Object} Css properties that will\r\n * be applied to rotating controls when on touch device.\r\n *\r\n * @constructor\r\n * @memberof ImagerJs.plugins\r\n */\r\nexport default class RotatePlugin {\r\n  constructor(imagerInstance, options) {\r\n    this.imager = imagerInstance;\r\n\r\n    this.defaultOptions = {\r\n      controlsCss: {},\r\n      controlsTouchCss: {},\r\n    };\r\n\r\n    options = options ? options : {};\r\n    this.options = $.extend(true, this.defaultOptions, options);\r\n\r\n    this.weight = -100;\r\n\r\n    this.angle = 0;\r\n\r\n    var previewSize = this.imager.getPreviewSize();\r\n\r\n    this.controlsStartWidth = previewSize.width;\r\n    this.controlsStartHeight = previewSize.height;\r\n\r\n    this.widthDiff = 0;\r\n    this.heightDiff = 0;\r\n  }\r\n\r\n  getButtons() {\r\n    var group = {\r\n      name: \"Rotate\",\r\n      tooltip: translate(\"Rotate\"),\r\n    };\r\n\r\n    return [\r\n      {\r\n        classes: \"btn-rotate\",\r\n        iconClasses: \"fa-repeat\",\r\n        tooltip: translate(\"Rotate manually\"),\r\n        group: group,\r\n        enabledHandler: (toolbar) => {\r\n          this.startRotate();\r\n          this.imager.render();\r\n        },\r\n        applyHandler: () => {\r\n          this.imager.setWaiting(true);\r\n\r\n          setTimeout(() => {\r\n            this.applyHandler();\r\n            this.imager.commitChanges(\"Rotate\");\r\n            this.reset();\r\n\r\n            this.imager.setWaiting(false);\r\n          }, 50);\r\n        },\r\n        rejectHandler: () => {\r\n          this.setAngle(0);\r\n          this.stopRotate();\r\n        },\r\n      },\r\n      {\r\n        group: group,\r\n        classes: \"btn-rotate btn-rotate-90\",\r\n        iconClasses: \"fa-undo\",\r\n        tooltip: translate(\"Rotate 90 left\"),\r\n        enabledHandler: (toolbar) => {\r\n          this.imager.setWaiting(true);\r\n\r\n          setTimeout(() => {\r\n            this.rotateByAngle((-90 * Math.PI) / 180);\r\n            this.imager.setWaiting(false);\r\n          }, 50);\r\n        },\r\n      },\r\n      {\r\n        group: group,\r\n        classes: \"btn-rotate\",\r\n        iconClasses: \"fa-repeat\",\r\n        tooltip: translate(\"Rotate 90 right\"),\r\n        enabledHandler: (toolbar) => {\r\n          this.imager.setWaiting(true);\r\n\r\n          setTimeout(() => {\r\n            this.rotateByAngle((90 * Math.PI) / 180);\r\n            this.imager.setWaiting(false);\r\n          }, 50);\r\n        },\r\n      },\r\n    ];\r\n  }\r\n\r\n  applyHandler() {\r\n    this.stopRotate();\r\n  }\r\n\r\n  rotateByAngle(angle) {\r\n    var prevQuality = this.imager.quality;\r\n    var prevTargetScale = this.imager.targetScale;\r\n\r\n    this.imager.quality = 1;\r\n    this.imager.targetScale = 1;\r\n\r\n    this.startRotate();\r\n    this.imager.render();\r\n    this.setAngle(angle);\r\n    this.imager.render();\r\n    this.stopRotate();\r\n    this.imager.commitChanges(translate(\"Rotate\"));\r\n    this.reset();\r\n    this.imager.render();\r\n\r\n    this.imager.quality = prevQuality;\r\n    this.imager.targetScale = prevTargetScale;\r\n  }\r\n\r\n  startRotate() {\r\n    var previewDimensions = this.imager.getPreviewSize();\r\n\r\n    this.controlsStartWidth = this.imager.originalPreviewWidth;\r\n    this.controlsStartHeight = this.imager.originalPreviewHeight;\r\n\r\n    var $rotateControls = $(\r\n      '<div class=\"imager-rotate-container\">' +\r\n        '<div class=\"rotate-corner rotate-top-left\"></div>' +\r\n        '<div class=\"rotate-corner rotate-top-right\"></div>' +\r\n        '<div class=\"rotate-corner rotate-bottom-right\"></div>' +\r\n        '<div class=\"rotate-corner rotate-bottom-left\"></div>' +\r\n        '<div class=\"rotate-border rotate-border-top\"></div>' +\r\n        '<div class=\"rotate-border rotate-border-right\"></div>' +\r\n        '<div class=\"rotate-border rotate-border-bottom\"></div>' +\r\n        '<div class=\"rotate-border rotate-border-left\"></div>' +\r\n        \"</div>\"\r\n    ).css({\r\n      width: this.controlsStartWidth,\r\n      height: this.controlsStartHeight,\r\n    });\r\n\r\n    this.$rotateControls = $rotateControls;\r\n    this.imager.$editContainer.append($rotateControls);\r\n\r\n    var $corners = $rotateControls.find(\".rotate-corner\");\r\n\r\n    if (this.imager.touchDevice) {\r\n      $corners.css(this.options.controlsTouchCss);\r\n    } else {\r\n      $corners.css(this.options.controlsCss);\r\n    }\r\n\r\n    var $body = $(\"body\");\r\n\r\n    var imageOffset = $(this.imager.canvas).offset();\r\n\r\n    this.centerX = imageOffset.left + this.controlsStartWidth / 2;\r\n    this.centerY = imageOffset.top + this.controlsStartHeight / 2;\r\n\r\n    this.setAngle(this.angle);\r\n\r\n    $corners.on(MOUSE_DOWN, (startEvent) => {\r\n      this.prevAngle = this.angle * -1;\r\n\r\n      var startPos = getEventPosition(startEvent);\r\n\r\n      var startAngle = this.getAngle(\r\n        this.centerX,\r\n        this.centerY,\r\n        startPos.left,\r\n        startPos.top\r\n      );\r\n\r\n      $body.on(MOUSE_MOVE, (moveEvent) => {\r\n        var movePos = getEventPosition(moveEvent);\r\n\r\n        var currentAngle = this.getAngle(\r\n          this.centerX,\r\n          this.centerY,\r\n          movePos.left,\r\n          movePos.top\r\n        );\r\n\r\n        var newAngle = startAngle - currentAngle;\r\n        this.angle = this.prevAngle + newAngle;\r\n        this.angle *= -1;\r\n\r\n        this.setAngle(this.angle);\r\n\r\n        moveEvent.preventDefault();\r\n        moveEvent.stopPropagation();\r\n        return false;\r\n      });\r\n\r\n      $body.on(MOUSE_UP, (endEvent) => {\r\n        $body.off(MOUSE_UP);\r\n        $body.off(MOUSE_MOVE);\r\n\r\n        this.lastAngle = this.angle;\r\n      });\r\n\r\n      startEvent.preventDefault();\r\n      startEvent.stopPropagation();\r\n      return false;\r\n    });\r\n  }\r\n\r\n  stopRotate() {\r\n    this.$rotateControls.remove();\r\n    this.$rotateControls = null;\r\n  }\r\n\r\n  setAngle(angle) {\r\n    this.angle = angle;\r\n    this.$rotateControls.css(\"-webkit-transform\", \"rotate(\" + angle + \"rad)\");\r\n\r\n    var rotatedDimensions = this.getRotatedDimensions(\r\n      this.controlsStartWidth,\r\n      this.controlsStartHeight,\r\n      angle\r\n    );\r\n\r\n    this.widthDiff = rotatedDimensions.width - this.controlsStartWidth;\r\n    this.heightDiff = rotatedDimensions.height - this.controlsStartHeight;\r\n\r\n    this.$rotateControls.css({\r\n      top: this.heightDiff / 2,\r\n      left: this.widthDiff / 2,\r\n    });\r\n\r\n    this.imager.setPreviewSize(\r\n      rotatedDimensions.width,\r\n      rotatedDimensions.height\r\n    );\r\n\r\n    this.imager.render();\r\n  }\r\n\r\n  render(ctx) {\r\n    // create temp canvas\r\n    var tempCtx = this.imager.tempCanvas.getContext(\"2d\");\r\n    tempCtx.clearRect(0, 0, tempCtx.canvas.width, tempCtx.canvas.height);\r\n\r\n    // convert local coordinates from preview to\r\n    // global coordinates of image original size\r\n    var scaledWidthDiff = this.imager.convertScale(\r\n      this.widthDiff,\r\n      this.controlsStartWidth,\r\n      ctx.canvas.width\r\n    );\r\n    var scaledHeightDiff = this.imager.convertScale(\r\n      this.heightDiff,\r\n      this.controlsStartHeight,\r\n      ctx.canvas.height\r\n    );\r\n\r\n    // temporary canvas should be bigger because rotated image takes\r\n    // more space\r\n    tempCtx.canvas.width = ctx.canvas.width + scaledWidthDiff;\r\n    tempCtx.canvas.height = ctx.canvas.height + scaledHeightDiff;\r\n\r\n    // rotate temp context\r\n    this.rotateCanvas(tempCtx, this.angle);\r\n    tempCtx.translate(scaledWidthDiff / 2, scaledHeightDiff / 2);\r\n\r\n    // draw main canvas into temp canvas\r\n    tempCtx.drawImage(\r\n      ctx.canvas,\r\n      0,\r\n      0,\r\n      ctx.canvas.width,\r\n      ctx.canvas.height,\r\n      0,\r\n      0,\r\n      ctx.canvas.width,\r\n      ctx.canvas.height\r\n    );\r\n\r\n    // then restore rotation and offset of temp context\r\n    tempCtx.translate(-scaledWidthDiff / 2, -scaledHeightDiff / 2);\r\n    this.restoreCanvasRotation(tempCtx, this.angle);\r\n\r\n    // now it's time to make original canvas bigger so rotated image will fit\r\n    ctx.canvas.width += scaledWidthDiff;\r\n    ctx.canvas.height += scaledHeightDiff;\r\n\r\n    // clear main canvas\r\n    this.imager.clearCanvas(ctx);\r\n\r\n    var paddingWidth = 0;\r\n    var paddingHeight = 0;\r\n    if (this.$rotateControls) {\r\n      paddingWidth = this.imager.convertScale(\r\n        10,\r\n        this.controlsStartWidth,\r\n        ctx.canvas.width\r\n      );\r\n      paddingHeight = this.imager.convertScale(\r\n        10,\r\n        this.controlsStartHeight,\r\n        ctx.canvas.height\r\n      );\r\n    }\r\n\r\n    // draw temp canvas into main canvas\r\n    ctx.drawImage(\r\n      tempCtx.canvas,\r\n      0, // srcX\r\n      0, // srcY\r\n      tempCtx.canvas.width, // srcWidth\r\n      tempCtx.canvas.height, // srcHeight\r\n      paddingWidth, // destX\r\n      paddingHeight, // destY\r\n      ctx.canvas.width - paddingWidth * 2, // destWidth\r\n      ctx.canvas.height - paddingHeight * 2 // destHeight\r\n    );\r\n  }\r\n\r\n  rotateCanvas(context, angle) {\r\n    context.translate(context.canvas.width / 2, context.canvas.height / 2);\r\n    context.rotate(angle);\r\n    context.translate(-context.canvas.width / 2, -context.canvas.height / 2);\r\n  }\r\n\r\n  restoreCanvasRotation(context, angle) {\r\n    context.translate(context.canvas.width / 2, context.canvas.height / 2);\r\n    context.rotate(angle * -1);\r\n    context.translate(-context.canvas.width / 2, -context.canvas.height / 2);\r\n  }\r\n\r\n  getRotatedDimensions(width, height, angle) {\r\n    if (angle < 0) {\r\n      angle *= -1;\r\n    }\r\n\r\n    if (angle > Math.PI * 2) {\r\n      angle = angle - Math.PI * 2;\r\n      angle = Math.PI * 2 - angle;\r\n    }\r\n\r\n    if (angle > Math.PI) {\r\n      angle = angle - Math.PI;\r\n      angle = Math.PI - angle;\r\n    }\r\n\r\n    if (angle > Math.PI / 2) {\r\n      angle = angle - Math.PI / 2;\r\n      angle = Math.PI / 2 - angle;\r\n    }\r\n\r\n    var a = width * Math.cos(angle);\r\n    var b = height * Math.sin(angle);\r\n    var c = a + b;\r\n\r\n    var p = width * Math.sin(angle);\r\n    var q = height * Math.cos(angle);\r\n    var r = p + q;\r\n\r\n    return {\r\n      width: c,\r\n      height: r,\r\n    };\r\n  }\r\n\r\n  getAngle(x1, y1, x2, y2) {\r\n    return Math.atan2(y2 - y1, x2 - x1);\r\n  }\r\n\r\n  deserialize(savedState) {\r\n    if (savedState && savedState.angle) {\r\n      this.angle = savedState.angle;\r\n    }\r\n  }\r\n\r\n  serialize() {\r\n    return {\r\n      angle: this.angle,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Reset all rotation related variables, so on the next rotation start\r\n   * it will start from zeroed rotation.\r\n   */\r\n  reset() {\r\n    this.widthDiff = 0;\r\n    this.heightDiff = 0;\r\n    this.angle = 0;\r\n  }\r\n}\r\n", "import \"./Save.css\";\r\nimport { translate } from \"../../Translations\";\r\n\r\n/**\r\n * Allows saving of the image.\r\n *\r\n * @param imagerInstance\r\n *\r\n * @constructor\r\n * @memberof ImagerJs.plugins\r\n */\r\nexport default class SavePlugin {\r\n  constructor(imagerInstance, options) {\r\n    this.imager = imagerInstance;\r\n\r\n    this.defaultOptions = {\r\n      upload: false,\r\n      uploadFunction: null,\r\n    };\r\n\r\n    options = options ? options : {};\r\n    this.options = $.extend(true, this.defaultOptions, options);\r\n  }\r\n\r\n  getButtons() {\r\n    return [\r\n      {\r\n        classes: \"btn-save\",\r\n        iconClasses: \"fa-save\",\r\n        tooltip: translate(\"Save\"),\r\n        enabledHandler: (toolbar) => {\r\n          var contentConfig = this.imager.options.contentConfig;\r\n          var saveFunc = contentConfig ? contentConfig.saveImageData : null;\r\n\r\n          if (this.options.upload) {\r\n            saveFunc = this.options.uploadFunction;\r\n          }\r\n\r\n          if (!saveFunc) {\r\n            console.error(\r\n              \"No uploadFunction function provided in \" +\r\n                \"imager.options.contentConfig.saveImageData.\"\r\n            );\r\n          } else {\r\n            saveFunc.call(\r\n              this.imager,\r\n              this.imager.$imageElement.attr(\"data-imager-id\"),\r\n              this.imager.$imageElement.attr(\"src\"),\r\n              (savedImageUrl) => {\r\n                this.imager.stopEditing();\r\n                // for uploaded images - change src to url returned from the server\r\n                this.imager.$imageElement.attr(\"src\", savedImageUrl);\r\n              }\r\n            );\r\n          }\r\n        },\r\n      },\r\n    ];\r\n  }\r\n}\r\n", "import { Toolbar } from \"../../Toolbar\";\r\nimport { translate } from \"../../Translations\";\r\nimport './Toolbar.css';\r\n\r\nexport default class ToolbarPlugin {\r\n  constructor(imagerInstance, options) {\r\n    this.imager = imagerInstance;\r\n\r\n    options = options || {};\r\n\r\n    var defaultOptions = {\r\n      tooltipEnabled: true,\r\n      tooltipCss: null,\r\n    };\r\n\r\n    if (this.imager.touchDevice) {\r\n      defaultOptions.tooltipEnabled = false;\r\n    }\r\n\r\n    this.options = $.extend(defaultOptions, options);\r\n\r\n    this.activeButton = null;\r\n\r\n    this.weight = -100;\r\n  }\r\n\r\n  /**\r\n   * This method will be invoked by Imager when edit mode is enabled.\r\n   */\r\n  onEditStart() {\r\n    this.toolbar = new Toolbar(this.options);\r\n    this.toolbar\r\n      .getElement()\r\n      .attr(\"data-sizeable\", \"toolbar-button\")\r\n      .attr(\"data-cssrules\", \"top:($v * -1)\");\r\n\r\n    var getButtonsResults = this.imager.invokePluginsMethod(\"getButtons\");\r\n\r\n    for (var i = 0; i < getButtonsResults.length; i++) {\r\n      var plugin = getButtonsResults[i].instance;\r\n      var buttons = getButtonsResults[i].result;\r\n\r\n      for (var b = 0; b < buttons.length; b++) {\r\n        var btn = buttons[b];\r\n\r\n        btn.plugin = plugin;\r\n\r\n        var $button = null;\r\n        if (btn.group === undefined) {\r\n          $button = this.toolbar.addButton(\r\n            btn.classes,\r\n            btn.iconClasses,\r\n            btn.tooltip,\r\n            this.createHandler(btn)\r\n          );\r\n        } else {\r\n          $button = this.toolbar.addButtonToGroup(\r\n            btn.classes,\r\n            btn.iconClasses,\r\n            btn.tooltip,\r\n            btn.group,\r\n            this.createHandler(btn)\r\n          );\r\n        }\r\n\r\n        if (btn.buttonCreatedHandler) {\r\n          btn.buttonCreatedHandler($button);\r\n        }\r\n      }\r\n    }\r\n\r\n    this.imager.$editContainer.append(this.toolbar.getElement());\r\n  }\r\n\r\n  onRemove() {\r\n    if (this.toolbar) {\r\n      this.toolbar.remove();\r\n    }\r\n  }\r\n\r\n  onEditStop() {\r\n    if (this.toolbar) {\r\n      this.toolbar.remove();\r\n    }\r\n  }\r\n\r\n  createHandler(btn) {\r\n    return () => {\r\n      if (this.activeButton) {\r\n        if (this.activeButton.disabledHandler) {\r\n          this.activeButton.disabledHandler();\r\n        }\r\n      }\r\n\r\n      this.toolbar.clearActiveButton();\r\n\r\n      btn.enabledHandler();\r\n\r\n      if (btn.applyHandler && btn.rejectHandler) {\r\n        this.activeButton = btn;\r\n\r\n        this.imager.trigger(\"toolSelected\", btn);\r\n\r\n        this.toolbar.setActiveButton(btn.classes);\r\n\r\n        this.toolbar.getElement().addClass(\"hidden\");\r\n\r\n        this.createOperationToolbar(btn);\r\n      }\r\n\r\n      return false;\r\n    };\r\n  }\r\n\r\n  createOperationToolbar(btn) {\r\n    this.operationToolbar = new Toolbar(this.options);\r\n\r\n    this.operationToolbar.addButton(\r\n      \"btn-accept\",\r\n      \"fa-check\",\r\n      translate(\"Apply\"),\r\n      () => {\r\n        btn.applyHandler();\r\n        this.operationButtonHandler();\r\n        this.imager.trigger(\"toolApply\");\r\n        return false;\r\n      }\r\n    );\r\n\r\n    this.operationToolbar.addButton(\r\n      \"btn-reject\",\r\n      \"fa-times\",\r\n      translate(\"Reject\"),\r\n      () => {\r\n        btn.rejectHandler();\r\n        this.operationButtonHandler();\r\n        this.imager.trigger(\"toolReject\");\r\n        return false;\r\n      }\r\n    );\r\n\r\n    this.imager.$editContainer.append(this.operationToolbar.getElement());\r\n  }\r\n\r\n  operationButtonHandler() {\r\n    this.activeButton = null;\r\n    this.removeOperationToolbar();\r\n    this.toolbar.getElement().removeClass(\"hidden\");\r\n    this.toolbar.clearActiveButton();\r\n  }\r\n\r\n  removeOperationToolbar() {\r\n    this.operationToolbar.remove();\r\n    this.operationToolbar = null;\r\n  }\r\n\r\n  getActiveButton() {\r\n    return this.activeButton;\r\n  }\r\n}\r\n", "import { translate } from \"../../Translations\";\r\n\r\n/**\r\n * Allows undoing actions on the image.\r\n *\r\n * @param imagerInstance\r\n *\r\n * @constructor\r\n * @memberof ImagerJs.plugins\r\n */\r\nexport class UndoPlugin {\r\n  constructor(imagerInstance, options) {\r\n    this.imager = imagerInstance;\r\n    this.$toolbarButton = null;\r\n\r\n    options = options ? options : {};\r\n    this.options = $.extend(true, this.defaultOptions, options);\r\n  }\r\n\r\n  getButtons() {\r\n    return [\r\n      {\r\n        classes: \"btn-undo\",\r\n        iconClasses: \"fa-undo\",\r\n        tooltip: translate(\"Undo\"),\r\n        buttonCreatedHandler: ($btn) => {\r\n          this.$toolbarButton = $btn;\r\n        },\r\n        enabledHandler: (toolbar) => {\r\n          this.toolbar = toolbar;\r\n\r\n          this.imager.setWaiting(true);\r\n\r\n          setTimeout(() => {\r\n            this.imager.historyUndo();\r\n            this.imager.setWaiting(false);\r\n          }, 50);\r\n        },\r\n      },\r\n    ];\r\n  }\r\n\r\n  onHistoryChange() {\r\n    if (this.imager.history.length > 1) {\r\n      this.$toolbarButton.css({\r\n        \"pointer-events\": \"all\",\r\n      });\r\n\r\n      this.$toolbarButton.find(\"a\").css(\"color\", \"#333\");\r\n    } else {\r\n      this.$toolbarButton.css({\r\n        \"pointer-events\": \"none\",\r\n      });\r\n\r\n      this.$toolbarButton.find(\"a\").css(\"color\", \"#C3C3C3\");\r\n    }\r\n  }\r\n}\r\n", "import { translate } from \"../Translations\";\r\nimport \"./FileSelector.css\";\r\n\r\nexport default class FileSelector {\r\n  constructor(accept) {\r\n    this.acceptTypes = accept;\r\n\r\n    this.$element = $(\r\n      '<div class=\"file-selector\">' +\r\n        '<input type=\"file\" />' +\r\n        '<div class=\"drop-area\">' +\r\n        translate(\"Or drop files here\") +\r\n        \"</div>\" +\r\n        '<div class=\"error-container bg-danger\"></div>' +\r\n        \"</div>\"\r\n    );\r\n\r\n    if (this.acceptTypes) {\r\n      this.$element.find(\"input\").attr(\"accept\", this.acceptTypes);\r\n    }\r\n\r\n    this.$element.find(\"input\").on(\"change\", (e) => {\r\n      if (e.target.files.length < 1) {\r\n        this.showError(translate(\"No file selected.\"));\r\n      }\r\n\r\n      for (var i = 0; i < e.target.files.length; i++) {\r\n        if (e.target.files[i].type.indexOf(\"image\") < 0) {\r\n          this.showError(translate(\"Incorrect file type\"));\r\n          return;\r\n        }\r\n      }\r\n\r\n      this.parseFile(e.target.files[0]);\r\n    });\r\n\r\n    var $dropArea = this.$element.find(\".drop-area\");\r\n    $dropArea.on(\"dragover\", (e) => {\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n      $dropArea.addClass(\"hover\");\r\n    });\r\n    $dropArea.on(\"dragleave\", (e) => {\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n      $dropArea.removeClass(\"hover\");\r\n    });\r\n    $dropArea.on(\"drop\", (e) => {\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n      $dropArea.removeClass(\"hover\");\r\n      // fetch FileList object\r\n      var files = e.originalEvent.dataTransfer.files;\r\n\r\n      if (files.length < 1) {\r\n        this.showError(translate(\"No file selected.\"));\r\n        return;\r\n      }\r\n\r\n      for (var i = 0; i < files.length; i++) {\r\n        if (files[i].type.indexOf(\"image\") < 0) {\r\n          this.showError(translate(\"Incorrect file type.\"));\r\n          return;\r\n        }\r\n      }\r\n\r\n      this.parseFile(files[0]);\r\n    });\r\n  }\r\n\r\n  parseFile(file) {\r\n    var fileReader = new FileReader();\r\n\r\n    fileReader.onload = (onloadEvent) => {\r\n      this.$element.trigger(\"fileSelected.fileSelector\", {\r\n        info: file,\r\n        data: fileReader.result,\r\n      });\r\n    };\r\n\r\n    fileReader.readAsDataURL(file);\r\n  }\r\n\r\n  onFileSelected(handler) {\r\n    this.$element.on(\"fileSelected.fileSelector\", (event, file) =>\r\n      handler(file)\r\n    );\r\n  }\r\n\r\n  showError(error) {\r\n    this.$element.find(\".error-container\").html(error);\r\n    this.$element.find(\".error-container\").slideDown(200);\r\n\r\n    setTimeout(() => this.$element.find(\".error-container\").slideUp(200), 2000);\r\n  }\r\n\r\n  getElement() {\r\n    return this.$element;\r\n  }\r\n\r\n  hide() {\r\n    this.$element.hide();\r\n  }\r\n\r\n  show() {\r\n    this.$element.show();\r\n  }\r\n}\r\n", "import { translate } from \"./Translations\";\r\n\r\n/**\r\n *\r\n * Provides a select that could be used to change imager quality.\r\n *\r\n * @param imagerInstance\r\n * @constructor\r\n *\r\n */\r\nexport default class QualitySelector {\r\n  constructor(imagerInstance, options) {\r\n    this.defaultOptions = {\r\n      sizes: [\r\n        { label: \"Original\", scale: 1, quality: 1.0, percentage: 100 },\r\n        { label: \"Large\", scale: 0.5, quality: 0.5, percentage: 50 },\r\n        { label: \"Medium\", scale: 0.2, quality: 0.2, percentage: 20 },\r\n        { label: \"Small\", scale: 0.05, quality: 0.05, percentage: 5 },\r\n      ],\r\n      allowCustomSetting: true,\r\n    };\r\n\r\n    options = options ? options : {};\r\n    this.options = $.extend(true, this.defaultOptions, options);\r\n\r\n    if (this.options.allowCustomSetting) {\r\n      this.options.sizes.push({ label: \"Custom\" });\r\n    }\r\n\r\n    this.imager = imagerInstance;\r\n\r\n    this.$qualitySelector = $(\r\n      '<div class=\"imager-quality-wrapper\">' +\r\n        \"<form>\" +\r\n        '<div class=\"imager-quality-container form-group\">' +\r\n        '<label for=\"imager-quality\">' +\r\n        translate(\"Quality\") +\r\n        \"</label>\" +\r\n        '<select id=\"imager-quality\" class=\"form-control\">' +\r\n        \"</select>\" +\r\n        \"</div>\" +\r\n        \"</form>\" +\r\n        '<form class=\"form-inline custom-quality hidden\">' +\r\n        '<div class=\"form-group\">' +\r\n        '<label for=\"imager-quality-custom\" ' +\r\n        'class=\"imager-quality-custom\">' +\r\n        translate(\"Custom quality percent\") +\r\n        \"</label>\" +\r\n        '<div class=\"input-group\">' +\r\n        '<input id=\"imager-quality-custom\" type=\"number\" min=\"1\" max=\"100\"' +\r\n        'class=\"form-control imager-quality-custom\" value=\"100\"/>' +\r\n        '<div class=\"input-group-addon\">%</div>' +\r\n        '<div class=\"size-in-kb\"></div>' +\r\n        \"</div>\" +\r\n        \"</div>\" +\r\n        \"</form>\" +\r\n        \"</div>\"\r\n    ).addClass(\"hidden\");\r\n\r\n    this.$qualitySelector\r\n      .find(\"input.imager-quality-custom\")\r\n      .change((e) => {\r\n        var customQuality = +e.target.value;\r\n\r\n        this.imager.quality = customQuality / 100;\r\n        this.imager.targetScale = customQuality / 100;\r\n        this.imager.render();\r\n\r\n        var size = this.imager.getDataSize() / 1024;\r\n        var sizeText = Math.round(size) + \" \" + translate(\"KB\");\r\n        this.$qualitySelector.find(\".size-in-kb\").text(sizeText);\r\n      });\r\n\r\n    this.$qualitySelector.find(\"select\").on(\"change\", (e) => {\r\n      var value = +e.target.value;\r\n\r\n      var selectedQuality = this.options.sizes[value];\r\n\r\n      if (selectedQuality === null || selectedQuality === undefined) {\r\n        selectedQuality = _this.options.sizes[0];\r\n      }\r\n\r\n      if (selectedQuality.label == \"Custom\") {\r\n        this.$qualitySelector\r\n          .find(\"form.custom-quality\")\r\n          .removeClass(\"hidden\");\r\n        this.$qualitySelector.addClass(\"custom-quality-visible\");\r\n        this.imager.$imageElement.addClass(\"custom-quality-visible\");\r\n      } else {\r\n        this.$qualitySelector.find(\"form.custom-quality\").addClass(\"hidden\");\r\n        this.$qualitySelector.removeClass(\"custom-quality-visible\");\r\n        this.imager.$imageElement.removeClass(\"custom-quality-visible\");\r\n      }\r\n\r\n      $(\"body\").trigger(\"imagerResize\");\r\n\r\n      this.imager.adjustEditContainer();\r\n\r\n      this.imager.quality = selectedQuality.quality\r\n        ? selectedQuality.quality\r\n        : 0.5;\r\n      this.imager.targetScale = selectedQuality.scale\r\n        ? selectedQuality.scale\r\n        : 0.5;\r\n      this.imager.render();\r\n    });\r\n  }\r\n\r\n  hide() {\r\n    return this.$qualitySelector;\r\n  }\r\n\r\n  hide() {\r\n    var selected = this.$qualitySelector.find(\"option:selected\").val();\r\n    this.$qualitySelector.find(\"option\").remove();\r\n\r\n    for (var i = 0; i < this.options.sizes.length; i++) {\r\n      var s = this.options.sizes[i];\r\n\r\n      var label = translate(s.label);\r\n\r\n      if (s.percentage !== undefined) {\r\n        this.imager.quality = s.quality;\r\n        this.imager.targetScale = s.scale;\r\n        this.imager.render();\r\n\r\n        var size = this.imager.getDataSize() / 1024;\r\n\r\n        label +=\r\n          \" - \" +\r\n          Math.round(size) +\r\n          \" \" +\r\n          translate(\"KB\") +\r\n          \" (\" +\r\n          s.percentage +\r\n          \"%)\";\r\n      }\r\n\r\n      var $swatch = $('<option value=\"' + i + '\">' + label + \"</option>\");\r\n\r\n      this.$qualitySelector.find(\"select\").append($swatch);\r\n    }\r\n\r\n    if (selected) {\r\n      this.$qualitySelector.find(\"select\").val(selected);\r\n    } else {\r\n      this.$qualitySelector.find(\"select\").val(0);\r\n    }\r\n\r\n    this.$qualitySelector.find(\"select\").trigger(\"change\");\r\n  }\r\n\r\n  hide() {\r\n    this.$qualitySelector\r\n      .find(\"select\")\r\n      .val.apply(this.$qualitySelector, arguments);\r\n  }\r\n\r\n  hide() {\r\n    this.$qualitySelector.removeClass(\"hidden\");\r\n  }\r\n\r\n  hide() {\r\n    this.$qualitySelector.addClass(\"hidden\");\r\n  }\r\n}\r\n"],
  "mappings": "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CD,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,KAAK;AAAA,cACD,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,KAAK;AAAA,cACD,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,KAAK;AAAA,cACD,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,KAAK;AAAA,cACD,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,KAAK;AAAA,cACD,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,KAAK;AAAA,cACD,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,KAAK;AAAA,cACD,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,KAAK;AAAA,cACD,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,KAAK;AAAA,cACD,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,KAAK;AAAA,cACD,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,KAAK;AAAA,cACD,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,KAAK;AAAA,cACD,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,KAAK;AAAA,cACD,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,KAAK;AAAA,cACD,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,KAAK;AAAA,cACD,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,KAAK;AAAA,cACD,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,KAAK;AAAA,cACD,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,KAAK;AAAA,cACD,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,KAAK;AAAA,cACD,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,KAAK;AAAA,cACD,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,KAAK;AAAA,cACD,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,KAAK;AAAA,cACD,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,KAAK;AAAA,cACD,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,KAAK;AAAA,cACD,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,KAAK;AAAA,cACD,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,KAAK;AAAA,cACD,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,KAAK;AAAA,cACD,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,KAAK;AAAA,cACD,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,KAAK;AAAA,cACD,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,KAAK;AAAA,cACD,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,KAAK;AAAA,cACD,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,KAAK;AAAA,cACD,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,KAAK;AAAA,cACD,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,KAAK;AAAA,cACD,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,KAAK;AAAA,cACD,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,KAAK;AAAA,cACD,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,KAAK;AAAA,cACD,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,KAAK;AAAA,cACD,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,KAAK;AAAA,cACD,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,KAAK;AAAA,cACD,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,KAAK;AAAA,cACD,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,KAAK;AAAA,cACD,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,KAAK;AAAA,cACD,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,KAAK;AAAA,cACD,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,KAAK;AAAA,cACD,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,KAAK;AAAA,cACD,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,KAAK;AAAA,cACD,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,KAAK;AAAA,cACD,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,KAAK;AAAA,cACD,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,KAAK;AAAA,cACD,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,KAAK;AAAA,cACD,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,KAAK;AAAA,cACD,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,KAAK;AAAA,cACD,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,KAAK;AAAA,cACD,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,KAAK;AAAA,cACD,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,KAAK;AAAA,cACD,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,KAAK;AAAA,cACD,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,KAAK;AAAA,cACD,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,KAAK;AAAA,cACD,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,KAAK;AAAA,cACD,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,KAAK;AAAA,cACD,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,KAAK;AAAA,cACD,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,KAAK;AAAA,cACD,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,KAAK;AAAA,cACD,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,KAAK;AAAA,cACD,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,KAAK;AAAA,cACD,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,KAAK;AAAA,cACD,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,KAAK;AAAA,cACD,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,KAAK;AAAA,cACD,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,KAAK;AAAA,cACD,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,KAAK;AAAA,cACD,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,KAAK;AAAA,cACD,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,UACJ;AAAA,UACA,QAAQ;AAAA,YACJ,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,OAAO;AAAA,cACH,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,UACJ;AAAA,UACA,OAAO;AAAA,YACH,GAAG;AAAA,cACC,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,GAAG;AAAA,cACC,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,GAAG;AAAA,cACC,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,GAAG;AAAA,cACC,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,GAAG;AAAA,cACC,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,GAAG;AAAA,cACC,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,GAAG;AAAA,cACC,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,GAAG;AAAA,cACC,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,GAAG;AAAA,cACC,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,GAAG;AAAA,cACC,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,IAAI;AAAA,cACA,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,IAAI;AAAA,cACA,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,IAAI;AAAA,cACA,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,IAAI;AAAA,cACA,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,IAAI;AAAA,cACA,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,IAAI;AAAA,cACA,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,IAAI;AAAA,cACA,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,IAAI;AAAA,cACA,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,IAAI;AAAA,cACA,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,IAAI;AAAA,cACA,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,IAAI;AAAA,cACA,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,IAAI;AAAA,cACA,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,IAAI;AAAA,cACA,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,IAAI;AAAA,cACA,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,IAAI;AAAA,cACA,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,IAAI;AAAA,cACA,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,IAAI;AAAA,cACA,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,IAAI;AAAA,cACA,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,IAAI;AAAA,cACA,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YACA,IAAI;AAAA,cACA,QAAQ;AAAA,cACR,QAAQ;AAAA,YACZ;AAAA,YA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",
  "names": ["Modal", "$body", "MOUSE_DOWN", "MOUSE_MOVE", "MOUSE_UP", "$body", "MOUSE_DOWN", "MOUSE_UP", "MOUSE_MOVE", "$body", "MOUSE_DOWN", "MOUSE_UP", "MOUSE_MOVE", "$body", "Modal", "piexif"]
}
